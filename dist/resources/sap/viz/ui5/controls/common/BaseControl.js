/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/base/i18n/Localization","sap/ui/core/Control","sap/ui/core/RenderManager","sap/ui/core/ResizeHandler","sap/viz/library","sap/ui/thirdparty/jquery","./BaseControlRenderer"],function(e,i,t,r,n,jQuery,s){"use strict";var o=i.extend("sap.viz.ui5.controls.common.BaseControl",{metadata:{library:"sap.viz",properties:{uiConfig:{type:"object",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"640px"},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:"480px"}},renderer:s}});o.prototype.init=function(){this._app$=null;this._controls={};this._handlers={resize:null};this._locale=null;this._pendingRerendering=false;this._resourceLoaded=false;n._initializeVIZControls(this.isA("sap.viz.ui5.VizContainer"),function(e){this._resourceLoaded=e;this.invalidate();setTimeout(function(){if(!this.getUIArea()){this._render()}}.bind(this),0)}.bind(this))};o.prototype.exit=function(){this._app$=null;this._deregister();for(var e in this._controls){this._controls[e].destroy()}};o.prototype.onBeforeRendering=function(){var e=this._app$&&this._app$[0];if(e&&!t.isPreservedContent(e)){t.preserveContent(e,true,false)}this._deregister()};o.prototype.onAfterRendering=function(){this._render()};o.prototype.onThemeChanged=function(){if(this.getDomRef()){this.invalidate();if(!this._pendingRerendering){this._render()}}};o.prototype.onLocalizationChanged=function(){if(this._locale!==e.getLanguage()){this._render()}};o.prototype._render=function(){if(this._resourceLoaded&&this.getDomRef()){this._pendingRerendering=false;this._locale=e.getLanguage();if(!this._app$){this._app$=jQuery(document.createElement("div")).appendTo(this.getDomRef()).addClass("ui5-viz-controls-app");jQuery(this._app$).attr("data-sap-ui-preserve",this.getId());this._validateSize();this._createChildren()}else{this._app$.appendTo(this.getDomRef());this._validateSize();this._updateChildren()}this._register();this.fireEvent("pendingRerenderingFalse")}};o.prototype._createChildren=function(){};o.prototype._updateChildren=function(){};o.prototype._deregister=function(){if(this._handlers.resize){r.deregister(this._handlers.resize)}this._handlers.resize=null};o.prototype._register=function(){this._deregister();this._handlers.resize=r.register(this.getDomRef(),jQuery.proxy(this._validateSize,this))};o.prototype._validateSize=function(){};o.prototype.invalidate=function(){i.prototype.invalidate.apply(this,arguments);if(this.getUIArea()){this._pendingRerendering=true}};return o});
//# sourceMappingURL=BaseControl.js.map