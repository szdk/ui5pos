//@ui5-bundle sap/chart/library-preload.js
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/AutoScaleMode", ["sap/ui/base/DataType"],function(a){"use strict";var e={DataSet:"DataSet",VisibleData:"VisibleData"};a.registerEnum("sap.chart.AutoScaleMode",e);return e},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/Chart", ["sap/base/i18n/Formatting","sap/base/i18n/ResourceBundle","sap/chart/library","sap/viz/ui5/controls/VizFrame","sap/viz/ui5/controls/common/BaseControl","sap/viz/ui5/data/Dataset","sap/viz/ui5/data/FlattenedDataset","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/chart/data/Dimension","sap/chart/data/TimeDimension","sap/chart/data/HierarchyDimension","sap/chart/data/Measure","sap/ui/model/analytics/ODataModelAdapter","sap/chart/utils/RoleFitter","sap/chart/utils/ChartUtils","sap/chart/utils/ChartTypeAdapterUtils","sap/chart/utils/DateFormatUtil","sap/chart/utils/DataSourceUtils","sap/chart/utils/SelectionAPIUtils","sap/chart/utils/MeasureSemanticsUtils","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType","sap/ui/model/analytics/odata4analytics","sap/ui/Device","sap/chart/TimeUnitType","sap/chart/coloring/Colorings","sap/chart/ChartLog","sap/chart/pagination/PagingController","sap/ui/core/LocaleData","sap/ui/core/Control","sap/ui/core/BusyIndicatorUtils","sap/ui/core/theming/Parameters","sap/chart/SeriesColorTracker","sap/viz/ui5/format/ChartFormatter","sap/chart/utils/ValueAxisScaleUtils","sap/chart/AutoScaleMode","sap/chart/ScaleBehavior","sap/viz/ui5/utils/CommonUtil","sap/base/Log","sap/ui/thirdparty/jquery"],function(e,t,i,r,a,s,n,o,l,h,u,c,d,g,p,f,m,y,v,_,S,b,D,C,P,V,z,F,A,x,T,M,k,N,B,O,I,E,U,R,w,j,jQuery){"use strict";var L=i.SelectionBehavior,H=i.SelectionMode;var q=a.extend("sap.chart.Chart",{metadata:{library:"sap.chart",designtime:"sap/chart/designtime/Chart.designtime",properties:{chartType:{type:"string",defaultValue:"bar"},uiConfig:{type:"object",group:"Misc"},visibleDimensions:{type:"string[]",defaultValue:[]},inResultDimensions:{type:"string[]",defaultValue:[]},visibleMeasures:{type:"string[]",defaultValue:[]},vizProperties:{type:"object",group:"Misc"},vizScales:{type:"object[]",group:"Misc"},isAnalytical:{type:"boolean"},selectionBehavior:{type:"sap.chart.SelectionBehavior",defaultValue:L.DataPoint},selectionMode:{type:"sap.chart.SelectionMode",defaultValue:H.Multi},enablePagination:{type:"boolean",defaultValue:false},enableStableColor:{type:"boolean",defaultValue:false},enableScalingFactor:{type:"boolean",defaultValue:false},customMessages:{type:"object",defaultValue:null},colorings:{type:"object",defaultValue:null},activeColoring:{type:"object",defaultValue:null},valueAxisScale:{type:"object",defaultValue:null},hideSharedInformation:{type:"boolean",defaultValue:true}},aggregations:{data:{type:"sap.ui.core.Element",multiple:true,bindable:"bindable"},_vizFrame:{type:"sap.viz.ui5.controls.VizFrame",multiple:false,visibility:"hidden"},dimensions:{type:"sap.chart.data.Dimension",multiple:true},measures:{type:"sap.chart.data.Measure",multiple:true}},events:{drilledDown:{parameters:{dimensions:{type:"string[]"}}},drilledUp:{parameters:{dimensions:{type:"string[]"}}},renderComplete:{},selectData:{},deselectData:{},valueAxisFixedScaleTurnedOff:{},drillStackChanged:{}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t).style("width",t.getWidth()).style("height",t.getHeight()).openEnd().renderControl(t.getAggregation("_vizFrame")).close("div")}}});q.getMetadata().getAggregation("data")._doesNotRequireFactory=true;function $(e){return e.indexOf("%")!==-1?"100%":e}q.prototype.setHeight=function(e){this.setProperty("height",e);var t=this._getVizFrame();if(t){t.setHeight($(this.getProperty("height")))}return this};q.prototype.setWidth=function(e){this.setProperty("width",e);var t=this._getVizFrame();if(t){t.setWidth($(this.getProperty("width")))}return this};q.prototype.setChartType=function(e,t){this.setProperty("chartType",e,t);this._sAdapteredChartType=e;this._bIsPagingChartType=f.CONFIG.pagingChartTypes.indexOf(e)>-1;if(this._isEnablePaging()){this._getPagingController().init(false)}else{var i=this._getDataset();if(i){i.setPagingOption(null);i.setRange(-1,-1)}}this._invalidateBy({source:this,keys:{vizFrame:true}});this._bNeedToApplyDefaultProperties=true;return this};q.prototype.setColorings=function(e){this.setProperty("colorings",e);this._invalidateBy({source:this,keys:{vizFrame:true,checkBinding:true}});return this};q.prototype.setActiveColoring=function(e){this.setProperty("activeColoring",e);this._invalidateBy({source:this,keys:{vizFrame:true,checkBinding:true}});return this};q.prototype.setValueAxisScale=function(e){this._bEnbableValueAxisScale=true;this.setProperty("valueAxisScale",e);if(this._oValueScaleSetting&&this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff){this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff=false;this._oValueScaleSetting.resetValueAxisScale=true}this._invalidateBy({source:this,keys:{vizFrame:true}});return this};q.prototype._setValueAxisScale=function(){var e=this.getValueAxisScale(),t=!this._rendered&&!!e,i=!(this._mNeedToUpdate["binding"]&&this._oValueScaleSetting)&&this._bEnbableValueAxisScale;if(t||i){if(!this._bEnbableValueAxisScale){this._bEnbableValueAxisScale=true}this._oValueScaleSetting=E.getValueAxisScaleSetting(this.getChartType(),e,this.getMeasures(),this.getVisibleMeasures())}};q.prototype._getValueAxisScaleSetting=function(){return this._bEnbableValueAxisScale?this._oValueScaleSetting||{}:{}};q.prototype._validateValueScaleOnDimChange=function(e,t){if(t&&this._oValueScaleSetting){var i=this.getValueAxisScale();if(i&&i.scaleBehavior===R.FixedScale){var r=[];e.forEach(function(e){var i=t.indexOf(e);if(i<0){r.push(e)}else{t.splice(i,1)}});r=r.concat(t);if(r.length>0){var a=false,s=this.getChartType();if(f.isStackedLikeChart(s)){a=true;r.forEach(function(e){if(e._getFixedRole()!=="series"){a=false}})}if(!a){this._oValueScaleSetting.fireValueAxisFixedScaleTurnedOff=true;i.scaleBehavior=R.AutoScale;this.setProperty("valueAxisScale",i);this.fireValueAxisFixedScaleTurnedOff();if(this._oValueScaleSetting.resetValueAxisScale){i=this.getValueAxisScale();this.setProperty("valueAxisScale",i)}this._oValueScaleSetting=E.getValueAxisScaleSetting(s,i,this.getMeasures(),this.getVisibleMeasures())}}else{this._oValueScaleSetting=E.getValueAxisScaleSetting(this.getChartType(),i,this.getMeasures(),this.getVisibleMeasures())}}}};q.prototype.removeDimension=function(e){var t=this._getVisibleDimensions()||[];var i;if(this.getIsAnalytical()===false&&e&&e.getName()){i=t.indexOf(e.getName());if(i!==-1){j.error('Data source does not support aggregation. The method "removeDimension" therefore cannot be used!');return}}var r=this.removeAggregation("dimensions",e);if(r){i=t.indexOf(r.getName());if(i!==-1){t.splice(i,1);this.setVisibleDimensions(t)}var a=this.getInResultDimensions()||[];i=a.indexOf(r.getName());if(i!==-1){a.splice(i,1);this.setInResultDimensions(a)}}return r};q.prototype.removeAllDimensions=function(){var e;if(this.getIsAnalytical()===false){j.error('Data source does not support aggregation. The method "removeAllDimensions" therefore cannot be used!')}else{e=this.removeAllAggregation("dimensions");this.setVisibleDimensions([]);this.setInResultDimensions([])}return e};q.prototype.destroyDimensions=function(){var e;if(this.getIsAnalytical()===false){j.error('Data source does not support aggregation. The method "destroyDimensions" therefore cannot be used!')}else{e=this.destroyAggregation("dimensions");this.setVisibleDimensions([]);this.setInResultDimensions([])}return e};q.prototype.removeMeasure=function(e){var t=this.removeAggregation("measures",e);if(t){var i=this._getVisibleMeasures()||[],r=i.indexOf(t.getName());if(r!==-1){i.splice(r,1);this.setVisibleMeasures(i)}}return t};q.prototype.removeAllMeasures=function(){var e=this.removeAllAggregation("measures");this.setVisibleMeasures([]);return e};q.prototype.destroyMeasures=function(){var e=this.destroyAggregation("measures");this.setVisibleMeasures([]);return e};q.prototype._getVisibleDimensions=function(e){var t=this._getDrillStateTop();var i=t?t.dimensions:this.getProperty("visibleDimensions");return e?this._normalizeDorM(i,true):i};q.prototype.getVisibleDimensions=function(){var e=this._getVisibleDimensions();return this._aFeeds?e.filter(function(e){return this._aFeeds._unused.indexOf(e)===-1},this):e};q.prototype._getVisibleMeasures=function(e){var t=this._getDrillStateTop();var i=t?t.measures:this.getProperty("visibleMeasures");return e?this._normalizeDorM(i):i};q.prototype.getVisibleMeasures=function(){var e=this._getVisibleMeasures();return this._aFeeds?e.filter(function(e){return this._aFeeds._unused.indexOf(e)===-1},this):e};q.prototype.setVisibleDimensions=function(e,t){var i=this._dimensionSanityCheck({visible:e});this.setProperty("visibleDimensions",e,t);this.setProperty("inResultDimensions",i.inResult,t);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this};q.prototype.setInResultDimensions=function(e,t){var i=this._dimensionSanityCheck({inResult:e});this.setProperty("inResultDimensions",e,t);this.setProperty("visibleDimensions",i.visible,t);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this};q.prototype.setVisibleMeasures=function(e,t){this.setProperty("visibleMeasures",e,t);var i=this._drillStateStack||[];if(!this._bIsInitialized){this._createDrillStack()}else{i.forEach(function(e){e.measures=this.getProperty("visibleMeasures")}.bind(this))}this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});return this};q.prototype.setEnableStableColor=function(e){e=!!e;if(this.getProperty("enableStableColor")!==e){this.setProperty("enableStableColor",e);this._invalidateBy({source:this,keys:{vizFrame:true}})}return this};q.prototype.setEnablePagination=function(e,t){if(!this._bIsInitialized){this.setProperty("enablePagination",e,t);this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}})}return this};q.prototype._dimensionSanityCheck=function(e){var t=e.visible||this.getVisibleDimensions()||[],i=e.inResult||this.getInResultDimensions()||[];var r=[].concat(t).concat(i).reduce(function(e,r){var a=t.indexOf(r)!==-1,s=i.indexOf(r)!==-1;if(a&&s){e.common[r]=true}else if(a){e.visible[r]=true}else if(s){e.inResult[r]=true}return e},{visible:{},inResult:{},common:{}});r.visible=Object.keys(r.visible);r.inResult=Object.keys(r.inResult);r.common=Object.keys(r.common);return r};q.prototype._prepareFeeds=function(){if(!this._aFeeds){var e=this._normalizeDorM(this._getVisibleDimensions(),true),t=this._normalizeDorM(this._getVisibleMeasures(),false),i=this._normalizeDorM(this.getInResultDimensions(),true),r;this._sAdapteredChartType=this.getEnablePagination()?this.getChartType():m.adaptChartType(this.getChartType(),e);var a=this._getVisibleMeasures();r=this._normalizeDorM(this.getMeasures().filter(function(e){return a.indexOf(e.getName())===-1}),false);var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");var n=s&&this.getModel()instanceof s;this._aFeeds=p.fit(this._sAdapteredChartType,e,t,i,this._enableSemanticPattern(),r,n);if((!this._aFeeds._valid||this._aFeeds._unused.length)&&this._sAdapteredChartType!==this.getChartType()){this._sAdapteredChartType=this.getChartType();this._aFeeds=p.fit(this._sAdapteredChartType,e,t,i,this._enableSemanticPattern())}if(this._sAdapteredChartType!==this.getChartType()){this._bNeedToApplyDefaultProperties=true}}return this._aFeeds};q.prototype._normalizeDorM=function(e,t){var i=t?this.getDimensions():this.getMeasures(),r=i.reduce(function(e,t){e[t.getName()]=t;return e},{}),a=t?h:d;var s=e.reduce(function(e,t){var i;if(typeof t==="string"){i=t}else if(t instanceof a){i=t.getName()}else{e.errors.push(t)}if(r[i]){e.normalized.push(r[i])}else{e.errors.push(t)}return e},{normalized:[],errors:[]});var n=s.normalized;if(s.errors.length>0){n.errors=s.errors}return n};q.prototype._redundantsFromSelection=function(){var e=this._getVizFrame().vizSelection();if(!e||e.length===0){return{measureNames:{}}}var t=this._getContinuesSemanticTuples();var i=e.reduce(function(e,i){var r=[];for(var a in t){if(t.hasOwnProperty(a)){var s=t[a];if(i.data[a]){r.push(i.data[s.timeAxis]<s.projectedValueStartTime?s.projected:s.actual)}else{r.push(s.actual);r.push(s.projected)}}}jQuery.each(i.data,function(t,i){if(!(r.length>0&&r.indexOf(t)>-1)){if(!e[t]){e[t]=[]}if(e[t].indexOf(i)===-1){e[t].push(i)}}});return e},{});var r=!this.getHideSharedInformation()?{}:this._getVisibleDimensions().reduce(function(e,t){var r=i[t];if(r.length===1){e[t]=r[0]}return e},{});r.measureNames=this._getVisibleMeasures().reduce(function(e,t){if(!i[t]){e[t]=true}return e},{});return r};q.prototype._deriveFilterFromSelection=function(){var e=this._getVisibleDimensions();var t=this;var i=this._getVizFrame().vizSelection();if(this.getSelectionBehavior().toUpperCase()===L.Category){i=i.category}else if(this.getSelectionBehavior().toUpperCase()===L.Series){i=i.series}var r=false;var a=i.map(function(i){var a=e.reduce(function(e,a){var s=t.getDimensionByName(a);var n;n=i.data[a];if(n!=null){if(f.CONFIG.timeChartTypes.indexOf(t._sAdapteredChartType)>-1&&s instanceof u){var o=y.getInstance(s.getTimeUnit());if(o){var l=o.format.bind(o);n=l(new Date(i.data[a]))}}var h=new D({path:a,operator:C.EQ,value1:n});if(s instanceof c){e.hierarchyFilters.push(h);r=true}else{e.filters.push(h)}e.signature.push(a+"="+i.data[a])}return e},{filters:[],hierarchyFilters:[],signature:[]});a.signature=a.signature.join(";");return a});var s=a.reduce(function(e,t){if(!e[t.signature]&&t.filters.length+t.hierarchyFilters.length>0){e[t.signature]={filters:t.filters.length?new D(t.filters,true):null,hierarchyFilters:t.hierarchyFilters.length?new D(t.hierarchyFilters,true):null}}return e},{});var n=Object.keys(s).map(function(e){return{filters:s[e].filters,hierarchyFilters:s[e].hierarchyFilters}});if(n.length>1){if(r){return{hierarchyFilters:new D(n.map(function(e){return e.hierarchyFilters}),false)}}else{return{filters:new D(n.map(function(e){return e.filters}),false)}}}else if(n.length===1){return{filters:n[0].filters,hierarchyFilters:n[0].hierarchyFilters}}else{return{filters:null,hierarchyFilters:null}}};function G(){var e=this.getSelectionBehavior();var t=this._getVisibleDimensions().concat(this.getInResultDimensions()).filter(function(t){var i=this.getDimensionByName(t);if(e.toUpperCase()===L.Category){return i._getFixedRole()==="category"||i._getFixedRole()==="category2"}else if(e.toUpperCase()===L.Series){return i._getFixedRole()==="series"}return true}.bind(this));var i=t.some(function(e){var t=this.getDimensionByName(e);return t instanceof c}.bind(this));var r;if(e.toUpperCase()===L.Category){r=this.getSelectedCategories().categories}else if(e.toUpperCase()===L.Series){r=this.getSelectedSeries().series}else{r=this.getSelectedDataPoints().dataPoints}if(i&&Object.keys(t).length>1&&r.length>1){return false}return true}q.prototype._checkDrilldownValid=function(e){if(this._bEmptyData){j.error("Drill down not possible, because there is already no data available!");return false}var t=this.getInResultDimensions();var i=this._getVisibleDimensions().concat(t).reduce(function(e,t){e[t]=true;return e},{});if(!G.call(this)){j.error("Drill down not possible, because multiple selections on hierarchy/regular mixed dimension is not supported in backend service!");return false}function r(e,i){var r=true;if(i[e.getName()]){if(!(e instanceof c)){j.error("Drill down not possible, because one of the given dimensions is already drilled down!");r=false}else{if(t.indexOf(e.getName())>-1){j.error("Drill down not possible, because one of the given dimensions is inResult!");r=false}}}return r}for(var a=0;a<e.length;++a){if(!r(e[a],i)){return false}}var s=e.reduce(function(e,t){e[t.getName()]=t;return e},{});var n=this;function o(e){if(Array.isArray(e.aFilters)){return e.aFilters.some(o)}else{return!r(n.getDimensionByName(e.sPath),s)}}var l=this._getDrillStateTop();if(l&&l.filter&&o(l.filter)){return false}return true};q.prototype._createDrillStack=function(){this._drillStateStack=W.call(this);var e=this.getProperty("visibleDimensions")||[];this._aUnavailableDims=e.filter(function(e){return!this.getDimensionByName(e)}.bind(this));if(this._aUnavailableDims.length){this._invalidateBy({source:this,keys:{drillStack:true}})}else{this.fireDrillStackChanged(this.getDrillStack())}};q.prototype._updateDrillStack=function(){var e=this._aUnavailableDims.some(function(e){return this.getDimensionByName(e)instanceof c}.bind(this));if(e){this._drillStateStack=W.call(this)}this._aUnavailableDims=[];this.fireDrillStackChanged(this.getDrillStack())};function W(){var e=this.getProperty("visibleDimensions")||[],t=this.getProperty("visibleMeasures")||[],i=[{dimensions:[],measures:t,filter:undefined,nonHierarchyFilters:undefined,hierarchyFilters:undefined,hierarchylevel:{}}],r=[];var a={};for(var s=0;s<e.length;s++){var n=e[s];r.push(n);var o=this.getDimensionByName(n);if(o&&o instanceof c){a[n]=o.getLevel()}i.push({dimensions:r.slice(),measures:t,filter:undefined,nonHierarchyFilters:undefined,hierarchyFilters:undefined,hierarchylevel:jQuery.extend(true,{},a)})}return i}q.prototype._invalidateBy=function(e){var t=e.source;var i=this._oCandidateColoringSetting?this._oCandidateColoringSetting.additionalDimensions||[]:[];if(t===this){jQuery.each(e.keys||{},function(e,t){this._markForUpdate(e,t)}.bind(this))}else if(t instanceof d&&this._getVisibleMeasures().indexOf(t.getName())!==-1){this._markForUpdate("dataSet",true);this._markForUpdate("vizFrame",true);if(e.property==="unitBinding"||this.getColorings()&&(e.property==="semantics"||e.property==="semanticallyRelatedMeasures")){this._markForUpdate("binding",true)}}else if(t instanceof h&&this._getVisibleDimensions().concat(i).indexOf(t.getName())!==-1){this._markForUpdate("dataSet",true);this._markForUpdate("vizFrame",true);if(t.getDisplayText()&&(e.property==="textProperty"||e.property==="displayText")){this._markForUpdate("binding",true)}else if(e.property==="level"&&this.getProperty("visibleDimensions").indexOf(t.getName())>-1){this._createDrillStack();this._markForUpdate("binding",true)}}else if(t instanceof h&&this.getProperty("inResultDimensions").indexOf(t.getName())>-1){if(e.property==="level"){this._markForUpdate("dataSet",true);this._markForUpdate("binding",true);this._markForUpdate("vizFrame",true)}}this.invalidate(e)};q.prototype._handleNonAnalyticalFeeding=function(){var e=this;var t=this.getInResultDimensions();var i=this._getVisibleDimensions(),r=this.getDimensions().map(function(e){return e.getName()});var a=[];r.forEach(function(t){if(e.getDimensionByName(t)){var i=e.getDimensionByName(t).getTextProperty();if(i){a.push(i)}}});var s=i.concat(r.filter(function(e){return i.indexOf(e)<0})).filter(function(e){return a.indexOf(e)<0&&t.indexOf(e)<0});this.setProperty("visibleDimensions",s);this._createDrillStack()};q.prototype._markForUpdate=function(e,t){if(!this._mNeedToUpdate){this._mNeedToUpdate={}}this._mNeedToUpdate[e]=t;var i=this._updaters.onInvalidate[e];if(i){i.call(this)}};q.prototype._updaters=function(){return{onInvalidate:{vizFrame:function(){this._aFeeds=null;this._bColoringParsed=null},checkBinding:function(){this._bColoringParsed=null},binding:function(){this._bColoringParsed=null},loopData:function(){this._bColoringParsed=null}},checkBinding:function(){var e=this._getCandidateColoringSetting();var t=e.additionalDimensions;var i=e.additionalMeasures;if(t&&t.length||i&&i.length){this._mNeedToUpdate["binding"]=true}},drillStack:function(){this._updateDrillStack()},dataSet:function(){this._getDataset().invalidate()},binding:function(){var e=this._getDataset().getBinding("data"),t=this.getInResultDimensions();if(!e){return}var i=this._getVisibleDimensions(true).concat(this._normalizeDorM(t,true));var r=this._getVisibleMeasures(true);this._oMeasureRangePromise=v.updateModel(this.getIsAnalytical())(this,i,r);var a=this._getDrillStateTop();if(i.length>0||r.length>0){this._getVizFrame()._readyToRender(false);this.setBusy(true)}this._bFilterCalledByChart=true;e.filter(a&&a.filter?a.filter:undefined,P.Control);var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(s&&this.getModel()instanceof s){if(e._bSuspendCalledByChart){e._bSuspendCalledByChart=false;e.getRootBinding().resume()}}if(this._bEnbableValueAxisScale){this._validateValueScaleOnDimChange(i,this._aDimensions)}this._aDimensions=i},vizFrame:function(){var e=this,t=this._getDataset(),i=this._getVizFrame();var r=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(this._mNeedToUpdate["binding"]){var a=this._getDataset().getBinding("data");if(r&&this.getModel()instanceof r){var s=a.getRootBinding();if(s&&!s.isSuspended()){s.suspend();a._bSuspendCalledByChart=true}}if(this._isEnablePaging()){this._getPagingController().reset();this._oColoringStatus={}}else{this._getDataset().setPagingOption(null)}}else{this._markForUpdate("loopData",true)}if(this.getEnableStableColor()){this._oColorTracker.add(i._runtimeScales());i._runtimeScales(this._oColorTracker.get(),true)}else{this._resetRuntimeScale()}var n=this._isEnablePaging()?this._getPagingController().getMeasureRange():{};t.removeAllAggregation("dimensions",true);t.removeAllAggregation("measures",true);i.removeAllAggregation("feeds",true);if(this.getIsAnalytical()===false){this._handleNonAnalyticalFeeding()}var h={};try{h=this._prepareFeeds();h._def.dim.forEach(function(e){t.addAggregation("dimensions",e,true)},this);h._def.msr.forEach(function(i){if(i){var r=n[i.getIdentity()];if(r){i.setRange([r.min,r.max])}if(!e.getDimensionByName(i.getUnit())){i.setUnit(null)}t.addAggregation("measures",i,true)}},this);h.forEach(function(e){i.addFeed(e)})}catch(e){}this._semanticTuples=h._semanticTuples;var u=this._getCandidateColoringSetting();var c=h._context||[];var d=u.additionalMeasures||[];var g=u.additionalDimensions||[];var p=r&&this.getModel()instanceof r;d.forEach(function(e){c.push({id:e,showInTooltip:false});var i=new l({name:e,identity:e,value:"{"+e+"}"});if(p){i.setBindingContext(null)}t.addMeasure(i)});g.forEach(function(e){c.push({id:e,showInTooltip:false});var i=new o({name:e,identity:e,value:"{"+e+"}"});if(p){i.setBindingContext(null)}t.addDimension(i)});t.setContext(c);i.invalidate();t.invalidate();i.setVizType(this._reset100DonutChartType(this._sAdapteredChartType));i._setCustomMessages(this.getCustomMessages());this._setValueAxisScale();if(!this._mNeedToUpdate["loopData"]){this._setEffectiveScales();i.setVizProperties(this._getEffectiveProperties())}},loopData:function(){var e=this._getVizFrame();try{this._prepareData()}catch(e){if(e instanceof x){e.display()}else{throw e}}var t=this._getEffectiveProperties();this._usingDisplayNameForSemantics(t);e.setVizProperties(t);this._setEffectiveScales()}}}();q.prototype._getDrillStateTop=function(){return this._drillStateStack?this._drillStateStack[this._drillStateStack.length-1]:null};q.prototype._getVizFrame=function(){return this.getAggregation("_vizFrame")};q.prototype._getDataset=function(){var e=this._getVizFrame();return e?e.getDataset():null};q.prototype._prepareData=function(){var e=this._getContexts();if(e){this._bEmptyData=e.length?false:true;var t=this._getCandidateColoringSetting().contextHandler;var i=[];if(t){i.push(t);try{this._loopContext(i)}catch(e){if(e instanceof x){e.display();this._oCandidateColoringSetting={}}else{throw e}}}this._oSemanticVizSettings=S.getSemanticVizSettings(this._sAdapteredChartType,this._semanticTuples,this._oCandidateColoringSetting,this._enableSemanticPattern(),this._bDataPointStyleSetByUser,this._bLegendSetByUser)}};q.prototype._getContexts=function(){return this._getDataset()._getDataContexts()};q.prototype._loopContext=function(e){var t=this._getContexts();if(t.length>0&&!t.dataRequested){var i=this;t.forEach(function(t){e.forEach(function(e){e.call(i,t)})})}};q.prototype._filterHandler=function(){if(!this._bFilterCalledByChart){this._bFilterCalledByCustomer=true;this._bColoringParsed=false}this._bFilterCalledByChart=false};q.prototype._dataRefreshListener=function(e){if(e.getParameters().reason==="filter"){this._filterHandler()}if(this.getIsAnalytical()&&e.getParameters().updateAnalyticalInfo){v.updateModel(true)(this)}};q.prototype._bindingChangeListener=function(e){var t=this._getVizFrame();if(e.getParameters().reason==="filter"){this._filterHandler()}if(this.getEnableStableColor()){this._oColorTracker.add(t._runtimeScales());t._runtimeScales(this._oColorTracker.get(),true)}t.invalidate();this.setBusy(false);if(this._isEnablePaging()){this._getPagingController().bindingChanged()}else{t._readyToRender(true)}try{this._prepareData()}catch(e){if(e instanceof x){e.display()}}var i=this._getEffectiveProperties();this._usingDisplayNameForSemantics(i);t.setVizProperties(i);this._setEffectiveScales();this._bFilterCalledByChart=false;this._bFilterCalledByCustomer=false};q.prototype._resetRuntimeScale=function(){this._oColorTracker.clear();this._getVizFrame()._runtimeScales(this._oColorTracker.get(),true)};q.prototype._hasUserSemanticProps=function(){var e=this.getProperty("vizProperties");if(e&&e.plotArea){if(e.plotArea.dataPointStyle||e.plotArea.seriesStyle){return true}}return false};q.prototype._enableSemanticColoring=function(){var e=true;if(this._sAdapteredChartType==="heatmap"){var t=this.getProperty("vizScales")||[];var i=t.filter(function(e){return e.feed==="color"})[0];if(i){e=false}}else{if(this._hasUserSemanticProps()){e=false}}return e};q.prototype._enableSemanticPattern=function(){return!this._hasUserSemanticProps()&&f.CONFIG.nonSemanticPatternChartType.indexOf(this._sAdapteredChartType)===-1};q.prototype._hasSemanticPattern=function(){return this._enableSemanticPattern()&&S.hasSemanticRelation(this._semanticTuples)};q.prototype._getContinuesSemanticTuples=function(){var e={};if(this._hasSemanticPattern()){e=this._semanticTuples.reduce(function(e,t){if(t.semanticMsrName){e[t.semanticMsrName]=t}return e},{})}return e};q.prototype._getContinuesSemanticMap=function(){var e=[];if(this._hasSemanticPattern()){e=this._semanticTuples.filter(function(e){return e.projectedValueStartTime})}return e};q.prototype._getInternalVisibleMeasures=function(){var e=this._getVisibleMeasures();if(this._hasSemanticPattern()){e=e.concat(this._getContinuesSemanticMap().map(function(e){return e.semanticMsrName}))}return e};q.prototype._buildSelectedDataPoints=function(e,t){var i=this._getInternalVisibleMeasures(),r=this._getVisibleDimensions().concat(this.getInResultDimensions()),a=this._getEffectiveContinuesDataPoints(t);return _.buildSelectionVizCtx(i,r,e,a)};q.prototype._getEffectiveContinuesSeries=function(e){var t=e.slice(),i=this._getContinuesSemanticMap();if(this._hasSemanticPattern()){var r=t.map(function(e){return e.measures});i.forEach(function(e){if(r.indexOf(e.actual)>-1||r.indexOf(e.projected)>-1){t=t.filter(function(t){return t.measures!==e.actual&&t.measures!==e.projected});if(r.indexOf(e.actual)>-1&&r.indexOf(e.projected)>-1){t.push({measures:e.semanticMsrName})}}})}return t};q.prototype._getEffectiveContinuesDataPoints=function(e){var t=e.slice(),i=this._getContinuesSemanticMap();if(this._hasSemanticPattern()){var r,a,s,n;for(var o=0;o<t.length;o++){s=t[o].measures;for(var l=0;l<i.length;l++){n=i[l];r=s.indexOf(n.actual);if(r>-1){s.splice(r,1)}a=s.indexOf(n.projected);if(a>-1){s.splice(a,1)}if(r>-1||a>-1){s.push(n.semanticMsrName)}}}}return t};q.prototype._buildSelectEventData=function(e){if(e&&e.length>0&&this._hasSemanticPattern()){var t,i;var r=this._getContinuesSemanticMap();for(var a=0;a<e.length;a++){t=jQuery.extend(true,{},e[a].data);for(var s=0;s<r.length;s++){i=r[s];if(t.measureNames===i.semanticMsrName){if(t[i.timeAxis]<i.projectedValueStartTime){t.measureNames=i.actual;delete t[i.projected];delete t[i.semanticMsrName]}else{t.measureNames=i.projected;delete t[i.actual];delete t[i.semanticMsrName]}}else{if(t[i.actual]&&t.measureNames!==i.actual){delete t[i.actual]}if(t[i.projected]&&t.measureNames!==i.projected){delete t[i.projected]}}}e[a].data=t}}};q.prototype.addData=function(){j.error('Chart manages the "data" aggregation only via data binding. The method "addData" therefore cannot be used programmatically!')};q.prototype.destroyData=function(){j.error('Chart manages the "data" aggregation only via data binding. The method "destroyData" therefore cannot be used programmatically!')};q.prototype.getData=function(){j.error('Chart manages the "data" aggregation only via data binding. The method "getData" therefore cannot be used programmatically!')};q.prototype.indexOfData=function(){j.error('Chart manages the "data" aggregation only via data binding. The method "indexOfData" therefore cannot be used programmatically!')};q.prototype.insertData=function(){j.error('Chart manages the "data" aggregation only via data binding. The method "insertData" therefore cannot be used programmatically!')};q.prototype.removeData=function(){j.error('Chart manages the "data" aggregation only via data binding. The method "removeData" therefore cannot be used programmatically!')};q.prototype.removeAllData=function(){j.error('Chart manages the "data" aggregation only via data binding. The method "removeAllData" therefore cannot be used programmatically!')};q.prototype._createOData4SAPAnalyticsModel=function(e){var t=null;try{t=new V.Model(new V.Model.ReferenceByModel(e))}catch(e){return undefined}return t};q.prototype.getIsAnalytical=function(){return this.getProperty("isAnalytical")};q.prototype.setIsAnalytical=function(e,t){if(this._bIsInitialized){j.error('The proeprty isAnalytical will programmatically set according to data source. The method "setIsAnalytical" therefore cannot be used!')}else{this.setProperty("isAnalytical",e,t)}return this};q.prototype._setIsAnalyticalProperty=function(e,t){var i=e.findQueryResultByName(v.getEntitySet(this.getIsAnalytical())(t))!==undefined;if(this.getIsAnalytical()!==i){this.setProperty("isAnalytical",i)}};q.prototype.bindAggregation=function(e,t){if(e==="data"){this._oBindingInfo=jQuery.extend(true,{},t);var i=this.getModel(t.model);var r;if(i){var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");var n=sap.ui.require("sap/ui/model/json/JSONModel");if(n&&i instanceof n){if(this.getIsAnalytical()!==false){this.setProperty("isAnalytical",false)}}else if(s&&i instanceof s){this.setProperty("isAnalytical",true);if(t){t.parameters=jQuery.extend(true,{$count:t.length!=undefined||this._isEnablePaging()},t.parameters)}}else{r=this._createOData4SAPAnalyticsModel(i);this._setIsAnalyticalProperty(r,t);if(this.getIsAnalytical()){var o=sap.ui.require("sap/ui/model/odata/v2/ODataModel");if(t){var l=true;if(t.length!=undefined||this._isEnablePaging()||o&&i instanceof o){l=false}t.parameters=jQuery.extend(true,{analyticalInfo:[],useBatchRequests:true,provideGrandTotals:false,reloadSingleUnitMeasures:true,noPaging:l},t.parameters)}g.apply(i);if(r){i.setAnalyticalExtensions(r)}}}}}return a.prototype.bindAggregation.apply(this,arguments)};q.prototype._bindAggregation=function(e,t){if(e==="data"){var i=this.getModel(t.model);var r;if(i){var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");var n=sap.ui.require("sap/ui/model/json/JSONModel");if(n&&i instanceof n){if(this.getIsAnalytical()!==false){this.setProperty("isAnalytical",false)}this._deriveColumns(i,t)}else if(s&&i instanceof s){this.setProperty("isAnalytical",true);if(t){t.parameters=jQuery.extend(true,{$count:t.length!=undefined||this._isEnablePaging()},t.parameters)}}else{r=this._createOData4SAPAnalyticsModel(i);this._setIsAnalyticalProperty(r,t);if(this.getIsAnalytical()){var o=sap.ui.require("sap/ui/model/odata/v2/ODataModel");if(t){var l=true;if(t.length!=undefined||this._isEnablePaging()||o&&i instanceof o){l=false}t.parameters=jQuery.extend(true,{analyticalInfo:[],useBatchRequests:true,provideGrandTotals:false,reloadSingleUnitMeasures:true,noPaging:l},t.parameters)}g.apply(i);if(r){i.setAnalyticalExtensions(r)}}this._deriveColumns(i,t)}}var h=this._getDataset();h.bindAggregation("data",t);var u=h.getBinding("data");if(u&&i){var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(s&&i instanceof s){u._bSuspendCalledByChart=false}}this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}})}else{a.prototype._bindAggregation.apply(this,arguments)}};q.prototype._dataErrorListener=function(e){var t=this._getVizFrame();if(t){t._readyToRender(true);t.invalidate();this.setBusy(false)}};q.prototype.unbindAggregation=function(e,t){var i=false;if(e==="data"){var r=this._getDataset();if(r){var s=r.getBinding("data");if(s){delete s._bSuspendCalledByChart}r.unbindAggregation.apply(r,arguments)}t=true;i=!this.bHasAnalyticalInfo&&this.aContexts===undefined&&this._getDataset&&this._getDataset()===null&&this.mBindingInfos&&this.mBindingInfos[e]&&this.mBindingInfos[e].binding&&this.mBindingInfos[e].binding.bIsBeingDestroyed}if(!i){return a.prototype.unbindAggregation.apply(this,[e,t])}};q.prototype.unbindData=function(){if(!this.getIsAnalytical()){this.removeAllAggregation("dimensions");this.removeAllAggregation("measures");this.setProperty("visibleDimensions",[]);this.setProperty("inResultDimensions",[]);this.setProperty("visibleMeasures",[]);this._createDrillStack()}this.unbindAggregation("data")};q.prototype._deriveColumns=function(e,t){var i=this.getAggregation("dimensions");var r=this.getAggregation("measures");if((i===null||i.length===0)&&(r===null||r.length===0)){var a=v.deriveColumns(this.getIsAnalytical())(e,t);a.dimensions.forEach(this.addDimension.bind(this));a.measures.forEach(this.addMeasure.bind(this))}};q.prototype.onBeforeRendering=function(){this._bIsInitialized=true;a.prototype.onBeforeRendering.apply(this,arguments);var e=["onInvalidate","drillStack","dataSet","vizFrame","checkBinding","binding","loopData"];e.forEach(function(e){if(this._mNeedToUpdate[e]){this._updaters[e].call(this)}}.bind(this));jQuery.each(this._mNeedToUpdate,function(e){this._mNeedToUpdate[e]=false}.bind(this))};q.prototype.onAfterRendering=function(){this._showLoading(this._bLoading);this._rendered=true};q.prototype.onlocalizationChanged=function(){this._invalidateBy({source:this,keys:{vizFrame:true}})};q.prototype.exit=function(){this._getDataset().unbindAggregation("data",true);this._oColorTracker.clear();a.prototype.exit.apply(this,arguments);var e=this._getVizFrame();if(this._delegateEventHandlers){this._delegateEventHandlers.forEach(function(t){e["detach"+t.name](t.handler,this);delete t.handler},this);delete this._delegateEventHandlers}e.detachRenderComplete(this._vizFrameRenderCompleteHandler,this);e.detachEvent("_zoomDetected",K.bind(this),this);e.detachEvent("_selectionDetails",X.bind(this),this)};q.prototype.applySettings=function(){this._mNeedToUpdate={};k.prototype.applySettings.apply(this,arguments);var e=new n;e.attachEvent("dataChange",{},this._bindingChangeListener,this);e.attachEvent("dataRefresh",{},this._dataRefreshListener,this);e.attachEvent("dataError",{},this._dataErrorListener,this);var t=jQuery.extend(true,{},{applicationSet:"fiori"},this.getUiConfig());this.setUiConfig(t);this._bNeedToApplyDefaultProperties=true;this._oSemanticVizSettings={};var i=new r({width:$(this.getWidth()),height:$(this.getHeight()),vizType:this.getChartType(),uiConfig:this.getUiConfig(),vizProperties:jQuery.extend(true,{title:{visible:false}},this._getEffectiveProperties())});i.setDataset(e);i.attachRenderComplete(null,this._updateLoadingIndicator.bind(this));i.attachEvent("_zoomDetected",K.bind(this));i.attachEvent("renderFail",null,function(e){var t=this._getPagingController();if(t._sLoadingTimer){clearTimeout(t._sLoadingTimer);t._sLoadingTimer=null}this._showLoading(false)},this);this._rendered=false;i._readyToRender(false);this.setAggregation("_vizFrame",i);this._delegateEvents();this._sAdapteredChartType=this.getChartType();this._oCandidateColoringSetting={};this._oColoringStatus={};this._oColorTracker=new O;if(this._isEnablePaging()){this._getPagingController()}};q.prototype.setCustomMessages=function(e){this.setProperty("customMessages",e);var t=this._getVizFrame();if(t){t._setCustomMessages(e)}return this};q.prototype.getZoomInfo=function(){return this._getZoomInfo()};q.prototype._getZoomInfo=function(){var e=this._getVizFrame();if(e){return e._getZoomInfo()}};q.prototype.resetLayout=function(){this._createDrillStack();this._invalidateBy({source:this,keys:{binding:true,vizFrame:true,dataSet:true}});return this};q.prototype.setSelectedDataPoints=function(e){if(this.getSelectionMode()!==H.None){var t=this.getBinding("data"),i=this._getVizFrame();if(!t||!i||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this}i.vizSelection([],{clearSelection:true});i.vizSelection(this._buildSelectedDataPoints(t,e),{selectionMode:this.getSelectionMode()})}return this};q.prototype.addSelectedDataPoints=function(e){if(this.getSelectionMode()!==H.None){var t=this.getBinding("data"),i=this._getVizFrame();if(!t||!i||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this}i.vizSelection(this._buildSelectedDataPoints(t,e),{selectionMode:H.Multi})}return this};q.prototype.getSelectedDataPoints=function(){var e=this._getVizFrame();if(!e||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return{count:0,dataPoints:[]}}var t=this._getContinuesSemanticTuples();var i=this._getVisibleMeasures(),r=this._getDataset(),a=e.vizSelection()||[],s={};for(var n=0,o=a.length;n<o;n++){var l=a[n],h=l.data._context_row_number;if(!s[h]){s[h]={index:h,measures:[],context:r.findContext({_context_row_number:h})}}l.measures=_.filterVisibleMsr(l.data,i);if(!jQuery.isEmptyObject(t)){_.filterSemMsr(t,i,l)}s[h].measures=s[h].measures.concat(l.measures);if(l.unit){s[h].unit=jQuery.extend(true,s[h].unit,l.unit)}if(l.dataName){s[h].dataName=jQuery.extend(true,s[h].dataName,l.dataName)}}return{count:a.length,dataPoints:Object.keys(s).map(function(e){return s[e]})}};q.prototype.removeSelectedDataPoints=function(e){if(this.getSelectionMode()!==H.None){var t=this.getBinding("data"),i=this._getVizFrame();if(!i||this.getSelectionBehavior().toUpperCase()!=="DATAPOINT"){return this}var r=this._buildSelectedDataPoints(t,e);i.vizSelection(r,{deselection:true})}return this};q.prototype.setSelectedCategories=function(e){if(this.getSelectionMode()!==H.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!=="CATEGORY"){return this}t.vizSelection([],{clearSelection:true});t.vizSelection(e.map(_.toVizCSCtx),{selectionMode:this.getSelectionMode()})}return this};q.prototype.addSelectedCategories=function(e){if(this.getSelectionMode()!==H.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==L.Category){return this}t.vizSelection(e.map(_.toVizCSCtx),{selectionMode:H.Multi})}return this};q.prototype.removeSelectedCategories=function(e){if(this.getSelectionMode()!==H.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==L.Category){return this}t.vizSelection(e.map(_.toVizCSCtx),{deselection:true})}return this};q.prototype.getSelectedCategories=function(){var e=this._getVizFrame(),t=this.getSelectionBehavior().toUpperCase();if(!e||t!==L.Category){return{count:0,categories:[]}}else{var i=e.vizSelection()||[];return{count:i.length,categories:(i.category||[]).map(_.fromVizCSCtx)}}};q.prototype.setSelectedSeries=function(e){if(this.getSelectionMode()!==H.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==L.Series){return this}t.vizSelection([],{clearSelection:true});var r=this._getEffectiveContinuesSeries(e);t.vizSelection(r.map(_.toVizCSCtx),{selectionMode:this.getSelectionMode()})}return this};q.prototype.addSelectedSeries=function(e){if(this.getSelectionMode()!==H.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==L.Series){return this}var r=this._getEffectiveContinuesSeries(e);t.vizSelection(r.map(_.toVizCSCtx),{selectionMode:H.Multi})}return this};q.prototype.removeSelectedSeries=function(e){if(this.getSelectionMode()!==H.None){var t=this._getVizFrame(),i=this.getSelectionBehavior().toUpperCase();if(!t||i!==L.Series){return this}var r=this._getEffectiveContinuesSeries(e);t.vizSelection(r.map(_.toVizCSCtx),{deselection:true})}return this};q.prototype.getSelectedSeries=function(){var e=this._getVizFrame(),t=this.getSelectionBehavior().toUpperCase();if(!e||t!==L.Series){return{count:0,series:[]}}else{var i=e.vizSelection()||[],r=(i.series||[]).map(_.fromVizCSCtx),a=[],s=this._getContinuesSemanticTuples();r=r.filter(function(e){var t=true;if(e&&e.measures){var i=s[e.measures];if(i&&i.semanticMsrName===e.measures){a.push({measures:i.actual});a.push({measures:i.projected});t=false}}return t});r=r.concat(a);return{count:i.length,series:r}}};function Z(e){var t=e.filter(function(e){return e});if(t.length===0){return null}else if(t.length===1){return t[0]}else{return new D(t,true)}}q.prototype.drillDown=function(e){if(this.getIsAnalytical()===false){j.error('Data source does not support drillDown/drillUp. The method "drillDown" therefore cannot be used!');return}if(e&&!(e instanceof Array)){e=[e]}var t=this._normalizeDorM(e,true);if(t.length===0){return}if(!this._checkDrilldownValid(t)){return}var i=this._getDrillStateTop(),r=this._redundantsFromSelection(),a=this._deriveFilterFromSelection();var s,n,o;if(a){s=Z([a.filters,i.nonHierarchyFilters]);n=a.hierarchyFilters||i.hierarchyFilters;o=Z([s,n])||undefined}var l=jQuery.extend(true,{},i.hierarchylevel);t.forEach(function(e){if(e instanceof c){if(l[e.getName()]==null){l[e.getName()]=e.getLevel()}else{l[e.getName()]+=1}}});var h=i.dimensions.slice().filter(function(e){return!r[e]});h=h.concat(t.filter(function(e){return h.indexOf(e.getName())===-1}).map(function(e){return e.getName()}));this._drillStateStack.push({dimensions:h,measures:i.measures.filter(function(e){return!r.measureNames[e]}),filter:o,hierarchylevel:l,nonHierarchyFilters:s,hierarchyFilters:n,redundant:r});if(this._aUnavailableDims.length===0){this.fireDrillStackChanged(this.getDrillStack())}var u=t.map(function(e){return e.getName()});this.fireDrilledDown({dimensions:u});this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}})};q.prototype.drillUp=function(e){if(this.getIsAnalytical()===false){j.error('Data source does not support drillDown/drillUp. The method "drillUp" therefore cannot be used!');return}if(arguments.length===0){e=this._drillStateStack.length-2}var t=this._drillStateStack[e];if(t&&e!=this._drillStateStack.length-1){var i=this._drillStateStack.pop();this._drillStateStack.splice(e+1);if(this._aUnavailableDims.length===0){this.fireDrillStackChanged(this.getDrillStack())}this.fireDrilledUp({dimensions:i.dimensions.filter(function(e){return t.dimensions.indexOf(e)===-1})});this._invalidateBy({source:this,keys:{binding:true,vizFrame:true}})}};q.prototype.getDrillStack=function(){if(this.getIsAnalytical()===false){j.error('Data source does not support drillDown/drillUp. The method "getDrillStack" therefore cannot be used!');return}return jQuery.map(this._drillStateStack||[],function(e,t){return{dimension:e.dimensions.slice(),measure:e.measures.slice(),filter:e.filter,hierarchylevel:jQuery.extend(true,{},e.hierarchylevel)}})};q.prototype.setUiConfig=function(e){this.setProperty("uiConfig",e);if(this._getVizFrame()){this._getVizFrame().setUiConfig(e)}return this};var J=function(){var e=["interaction.selectability.mode","interaction.selectability.behavior"];function t(e,t){var i=e,r;r=t.reduce(function(e,t){if(i.hasOwnProperty(t)){e.push({parent:i,val:i[t],key:t});i=i[t]}return e},[]);if(r.length!==t.length){return}var a=r.pop();delete a.parent[a.key];while(r.length>0){a=r.pop();if(Object.keys(a.val).length>0){return}else{delete a.parent[a.key]}}}function i(i,r){var a=jQuery.extend(true,{},i);e.forEach(function(e){delete a[e];t(a,e.split("."))});return a}return{sanitize:i,modify:function(e,t,i){var r=t.split("."),a=e;while(r.length>1&&a.hasOwnProperty(r[0])){a=a[r.shift()]}var s=r[0];if(r.length===1&&a.hasOwnProperty(s)){a[s]=i(a[s])}}}}();q.prototype.setVizProperties=function(e){e=J.sanitize(e);var t=function(e,i){for(var r in i){var a=i[r];if(a!==undefined){if(!jQuery.isPlainObject(a)){e[r]=a}else{var s=e[r];if(!s||!jQuery.isPlainObject(s)){s=e[r]={}}t(s,a)}}}};var i=function(i,r){i=i||{};t(i,e);return i};e=i(jQuery.extend(true,{title:{visible:false}},this.getProperty("vizProperties")),e);this.setProperty("vizProperties",e);if(e.plotArea&&e.plotArea.dataPointStyle){this._bDataPointStyleSetByUser=true;this._invalidateBy({source:this,keys:{vizFrame:true,loopData:true}})}if(e.legend&&e.legend.title){this._bLegendSetByUser=true}if(this._getVizFrame()){this._getVizFrame().setVizProperties(this._getEffectiveProperties())}return this};q.prototype.getVizProperties=function(){var e=this._getVizFrame();var t=J.sanitize(e?e.getVizProperties():this.getProperty("vizProperties"));function i(e){var t=sap.viz.api.env.Format.numericFormatter();if(!t||typeof t.stripUnit!=="function"){return e}if(typeof e==="string"||e instanceof String){return t.stripUnit(e)}else if(e&&typeof e==="object"){jQuery.each(e,function(i,r){e[i]=t.stripUnit(r)});return e}else{return e}}J.modify(t,"plotArea.dataLabel.formatString",i);J.modify(t,"tooltip.formatString",i);return t};q.prototype.setVizScales=function(e){this.setProperty("vizScales",e);this._aVizValueScales=e.filter(function(e){return e.feed==="valueAxis"||e.feed==="valueAxis2"||e.feed==="actualValues"});if(this._aVizValueScales&&this._aVizValueScales.length>0){this._bEnbableValueAxisScale=false}if(this._getVizFrame()){this._getVizFrame().setVizScales(e)}return this};q.prototype.getVizScales=function(){var e=this._getVizFrame();return e?e.getVizScales():this.getProperty("vizScales")};q.prototype.getVizUid=function(){return this._getVizFrame().getVizUid()};q.prototype.zoom=function(e){this._getVizFrame().zoom(e)};var Y=["selectData","deselectData"];q.prototype._delegateEvents=function(){if(this._delegateEventHandlers){return}var e=this._getVizFrame();this._delegateEventHandlers=Y.map(function(t){var i=t.charAt(0).toUpperCase()+t.slice(1);var r=function(e){var i=e.getParameters();this._buildSelectEventData(i.data);delete i.id;this.fireEvent(t,i)};r=r.bind(this);e["attach"+i](null,r);return{name:i,handler:r}},this);this._vizFrameRenderCompleteHandler=Q.bind(this);e.attachRenderComplete(null,this._vizFrameRenderCompleteHandler);e.attachEvent("_selectionDetails",X.bind(this))};q.getChartTypes=i.api.getChartTypes;q.prototype.getAvailableChartTypes=function(){var e=this._getVisibleDimensions(true),t=this._getVisibleMeasures(true);return f.CONFIG.chartTypes.reduce(function(i,r){var a=p.compatible(r,e,t);if(a.compatible){i.available.push({chart:r})}else{var s={};if(a.error.missing.dim){s.Dimension=a.error.missing.dim}if(a.error.missing.time){s.DateTimeDimension=a.error.missing.time}if(a.error.missing.msr){s.Measure=a.error.missing.msr}i.unavailable.push({chart:r,error:s})}return i},{available:[],unavailable:[]})};q.prototype._getDynamicScaleProp=function(){return{general:{enableScalingFactor:this.getEnableScalingFactor()}}};q.prototype._getEffectiveProperties=function(){var e={};if(this._bNeedToApplyDefaultProperties){e=jQuery.extend(true,e,this._getDefaultVizProperties());this._bNeedToApplyDefaultProperties=false}var t=this.getChartType();e=jQuery.extend(true,e,this._get100DonutProperty(t),this._oSemanticVizSettings.properties||{},this.getProperty("vizProperties"),this._getHostedVizProperties(),this._getPagingVizProperties(),this._getTimeProperties(),this._getValueAxisScaleSetting().property||{},this._getDynamicScaleProp(),S.getSemanticSettingsForCombination(this._semanticTuples,t));return e};q.prototype._get100DonutProperty=function(e){return{tooltip:{bodyMeasureValue:{type:e.indexOf("100_")===0?"percentage":"value"}}}};q.prototype._reset100DonutChartType=function(e){return e.indexOf("donut")>-1?"donut":e};q.prototype._setEffectiveScales=function(){var e=this._getVizFrame(),t=this.getProperty("vizScales"),i=this._getValueAxisScaleSetting(),r=(t||[]).filter(function(e){return e.feed==="color"});var a=w.extendScales(t,i.scale||[],this._oSemanticVizSettings.scales||[]);if(this._oSemanticVizSettings.replaceColorScales&&r.length===0){e.setVizScales(a,{replace:true})}else{e.setVizScales(a)}};q.prototype._usingDisplayNameForSemantics=function(e){var t=function(e){if(typeof e==="undefined"||e===null){return false}return true};if(e.plotArea&&e.plotArea.dataPointStyle&&e.plotArea.dataPointStyle.rules){var i=this._getContexts();if(i.length>0&&!i.hasOwnProperty("dataRequested")){var r=this.getVisibleDimensions(),a=e.plotArea.dataPointStyle.rules;for(var s=0;s<a.length;s++){var n=a[s].dataContext;if(n&&n.length!==0){var o=Object.keys(n);if(!t(a[s].displayName)&&o.length===1){var l=o[0];if(n[l].hasOwnProperty("equal")&&r.indexOf(l)!==-1){var h=this.getDimensionByName(l).getTextProperty();for(var u=0;u<i.length;u++){if(i[u].getProperty(l)===n[l].equal){var c=i[u].getProperty(h);if(!t(h)||!t(c)||typeof c==="object"||this.getDimensionByName(l).getDisplayText()===false){a[s].displayName=n[l].equal;break}else{a[s].displayName=c;break}}}}}}}}}};q.prototype._getCandidateColoringSetting=function(){if(!this._bColoringParsed&&this._semanticTuples){if(this._enableSemanticColoring()){this._bColoringParsed=true;this._oCandidateColoringSetting={};var e={},i=this.getColorings(),r=this.getActiveColoring();e.aMsr=this._normalizeDorM(this.getVisibleMeasures());var a=this._getDrillStateTop();var s=[],n;if(a.redundant){var s=Object.keys(a.redundant).filter(function(e){return e!=="measureNames"})}n=this._normalizeDorM(this.getVisibleDimensions().concat(s),true);e.aDim=n;e.aInResultDim=this._normalizeDorM(this.getInResultDimensions(),true);e.allMsr=this.getMeasures().map(function(e){return e.getName()});e.allDim=this.getDimensions().map(function(e){return e.getName()});if(i){try{const a=t.create({bundleName:"sap.chart.messages.messagebundle"});var o={bFiltered:this._bFilterCalledByCustomer};this._oCandidateColoringSetting=A.getCandidateSetting(i,r,this._semanticTuples,e,this._oColoringStatus||{},this._sAdapteredChartType||this.getChartType(),a,o)}catch(e){if(e instanceof x){e.display()}else{throw e}}}}else{this._oCandidateColoringSetting={}}}return this._oCandidateColoringSetting};q.prototype._hostedVizProperties={selectionMode:{prop:"interaction.selectability.mode"},selectionBehavior:{prop:"interaction.selectability.behavior"}};q.prototype._getHostedVizProperties=function(){return Object.keys(this._hostedVizProperties).reduce(function(e,t){var i=this._hostedVizProperties[t].prop.split(".").reverse().reduce(function(e,t){var i={};i[t]=e;return i},this.getProperty(t));return jQuery.extend(true,e,i)}.bind(this),{})};q.prototype._getDefaultVizProperties=function(){var e=this._sAdapteredChartType||this.getChartType();var t=e.indexOf("100_")===0;var i=e==="pie"||e.indexOf("donut")>-1;e="info/"+this._reset100DonutChartType(e);var r={interaction:{extraEventInfo:true}};return jQuery.extend(true,r,n({},e,["valueAxis.label.formatString","valueAxis2.label.formatString"],t?"":I.DefaultPattern.SHORTFLOAT),n({},e,["legend.formatString","sizeLegend.formatString"],I.DefaultPattern.SHORTFLOAT_MFD2),n({},e,["plotArea.dataLabel.formatString"],i?"":I.DefaultPattern.SHORTFLOAT_MFD2),n({},e,["tooltip.formatString"],t?"":I.DefaultPattern.STANDARDFLOAT));function a(e,t,i){if(t.length===0){return i}e=e||{};var r=e[t[0]];e[t[0]]=a(r,t.slice(1),i);return e}function s(e,t){if(e==null||t.length===0){return e}var i=e[t[0]];if(i&&i.children){return s(i.children,t.slice(1))}return i}function n(e,t,i,r){var n=sap.viz.api.metadata.Viz.get(t);if(n){var o=n.properties;i.forEach(function(t){t=t.split(".");var i=s(o,t);if(i&&i.hasOwnProperty("defaultValue")){a(e,t,r)}})}return e}};q.prototype._getPagingVizProperties=function(){if(this._isEnablePaging()){var e={interaction:{zoom:{enablement:false},selectability:{mode:"NONE"}},plotArea:{isFixedDataPointSize:true}};return e}else{return{}}};q.prototype._getTimeProperties=function(){var t=["year","month","day"];var i=null;var r=this;var a=this.getVisibleDimensions().filter(function(e){var t=r.getDimensionByName(e);return t instanceof u&&t._getFixedRole()==="category"})[0];var s="ISO";var n,o,l;if(a){var h=this.getDimensionByName(a);switch(h.getTimeUnit()){case F.yearmonthday:t=["year","month","day"];break;case F.yearquarter:t=["year","quarter"];break;case F.yearmonth:t=["year","month"];break;case F.yearweek:t=["year","week"];var c=e.getLanguageTag(),d=M.getInstance(c),l=c.region;n=d.getMinimalDaysInFirstWeek();o=d.getFirstDayOfWeek();o=o===0?7:o;s="Gregorian";break;case F.fiscalyear:t=["fiscal_year"];break;case F.fiscalyearperiod:t=["fiscal_period","fiscal_year"];break;default:}i=h.getFiscalYearPeriodCount()}var g=this.getProperty("vizProperties");if(g&&g.timeAxis){var p=g.timeAxis;if(p.levels){t=p.levels}if(p.fiscal&&p.fiscal.periodNumbers){i=p.fiscal.periodNumbers}}return{timeAxis:{levels:t,fiscal:{periodNumbers:i},levelConfig:{week:{type:s,minDays:n,firstDayOfWeek:o,region:l}}}}};q.prototype.setSelectionMode=function(e){this.setProperty("selectionMode",e);var t=this._getVizFrame();if(t){t.setVizProperties({interaction:{selectability:{mode:e}}})}return this};q.prototype.getSelectionMode=function(){var e=this._getVizFrame();if(e){return e.getVizProperties().interaction.selectability.mode}else{return this.getProperty("selectionMode")}};q.prototype.setSelectionBehavior=function(e){this.setProperty("selectionBehavior",e);var t=this._getVizFrame();if(t){t.setVizProperties({interaction:{selectability:{behavior:e}}})}return this};q.prototype.setEnableScalingFactor=function(e){this.setProperty("enableScalingFactor",e);this._invalidateBy({source:this,keys:{vizFrame:true}});return this};q.prototype.getScalingFactor=function(){var e=this._getVizFrame();if(e){var t=e._states()["dynamicScale"];if(t){var i=null;var r=["primaryValues","secondaryValues"];var a=[t.valueAxis,t.valueAxis2];for(var s=0;s<r.length;s++){var n=a[s];if(n&&(n.symbol||n.unit)){i=i||{};var o=r[s];i[o]={scalingFactor:n.symbol};if(n.unit){i[o]["unit"]=n.unit}}}return i}}return null};q.prototype.getSelectionBehavior=function(){var e=this._getVizFrame();if(e){return e.getVizProperties().interaction.selectability.behavior}else{return this.getProperty("selectionBehavior")}};q.prototype.getDimensionByName=function(e){return this.getDimensions().filter(function(t){return t.getName()===e})[0]};q.prototype.getMeasureByName=function(e){return this.getMeasures().filter(function(t){return t.getName()===e})[0]};q.prototype.getTimeDimensions=function(){return this.getDimensions().filter(function(e){return e instanceof u})};q.prototype._isEnablePaging=function(){this._bMobile=z.system.tablet&&!z.system.desktop||z.system.phone;var e=this.getModel();var t=sap.ui.require("sap/ui/model/json/JSONModel");var i=!(t&&e instanceof t)&&this.getEnablePagination()&&this._bIsPagingChartType&&!this._bMobile;return i};function Q(e){var t=e.getParameters();delete t.id;if(this._isEnablePaging()){this._getPagingController().vizFrameRenderCompleted()}this.fireEvent("renderComplete",t)}function K(e){var t=e.getParameters();delete t.id;this.fireEvent("_zoomDetected",t)}function X(e){var t=e.getParameters();delete t.id;var i=this._getDataset();t.data.forEach(function(e){e.context=i.findContext({_context_row_number:e.data._context_row_number})});this.fireEvent("_selectionDetails",t)}q.prototype._showLoading=function(e){var t=this.$();if(!t){return}if(!e){if(this._$loadingIndicator){this._$loadingIndicator.remove()}}else{if(!this._$loadingIndicator){this._$loadingIndicator=this._createLoadingIndicator()}this._updateLoadingIndicator();t.append(this._$loadingIndicator)}this._bLoading=e};q.prototype._createLoadingIndicator=function(){var e=jQuery(N.getElement());var t=jQuery("<p>").attr("class","loading-text").text("Loading");t.css({position:"absolute",transform:"translateY(-3em)",width:"100%","text-align":"center"});t.insertBefore(e.children()[0]);e.css({opacity:1});return e};q.prototype._updateLoadingIndicator=function(){var e=this.$();if(!e||!this._$loadingIndicator){return}var t=this._sAdapteredChartType,i=t==="bar"||t.indexOf("horizontal")!==-1;var r=e.find(".v-plot-bound"),a=e.offset(),s={top:a.top,left:a.left,width:e.width(),height:e.height()};if(r.length){var n=r.offset(),o=r[0].getBoundingClientRect();s.top=n.top-1;s.left=n.left;s.width=o.width+1;if(i){s.height=Math.ceil(o.height+1)}else{s.height=Math.floor(o.height+1)}}this._$loadingIndicator.css(s);var l=this._$loadingIndicator.find(".loading-text");l.css({top:s.height/2,"font-weight":B.get("sapUiChartTitleFontWeight"),"font-size":B.get("sapUiChartMainTitleFontSize"),color:B.get("sapUiChartMainTitleFontSize")});this._$loadingIndicator.css({"background-color":B.get("sapUiExtraLightBG")})};q.prototype._getRequiredDimensions=function(){var e=this._getVisibleDimensions(),t=this.getInResultDimensions();return this._normalizeDorM(e.concat(t),true)};q.prototype._getRequiredMeasures=function(){return this._getVisibleMeasures(true)};q.prototype.exportToSVGString=function(e){var t='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"/>',i=this._getVizFrame();if(i){t=i.exportToSVGString(e)}return t};q.prototype._getPagingController=function(){if(!this._pagingController){this._pagingController=new T(this)}return this._pagingController};return q});
/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/ChartLog", ["sap/base/Log"],function(t){"use strict";function e(t,e,s){this._type=t;this._name=e;this._message=s}e.prototype.display=function(){if(this._type==="error"){t.error("[Analytical Chart] "+this._name,this._message)}};return e});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/ChartType", ["sap/ui/base/DataType"],function(a){"use strict";var t={Bar:"bar",Column:"column",Line:"line",Combination:"combination",Pie:"pie",Donut:"donut",Scatter:"scatter",Bubble:"bubble",Heatmap:"heatmap",Bullet:"bullet",VerticalBullet:"vertical_bullet",StackedBar:"stacked_bar",StackedColumn:"stacked_column",StackedCombination:"stacked_combination",HorizontalStackedCombination:"horizontal_stacked_combination",DualBar:"dual_bar",DualColumn:"dual_column",DualLine:"dual_line",DualStackedBar:"dual_stacked_bar",DualStackedColumn:"dual_stacked_column",DualCombination:"dual_combination",DualHorizontalCombination:"dual_horizontal_combination",DualStackedCombination:"dual_stacked_combination",DualHorizontalStackedCombination:"dual_horizontal_stacked_combination",PercentageStackedBar:"100_stacked_bar",PercentageStackedColumn:"100_stacked_column",PercentageDualStackedBar:"100_dual_stacked_bar",PercentageDualStackedColumn:"100_dual_stacked_column",PercentageDonut:"100_donut",Waterfall:"waterfall",HorizontalWaterfall:"horizontal_waterfall"};a.registerEnum("sap.chart.ChartType",t);return t},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/ColoringType", ["sap/ui/base/DataType"],function(i){"use strict";var a={Criticality:"Criticality",Emphasis:"Emphasis",Gradation:"Gradation"};i.registerEnum("sap.chart.ColoringType",a);return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/ScaleBehavior", ["sap/ui/base/DataType"],function(e){"use strict";var a={AutoScale:"AutoScale",FixedScale:"FixedScale"};e.registerEnum("sap.chart.ScaleBehavior",a);return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/SeriesColorTracker", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";var r={color:true,color2:true};function e(){this._mSeriesColor={}}function t(r){var e=typeof r;if(e==="string"||r instanceof String){return'"'+r+'"'}else if(r===null||r===undefined){return e}else if(Array.isArray(r)){return"["+r.map(t).join(",")+"]"}else if(e==="object"){return"{"+Object.keys(r).map(function(e){return'"'+e+'":'+t(r[e])}).join(",")+"}"}else if(e==="number"||e==="boolean"){return String(r)}else{return e+"<"+String(r)+">"}}function i(r,e){var t;for(var i=0;i<r.length;++i){var n=r[i];if(n.fields.length===e.length){var s=true;for(var o=0;s&&o<e.length;++o){s=e[o]===n.fields[o]}if(s){t=n}}}if(!t){t={fields:e.slice(),results:{}};r.push(t)}return t}e.prototype.add=function(e){var n=this._mSeriesColor,s;if(e){e.forEach(function(e){var o=e.feed;if(!r[o]){return}s=n[o];if(!s){s=[];n[o]=s}var f=i(s,e.fields);var a=f.results;e.results.forEach(function(r){var e=t(r.dataContext);if(!a[e]){a[e]=r}})})}};e.prototype.get=function(){var r=Object.keys(this._mSeriesColor);var e=this._mSeriesColor;var t=[];for(var i=0;i<r.length;++i){var n=e[r[i]];var s={feed:r[i],mappings:[]};for(var o=0;o<n.length;++o){var f=[];var a=n[o].results;var u=Object.keys(a);for(var l=0;l<u.length;++l){f.push(a[u[l]])}s.mappings.push({results:f,fields:n[o].fields})}t.push(s)}return t};e.prototype.clear=function(){this._mSeriesColor={}};return e});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/TimeUnitType", ["sap/ui/base/DataType"],function(e){"use strict";var a={Date:"Date",yearmonthday:"yearmonthday",yearquarter:"yearquarter",yearmonth:"yearmonth",yearweek:"yearweek",fiscalyear:"fiscalyear",fiscalyearperiod:"fiscalyearperiod"};e.registerEnum("sap.chart.TimeUnitType",a);return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/ColorPalette", [],function(){"use strict";var a={};a.CRITICALITY={Positive:["sapUiChartPaletteSemanticGoodLight3","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGoodLight1","sapUiChartPaletteSemanticGood","sapUiChartPaletteSemanticGoodDark1","sapUiChartPaletteSemanticGoodDark2"],Critical:["sapUiChartPaletteSemanticCriticalLight3","sapUiChartPaletteSemanticCriticalLight2","sapUiChartPaletteSemanticCriticalLight1","sapUiChartPaletteSemanticCritical","sapUiChartPaletteSemanticCriticalDark1","sapUiChartPaletteSemanticCriticalDark2"],Negative:["sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBadDark2"],Neutral:["sapUiChartPaletteSemanticNeutralLight3","sapUiChartPaletteSemanticNeutralLight2","sapUiChartPaletteSemanticNeutralLight1","sapUiChartPaletteSemanticNeutral","sapUiChartPaletteSemanticNeutralDark1","sapUiChartPaletteSemanticNeutralDark2"]};a.EMPHASIS={Highlight:"sapUiChartPaletteQualitativeHue2",Others:"sapUiChartPaletteQualitativeHue1"};a.GRADATION={SingleColorScheme:{NoSemantics:["sapUiChartPaletteSemanticNeutralLight3","sapUiChartPaletteSemanticNeutralLight2","sapUiChartPaletteSemanticNeutralLight1","sapUiChartPaletteSemanticNeutral","sapUiChartPaletteSemanticNeutralDark1","sapUiChartPaletteSemanticNeutralDark2"],Positive:["sapUiChartPaletteSemanticGoodLight3","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGoodLight1","sapUiChartPaletteSemanticGood","sapUiChartPaletteSemanticGoodDark1","sapUiChartPaletteSemanticGoodDark2"],Negative:["sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBadDark2"]},DivergingColorScheme:{NoSemantics:["sapUiChartPaletteNoSemDiv1Dark2","sapUiChartPaletteNoSemDiv1Dark1","sapUiChartPaletteNoSemDiv1","sapUiChartPaletteNoSemDiv1Light1","sapUiChartPaletteNoSemDiv1Light2","sapUiChartPaletteNoSemDiv1Light3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSequentialHue6Light3","sapUiChartPaletteSequentialHue6Light2","sapUiChartPaletteSequentialHue6Light1","sapUiChartPaletteSequentialHue6","sapUiChartPaletteSequentialHue6Dark1","sapUiChartPaletteSequentialHue6Dark2"],PositiveToNegative:["sapUiChartPaletteSemanticGoodDark2","sapUiChartPaletteSemanticGoodDark1","sapUiChartPaletteSemanticGood","sapUiChartPaletteSemanticGoodLight1","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGoodLight3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBadDark2"],NegativeToPositive:["sapUiChartPaletteSemanticBadDark2","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSemanticGoodLight3","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGoodLight1","sapUiChartPaletteSemanticGood","sapUiChartPaletteSemanticGoodDark1","sapUiChartPaletteSemanticGoodDark2"],ColdToHot:["sapUiChartPaletteSequentialHue1Dark2","sapUiChartPaletteSequentialHue1Dark1","sapUiChartPaletteSequentialHue1","sapUiChartPaletteSequentialHue1Light1","sapUiChartPaletteSequentialHue1Light2","sapUiChartPaletteSequentialHue1Light3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBadDark2"],HotToCold:["sapUiChartPaletteSemanticBadDark2","sapUiChartPaletteSemanticBadDark1","sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadLight1","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticBadLight3","sapUiChartPaletteSequentialNeutral","sapUiChartPaletteSequentialHue1Light3","sapUiChartPaletteSequentialHue1Light2","sapUiChartPaletteSequentialHue1Light1","sapUiChartPaletteSequentialHue1","sapUiChartPaletteSequentialHue1Dark1","sapUiChartPaletteSequentialHue1Dark2"]},TargetColorScheme:{PositiveTarget:["sapUiChartPaletteSemanticBad","sapUiChartPaletteSemanticBadLight2","sapUiChartPaletteSemanticCriticalLight1","sapUiChartPaletteSemanticCriticalLight3","sapUiChartPaletteSemanticGoodLight2","sapUiChartPaletteSemanticGood"]}};return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/ColoringUtils", ["sap/chart/ChartLog","sap/chart/data/TimeDimension"],function(e,r){"use strict";var n={};n.find=function(e,r){for(var n=0;n<r.length;n++){if(e===r[n].getName()){return r[n]}}return null};n.isNumber=function(){for(var e=0;e<arguments.length;e++){if(typeof arguments[e]!=="number"){return false}}return true};n.thresholdValue=function(e){e=e.filter(function(r){return e!=null});var r=e.map(function(e){return typeof e==="string"||e instanceof String});return function(n,i){for(var t=0;t<e.length;t++){var o;if(r[t]){if(n[e[t]]!=null){o=n[e[t]]}else{o=i[e[t]]}}else{o=e[t]}if(o!=null){return o}}}};n.isInRange=function(e,r,i,t,o){if(!n.isNumber(e,r,i)){return false}var a=t?r<=e:r<e;var s=o?e<=i:e<i;return a&&s};n.assignColor=function(e,r){switch(r){case 1:return[e[3]];case 2:return[e[1],e[3]];case 3:return[e[1],e[3],e[5]];case 4:return e.slice(1,5);case 5:return e.slice(1,6);case 6:return e.slice(0,6);default:return null}};n.assignUnmentionedColor=function(e,r){switch(r){case 1:return[e[1]];case 2:return[e[1],e[5]];case 3:return[e[1],e[2],e[4]];case 4:return[e[1],e[2],e[4],e[5]];case 5:return e.filter(function(e){return e!==3});default:return null}};n.dimOrMsrUse=function(r,n,i,t){var o=Object.keys(r).filter(function(e){return i.indexOf(e)>-1});if(n.dimension&&n.measure){throw new e("error","activeColoring",'Either "dimension" or "measure" can be set in activeColoring.parameters, but not both of them.')}else if(n.measure){if(t==="Gradation"){if(Array.isArray(n.measure)&&n.measure.length>1){o="DelineatedMeasures"}else{o="RankedMeasureValues"}}else{o="MeasureValues"}}else if(n.dimension){o=t==="Gradation"?"DelineatedDimensionValues":"DimensionValues"}else if(o.length>1){throw new e("error","colorings."+t,'"'+o.join('" and "')+'" all exist in '+t+", please resolve by activeColoring property.")}else if(o.length===1){o=o[0]}return o};var i=function(r,n,i,t,o){r.forEach(function(r){if(n.indexOf(r)<0){throw new e("error",i,t+r+o)}})};var t=function(e,r){var n=r.map(function(e){return e.getName()});i(e,n,"activeColoring.parameters.measure","Active measure, ",", should be visible.")};var o=function(e,r){var n=r.map(function(e){return e.getName()});i(e,n,"activeColoring.parameters.dimension","Active dimension, ",", should be visible.")};var a=function(e,r){var n=Object.keys(r);i(e,n,"activeColoring.parameters.measure","Active measure, ",", should be configured in coloring.")};var s=function(e,r){var n=Object.keys(r);i(e,n,"activeColoring.parameters.dimension","Active dimension, ",", should be configured in coloring.")};var u=function(r){if(r.length>1){throw new e("error","activeColoring.parameters.dimension","Multiple dimensions are defined. Please resolve by activeColoring property.")}};var l=function(i,t,o,a){var s=n.find(i,t);if(s instanceof r&&s.getRole()==="category"){throw new e("error","Colorings."+o+"."+a,"Do not support coloring on timeDimension, "+s.getName()+".")}};var c=function(r){if(r.bMBC){throw new e("error","Colorings","Heatmap only support Criticality.MeasureValues.ConstantThresholds or Gradation.RankedMeasureValues.")}};var f=function(r,n){if(!n.bWaterfall&&(n.bShowUnmentionedMsr&&r.aMsr.length>1||n.bHasOtherSeriesDim||n.bIsPie&&r.aDim.length>1)){throw new e("error","Colorings."+n.type+"."+n.subType,"Semantic coloring could not be applied if chart already has coloring.")}};n.checkColoringDimension=function(e,r,n,i){var t=r.aDim;o(e,t);s(e,n);u(e);l(e[0],t,i.type,i.subType);c(i);f(r,i)};n.checkColoringMeasure=function(e,r,n){t(e,r);a(e,n)};n.hasSeriesDim=function(e){return e.aDim.some(function(e){return e._getFixedRole()==="series"})};n.hasOtherSeriesDim=function(e,r){return r.aDim.some(function(r){return r._getFixedRole()==="series"&&r.getName()!==e})};n.hasDuplicatedValues=function(e){var r=false,n={};e.forEach(function(e){if(n[e]){r=true}else{n[e]=true}});return r};n.notIn=i;return n});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/Colorings", ["sap/chart/coloring/criticality/Criticality","sap/chart/coloring/emphasis/Emphasis","sap/chart/coloring/gradation/Gradation","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,i,t,r,jQuery){"use strict";var n=["Criticality","Emphasis","Gradation"];function a(e,i,t){var a=t.aInResultDim,o=i.coloring||null;if(a&&a.length){throw new r("error","","Semantic coloring could not be applied if inResult Dimensions exist.")}if(!i||!i.coloring){throw new r("error","activeColoring","The activeColoring is mandatory.")}if(n.indexOf(o)<0){throw new r("error","activeColoring","The active coloring type, "+o+", is not supported.")}else if(Object.keys(e).indexOf(o)<0){throw new r("error","activeColoring","The active coloring type, "+o+", should be configured in Coloring.")}}function o(e){if(e.length<=1){return false}if(e.length>2){return true}var i,t,r=false;e.forEach(function(e){var n=e.getSemantics();if(n==="actual"&&!i){i=e}else if(n==="reference"&&!t){t=e}else{r=true}});r=r||i&&t&&i.getSemanticallyRelatedMeasures()!==t.getName();return r}return{getCandidateSetting:function(r,n,l,s,c,f,u,d){a(r,n||{},s);var g,h={},p={Criticality:e,Emphasis:i,Gradation:t};g=p[n.coloring];h.bMBC=f==="heatmap";h.bShowUnmentionedMsr=!(f&&f.indexOf("scatter")>-1||f&&f.indexOf("bubble")>-1);h.bIsScatter=f&&f.indexOf("scatter")>-1||f&&f.indexOf("bubble")>-1;h.bIsPie=f&&(f==="pie"||f.indexOf("donut")>-1);h.bWaterfall=f&&f.indexOf("waterfall")>-1;h.bTimeChart=f&&f.indexOf("timeseries")>-1;h.bIsLine=f&&f.indexOf("line")>-1;jQuery.extend(true,h,d);if(f==="timeseries_bullet"&&o(s.aMsr)){return{}}if(g){var b=g.getCandidateSetting(r,n,l,s,c,h,u);b.type=n.coloring;return b}else{return{}}}}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/CriticalityType", ["sap/ui/base/DataType"],function(i){"use strict";var e={Negative:"Negative",Critical:"Critical",Positive:"Positive",Neutral:"Neutral"};i.registerEnum("sap.chart.coloring.CriticalityType",e);return e},true);
/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/Criticality", ["sap/chart/coloring/criticality/measureValues/MeasureValues","sap/chart/coloring/criticality/DimensionValues","sap/chart/coloring/ColoringUtils","sap/chart/coloring/ColorPalette","sap/chart/coloring/CriticalityType","sap/chart/data/MeasureSemantics","sap/ui/thirdparty/jquery"],function(e,t,i,a,r,n,jQuery){"use strict";var s=["DimensionValues","MeasureValues"];var l=[r.Positive,r.Neutral,r.Critical,r.Negative,"Unmentioned"];var o=[r.Positive,r.Critical,r.Negative,r.Neutral];function u(e,t){var r=[];t.forEach(function(t){e.forEach(function(e){if(e.chartLog){throw e.chartLog}var n=e.parsed.callbacks[t]||[];n.forEach(function(s,l){var o,u;if(t==="Unmentioned"){o=i.assignUnmentionedColor(a.CRITICALITY.Neutral,n.length);u=e.parsed.legend[l]}else{o=i.assignColor(a.CRITICALITY[t],n.length);var c=e.parsed.legend[t];u=Array.isArray(c)?c[l]:c}var d={callback:s,properties:{color:o[l]},displayName:u};r.push(d)})})});return r}function c(e){var t=e[0];var r=t.parsed.legend;var n=[],s=[];var l=r.segments[0].upperBound>r.min;var o=r.segments.length<2||r.segments[r.segments.length-2].upperBound<r.max;r.segments.forEach(function(e){var t=i.assignColor(a.CRITICALITY[e.CriticalityType],1)[0];n.push(t);s.push(e.upperBound)});if(l){s=[r.min].concat(s)}else{n.splice(0,1)}if(o){s[s.length-1]=r.max}else{n.splice(n.length-1,1);s.splice(s.length-1,1)}var u=n.length;if(n.length===1){n=[n[0],n[0]];u=2}else if(n.length===0){return null}return{feed:"color",palette:n,numOfSegments:u,legendValues:s}}function d(e){var t;if(e&&e.legendTitle){t={title:{text:e.legendTitle,visible:true}}}return t}function f(e,t){return function(){var i,a;if(e.bMBC){i=c(e)}else{var r=u(e,t);a={plotArea:{dataPointStyle:{rules:r}},legend:d(e)}}return{colorScale:i,properties:a}}}function g(e,t){var i=[n.Actual,n.Projected,n.Reference];var a=[r.Positive,r.Neutral,r.Critical,r.Negative];var s=[];var l=[];var o=false;e.forEach(function(e){var a=false;var r=[];e.order=[];if(e.criticalityType){o=true}i.forEach(function(i){if(e[i]){var n=t.filter(function(t){return e[i]===t.msr.getName()})[0];if(n){a=true;e.order.push(i)}else{r.push(i)}}});e.order=e.order.concat(r);if(a){s.push(e)}else{l.push(e)}});if(o){s.sort(function(e,t){return a.indexOf(e.criticalityType)-a.indexOf(t.criticalityType)})}e.splice(0,e.length);e.push.apply(e,s.concat(l))}return{getCandidateSetting:function(a,r,n,u,c,d,p){var h=a.Criticality||{},v=r.parameters||{};var m=i.dimOrMsrUse(h,v,s,"Criticality");var y={additionalMeasures:[],additionalDimensions:[]};var C=d.bMBC,T,M,V;switch(m){case"DimensionValues":var b=v.dimension||Object.keys(h.DimensionValues);if(typeof b==="string"||b instanceof String){b=[b]}T=t.qualify(h.DimensionValues,b,u,d);if(T){y.qualifiedSettings=T;T.parsed=t.parse(T,u.aDim,c,p,d);y.contextHandler=t.getContextHandler(T,p,d);y.ruleGenerator=f([T],o)}break;case"MeasureValues":var x=v.measure||Object.keys(h.MeasureValues);if(typeof x==="string"||x instanceof String){x=[x]}T=e.qualify(h.MeasureValues,n,x,u,c,d);if(T.sMethod){jQuery.each(T,function(t,i){M=e.parse(i,u,c,d,p);jQuery.each(M.additionalMeasures,function(e,t){y.additionalMeasures.push(t)});jQuery.each(M.additionalDimensions,function(e,t){y.additionalDimensions.push(t)});i.parsed=M;if(i.settings.Legend&&i.settings.Legend.Title){T.legendTitle=i.settings.Legend.Title}});V=T.sMethod;y.contextHandler=e.getContextHandler(V,T,C,p);y.qualifiedSettings=T;y.ruleGenerator=f(T,l);T.bMBC=C;g(n,T)}break;default:return{}}if(T.length){y.subType=m}return y},getLegendProps:d}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/DimensionValues", ["sap/chart/coloring/ColoringUtils","sap/chart/ChartLog","sap/chart/data/TimeDimension","sap/chart/coloring/CriticalityType","sap/ui/thirdparty/jquery"],function(e,i,r,a,jQuery){"use strict";var t={};var n=function(r,a,t,n){var s=jQuery.extend({},n);s.bHasOtherSeriesDim=e.hasOtherSeriesDim(a[0],t);s.type="Criticality";s.subType="DimensionValues";e.checkColoringDimension(a,t,r,s);var l=r[a[0]],o=Object.keys(l),u=e.find(a[0],t.aDim),c=u.getRole()==="series"?true:false;o.forEach(function(e){var r=l[e].Values,a=l[e].Legend;r=Array.isArray(r)?r:[r];if(r.length>1&&!a){throw new i("error","Colorings.Criticality.DimensionValues","Legend is mandatory when one criticality type has multiple values.")}if((c||n.bIsPie)&&r.length>1){throw new i("error","Colorings.Criticality.DimensionValues","Criticality on Series Dimension, only single value could be assigned to each CriticalityType.")}})};t.qualify=function(e,i,r,a){n(e,i,r,a);var t=i[0],s;if(t){s={dim:t,setting:e}}return s};t.parse=function(e,i,r,t,n){var s={},l={},o=e.dim,u=[],c=e.setting[o],y=[];jQuery.each(c,function(e,i){var r=!Array.isArray(i)?[i]:i;if(e!==a.Neutral){s[e]=r.map(function(e){return Array.isArray(e.Values)?e.Values:[e.Values]});u=Array.prototype.concat.apply(u,s[e])}l[e]=r.map(function(e){var i=Array.isArray(e.Values)?e.Values[0]:e.Values;var r=e.Legend!=null?e.Legend:i;return r})});if(c.Neutral){y=Array.isArray(c.Neutral.Values)?c.Neutral.Values:[c.Neutral.Values]}var g=function(e){return u.indexOf(e[o])===-1};function f(e){return function(i){return e.indexOf(i[o])!==-1}}var p={Negative:(s.Negative||[]).map(f),Critical:(s.Critical||[]).map(f),Positive:(s.Positive||[]).map(f),Neutral:[g]};return{callbacks:p,legend:l,aCriticalityValues:u.concat(y),status:r}};t.getContextHandler=function(e,r,a){var t=e.dim,n=e.parsed.aCriticalityValues;return function(s){var l=s.getProperty(t),o=this.getDimensionByName(t);if(n.indexOf(l)===-1){if(o._getFixedRole()==="series"||a.bIsPie){var u=new i("error","Colorings.Criticality.DimensionValues","Criticality on Series Dimension, all series must be applied coloring.");e.chartLog=u}else{e.parsed.legend.Neutral=r.getText("COLORING_TYPE_OTHER")}}}};return t});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/measureValues/MeasureUtils", ["sap/chart/coloring/ColoringUtils","sap/chart/coloring/criticality/measureValues/ThresholdsUtils","sap/chart/ChartLog","sap/chart/coloring/CriticalityType","sap/chart/data/MeasureSemantics","sap/ui/thirdparty/jquery"],function(e,t,a,r,i,jQuery){"use strict";var n={Static:{},Calculated:{},DynamicThresholds:{},ConstantThresholds:{},Unmentioned:{}};var l=["Maximize","Minimize","Target"];n.Static.validate=function(e,t,r,n,l){var s=e[t].Static;var o=function(e,r){if(g[r]===t){c=true;if(g.staticType){if(g.staticType!==s){var n="";Object.keys(i).forEach(function(e,t,a){var r=i[e];if(g[r]){if(t!==a.length-1){n+=g[r]+", "}else{n+=g[r]}}});throw new a("error","Colorings.Criticality.Static","When "+n+" have semantic relationship, they must use the same Criticality type.")}}else{g.staticType=s;if(l[s]){throw new a("error","Colorings.Criticality.Static","Measures, "+l[s]+" and "+t+", which use Static Criticality must have different types.")}else{l[s]=t}}return false}};var c=false;for(var u=0;u<n.length;++u){var g=n[u];jQuery.each(i,o);if(c){break}}return{supportMultiMsr:true}};n.Static.parse=function(e,t,a){var r=e.msr?e.msr.getName():undefined;var i=e.settings[e.type];a.callbacks=n.Static.getCallbacks(i,r);var l=e.msr.getLabel()||e.msr.getName();var s=e.settings.Legend||{};a.legend[i]=s[i]!=null?s[i]:l};n.Static.getCallbacks=function(e,t){var a={};a[e]=[function(e){return e.hasOwnProperty(t)}];return a};n.Calculated.validate=function(e,t,r){var i=e[t].Calculated;var n=r.allDim.filter(function(e){return e===i})[0];var l=r.allMsr.filter(function(e){return e===i})[0];if(n){e[t].type="dimension"}else if(l){e[t].type="measure";if(r.aMsr.find(function(e){return e.getName()===l})){throw new a("error","Colorings.Criticality.Calculated","Calculated property, "+i+", could not be available measure.")}}if(!e[t].type){throw new a("error","Colorings.Criticality.Calculated","Calculated property, "+i+", does not exist in data model.")}};n.Calculated.parse=function(t,a,r,i,l){var s=t.settings[t.type];var o=t.settings.type;if(o==="dimension"&&!e.find(s,a.aDims)){r.additionalDimensions.push(s)}else if(o==="measure"){if(!a.aMsrs.find(function(e){return e.getName()===s})){r.additionalMeasures.push(s)}a.oStatus.legend=n.getLegend(t,l)}r.status=a.oStatus};n.Calculated.getCallbacks=function(e,t,a){var r=function(r){return(r[e]===t||n.Calculated.getCriticalityType(r[e])===t)&&r.hasOwnProperty(a)};return[r]};n.Calculated.getContextHandler=function(e,t,a){var i=e[0];var l=i.settings[i.type];var s=i.settings.type;delete i.settings.type;delete i.parsed.status.callbacks;return function(t){var o=i.parsed.status;o.legend=o.legend||{};o.callbacks=o.callbacks||{};i.parsed.legend=o.legend;i.parsed.callbacks=o.callbacks;var c=t.getProperty(l);if(s==="measure"){c=n.Calculated.getCriticalityType(c)}if(r[c]){if(s==="dimension"){var u=this.getDimensionByName(l);var g=this.getDimensionByName(l).getDisplayText();e.legendTitle=e.legendTitle||u.getLabel();var d=u.getTextProperty();if(d&&g){var h=t.getProperty(d);i.parsed.legend[c]=h}else if(c){i.parsed.legend[c]=a.getText("COLORING_TYPE_"+c.toUpperCase())}}var v=i.msr.getName();var m=n.Calculated.getCallbacks(l,c,v);i.parsed.callbacks[c]=m}}};n.Calculated.getCriticalityType=function(e){var t;switch(e){case 0:t=r.Neutral;break;case 1:t=r.Negative;break;case 2:t=r.Critical;break;case 3:t=r.Positive;break;default:t=undefined;break}return t};n.DynamicThresholds.validate=function(t,r,i){var n=i.allMsr;var s=[],o=t[r].DynamicThresholds,c;if(l.indexOf(o.ImprovementDirection)>-1){c=o.ImprovementDirection}else{throw new a("error","Colorings.Criticality.DynamicThresholds","ImprovementDirection should be one of 'Maximize', 'Minimize' and 'Target'.")}var u=[o.ToleranceRangeLowValue,o.DeviationRangeLowValue,o.AcceptanceRangeLowValue];var g=[o.ToleranceRangeHighValue,o.DeviationRangeHighValue,o.AcceptanceRangeHighValue];switch(c){case"Maximize":s=u;break;case"Minimize":s=g;break;case"Target":s=u.concat(g);break;default:}if(e.isNumber.apply(null,s)){throw new a("error","Colorings.Criticality.DynamicThresholds","Invalid Thresholds settings.")}s=s.filter(function(e){return typeof e=="string"});e.notIn(s,n,"Colorings.Criticality.DynamicThresholds","Thresholds measure, ",", does not exist in data model.")};n.DynamicThresholds.parse=function(e,a,r,i,l){var s=e.settings[e.type];var o=e.msr?e.msr.getName():undefined;var c=s.ImprovementDirection.toLowerCase();var u={lo:s.ToleranceRangeLowValue,hi:s.ToleranceRangeHighValue};var g={lo:s.DeviationRangeLowValue,hi:s.DeviationRangeHighValue};var d={lo:s.AcceptanceRangeLowValue,hi:s.AcceptanceRangeHighValue};t.fillOmit(d,u,g);r.additionalMeasures=[d.lo,d.hi,u.lo,u.hi,g.lo,g.hi].filter(function(e){return typeof e==="string"&&a.aMsrs.filter(function(t){return t.getName()===e}).length==0});r.callbacks=t.improvement(c,o,d,u,g);r.legend=n.getLegend(e,l)};n.DynamicThresholds.getContextHandler=function(e,a,r){var i=e[0],n=i.settings[i.type],l=n.ImprovementDirection.toLowerCase();function s(e,t){var a;if(typeof t==="number"){a=t}else{a=t?e.getProperty(t):null;if(typeof a==="string"){a=Number.parseFloat(a)}}return a}return function(e){var a={};a.lo=s(e,n.ToleranceRangeLowValue);a.hi=s(e,n.ToleranceRangeHighValue);var r={};r.lo=s(e,n.DeviationRangeLowValue);r.hi=s(e,n.DeviationRangeHighValue);var i={};i.lo=s(e,n.AcceptanceRangeLowValue);i.hi=s(e,n.AcceptanceRangeHighValue);t.fillOmit(i,a,r);t.checkThreshold(l,i,a,r)}};n.ConstantThresholds.validate=function(e,t){var r=e[t].ConstantThresholds;if(l.indexOf(r.ImprovementDirection)===-1){throw new a("error","Colorings.Criticality.ConstantThresholds","ImprovementDirection should be one of 'Maximize', 'Minimize' and 'Target'.")}return{supportHeatMap:true}};n.ConstantThresholds.parse=function(e,a,r,i,l){var s=e.settings[e.type];var o=e.msr?e.msr.getName():undefined;var c=e.msr?e.msr.getLabel()||e.msr.getName():undefined;var u=s.ImprovementDirection.toLowerCase();var g={lo:e.byAggregation.ToleranceRangeLowValue,hi:e.byAggregation.ToleranceRangeHighValue};var d={lo:e.byAggregation.DeviationRangeLowValue,hi:e.byAggregation.DeviationRangeHighValue};var h={lo:e.byAggregation.AcceptanceRangeLowValue,hi:e.byAggregation.AcceptanceRangeHighValue};t.fillOmit(h,g,d);t.checkThreshold(u,h,g,d,true);if(i){r.legend=t.MBCimprovement(u,h,g,d)}else{r.callbacks=t.improvement(u,o,h,g,d);r.legend=n.ConstantThresholds.getLegend(u,c,h,g,d,l)}};var s="";var o="<";var c="";var u=">";var g={"<":">",">":"<","":"","":""};n.ConstantThresholds.getLegend=function(t,a,r,i,n,l){var d={};var h=n.hi;var v=n.lo;var m=i.hi;var f=i.lo;var p=r.hi;var y=r.lo;function T(t,a,r){var i=t.length;var n=t[0]===Number.POSITIVE_INFINITY;var s=t[0]===Number.NEGATIVE_INFINITY;var o=t[i-1]===Number.POSITIVE_INFINITY;var c=t[i-1]===Number.NEGATIVE_INFINITY;if(r&&t[0]===t[i-1]){return""}if(a){if(i===5&&!(s&&o)){if(o||c){t=t.slice(0,3)}if(n||s){t=t.slice(2)}if(t.length<=1){return""}}else if(i===3&&(n||s||o||c)){return""}}t=t.map(function(e){if(e===Number.POSITIVE_INFINITY){return l.getText("POSITIVE_INFINITY")}else if(e===Number.NEGATIVE_INFINITY){return l.getText("NEGATIVE_INFINITY")}return e});if(t.length===3&&e.isNumber(t[0])){var u=g[t[1]];t=[t[2],u,t[0]]}return t.join(" ")}var C=function(e){return e&&e.length>0};var N=function(e){return e.filter(C).join(" , ")};switch(t){case"maximize":d={Positive:T([a,s,y]),Critical:T([v,c,a,o,f],true),Neutral:T([f,c,a,o,y],true),Negative:T([a,o,v])};break;case"minimize":d={Positive:T([a,c,p]),Critical:T([m,o,a,c,h],true),Neutral:T([p,o,a,c,m],true),Negative:T([a,u,h])};break;case"target":d={Positive:T([y,c,a,c,p],true),Critical:N([T([v,c,a,o,f],true,true),T([m,o,a,c,h],true,true)]),Neutral:N([T([f,c,a,o,y],true,true),T([p,o,a,c,m],true,true)]),Negative:N([T([a,o,v],true),T([a,u,h],true)])};break;default:}return d};n.ConstantThresholds.getContextHandler=function(e,t){if(t){var a=e[0];var r=a.msr.getName();var i=a.parsed.legend;return function(e){var t=e.getProperty(r);i.min=Math.min(i.min,t);i.max=Math.max(i.max,t)}}else{return null}};n.getLegend=function(e,t){var a={};jQuery.each(r,function(e,r){a[r]=t.getText("COLORING_TYPE_"+r.toUpperCase())});return jQuery.extend(true,{},a,e.settings.Legend)};return n});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/measureValues/MeasureValues", ["sap/chart/coloring/ColoringUtils","sap/chart/coloring/ColorPalette","sap/chart/coloring/criticality/measureValues/MeasureUtils","sap/chart/ChartLog","sap/chart/data/MeasureSemantics","sap/ui/thirdparty/jquery"],function(e,t,r,i,a,jQuery){"use strict";var n={};var s=["Static","Calculated","DynamicThresholds","ConstantThresholds"];function o(e,t,a,n,s,o,l,u){var c={supportMultiMsr:false,supportHeatMap:false};var h=s.length>1;if(r[e].validate){jQuery.extend(c,r[e].validate(o,a,n,t,u))}if(h&&!c.supportMultiMsr){throw new i("error","Colorings.Criticality","Only support multiple active measures when using Static Criticality.")}if(l.bMBC&&!c.supportHeatMap){throw new i("error","Colorings","Heatmap only support Criticality.MeasureValues.ConstantThresholds.")}}var l=function(t,r,a,n,l){var c=a.aMsr;e.checkColoringMeasure(n,c,t);var h=[];n.forEach(function(e,c){var f=Object.keys(t[e]).filter(function(e){return s.indexOf(e)>-1}).sort();var g=u(f);if(f.length>1&&!g){throw new i("error","Colorings.Criticality.MeasureValues",'The combination of "DynamicThresholds"and "ConstantThresholds" or only one of "Static", "Calculated", "DynamicThresholds", or "ConstantThresholds" can be applied to the measure, '+e+".")}if(!g&&f.length===1){o(f[0],r,e,a,n,t,l,h)}});if(e.hasSeriesDim(a)||l.bTimeChart&&l.bWaterfall&&a.aDim.length>1||l.bIsPie&&a.aDim.length){throw new i("error","colorings.Criticality.MeasureValues","Semantic coloring could not be applied if chart already has coloring.")}};function u(e){return e.length===2&&e[0]=="ConstantThresholds"&&e[1]==="DynamicThresholds"}function c(e,t){var r=e.filter(function(e){return e.msr.getName()===t})[0];return r}function h(e,t,r){if(e.sMethod==="Static"){var i=[];t.forEach(function(t){jQuery.each(a,function(n,s){var o=t[s];if(o){var l=c(e,t[s]);if(!l){jQuery.each(a,function(a,n){if(s!==n){var l=c(e,t[n]);if(l){var u=r.filter(function(e){return e.getName()===o})[0];var h={msr:u,settings:{Static:l.settings.Static},type:"Static"};i.push(h)}}})}else{t.criticalityType=l.settings.Static}}})});e.push.apply(e,i)}}n.qualify=function(t,r,n,s,c,f){l(t,r,s,n,f);var g=[],d=[],m=s.aDim.map(function(e){return e.getName()}).sort();jQuery.each(t,function(a,l){var c=Object.keys(l);var h=e.find(a,s.aMsr);var p=c.filter(function(e){return e!=="Legend"}).sort();if(n.length&&n.indexOf(a)===-1){return}var v=false,C;for(var y=0;y<p.length&&!v;y++){C=p[y];g.sMethod=C;if(C==="ConstantThresholds"){var M=null,b=null;for(var w=0;w<l[C].AggregationLevels.length;w++){if(l[C].AggregationLevels[w].VisibleDimensions){var T=l[C].AggregationLevels[w].VisibleDimensions.sort();if(T.join(",")===m.join(",")){M=l[C].AggregationLevels[w]}}else{b=l[C].AggregationLevels[w]}}M=M||b;if(M){v=true;if(!f.bFiltered){g.push({type:C,msr:h,settings:l,byAggregation:M});d.push(h.getName())}}}else{v=true;g.push({type:C,msr:h,settings:l});d.push(h.getName())}}if(!v){throw new i("error","Colorings.Criticality.MeasureValues.ConstantThresholds","No aggregation levels matched with current visible dimensions.")}if(u(p)){o(C,r,h.getName(),s,n,t,f)}});h(g,r,s.aMsr);if(g.length){var p=0;r.forEach(function(e){var t=false;jQuery.each(a,function(r,i){if(d.indexOf(e[i])>-1){t=true;return false}});if(!t){e.iUnMentionedIndex=p++}});if(p>3){throw new i("error","Colorings.Criticality.MeasureValues","Too many unmentioned measures (the maximum number is 3).")}}g.bShowUnmentionedMsr=f.bShowUnmentionedMsr;return g};n.parse=function(e,t,i,a,n){var s=a.bMBC,o={aMsrs:t.aMsr,aDims:t.aDim,oStatus:i},l={msr:e.msr,callbacks:{},additionalDimensions:[],additionalMeasures:[],legend:{}};r[e.type].parse(e,o,l,s,n);return l};n.getContextHandler=function(e,t,i,a){if(r[e].getContextHandler){return r[e].getContextHandler(t,i,a)}else{return null}};return n});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/criticality/measureValues/ThresholdsUtils", ["sap/chart/coloring/ColoringUtils","sap/chart/coloring/CriticalityType","sap/chart/ChartLog"],function(r,e,i){"use strict";var n={};var a={formulas:{}};var t=e.Negative;var u=e.Critical;var l=e.Positive;var o=e.Neutral;function I(r,e,i){return{upperBound:r,CriticalityType:e}}n.fillOmit=function(r,e,i){i.hi=i.hi==undefined?Number.POSITIVE_INFINITY:i.hi;i.lo=i.lo==undefined?Number.NEGATIVE_INFINITY:i.lo;e.hi=e.hi==undefined?i.hi:e.hi;e.lo=e.lo==undefined?i.lo:e.lo;r.hi=r.hi==undefined?e.hi:r.hi;r.lo=r.lo==undefined?e.lo:r.lo};n.checkThreshold=function(e,n,a,t,u){var l;var o=r.isNumber(n.lo,t.lo,a.lo);var I=r.isNumber(n.hi,a.hi,t.hi);switch(e){case"maximize":l=o&&(t.lo<=a.lo&&a.lo<=n.lo);break;case"minimize":l=I&&(n.hi<=a.hi&&a.hi<=t.hi);break;case"target":l=o&&I&&t.lo<=a.lo&&a.lo<=a.hi&&a.hi<=t.hi&&a.lo<=n.lo&&n.lo<=n.hi&&n.hi<=a.hi;break;default:}if(!l){var s=u?"ConstantThresholds":"DynamicThresholds";throw new i("error","Colorings.Criticality."+s,"Invalid Thresholds settings.")}};n.MBCimprovement=function(r,e,i,n){var a=n.hi;var s=n.lo;var v=i.hi;var f=i.lo;var m=e.hi;var c=e.lo;var N=[];var h,T;switch(r){case"maximize":h=[s,f,c,Number.POSITIVE_INFINITY];T=[t,u,o,l];break;case"minimize":h=[m,v,a,Number.POSITIVE_INFINITY];T=[l,o,u,t];break;case"target":h=[s,f,c,m,v,a,Number.POSITIVE_INFINITY];T=[t,u,o,l,o,u,t];break;default:throw new Error("Unsupported ImprovementDirection: "+r)}var g=[];switch(r){case"maximize":g[0]=s===-Infinity;g[1]=s===f;g[2]=f===c;g[3]=c===Infinity;break;case"minimize":g[0]=m===-Infinity;g[1]=m===v;g[2]=v===a;g[3]=a===Infinity;break;case"target":g[0]=s===-Infinity;g[1]=s===f;g[2]=f===c;g[3]=c===m;g[4]=m===v;g[5]=v===a;g[6]=a===Infinity;break;default:throw new Error("Unsupported ImprovementDirection: "+r)}h=h.filter(function(r,e){return!g[e]});T=T.filter(function(r,e){return!g[e]});N=T.map(function(r,e){return I(h[e],r,0)});return{segments:N,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}};function s(r){return[function(e,i){return r(e,i)}]}n.improvement=function(e,i,n,t,u){var l=u.hi;var o=u.lo;var I=t.hi;var v=t.lo;var f=n.hi;var m=n.lo;var c=r.thresholdValue([l,Number.POSITIVE_INFINITY]);var N=r.thresholdValue([o,Number.NEGATIVE_INFINITY]);var h=r.thresholdValue([I,l,Number.POSITIVE_INFINITY]);var T=r.thresholdValue([v,o,Number.NEGATIVE_INFINITY]);var g=r.thresholdValue([f,I,l,Number.POSITIVE_INFINITY]);var b=r.thresholdValue([m,v,o,Number.NEGATIVE_INFINITY]);var d={};switch(e){case"maximize":d["Negative"]=o==-Infinity?null:s(a.formulas.maximize.negative(i,N));d["Critical"]=o==v?null:s(a.formulas.maximize.critical(i,N,T));d["Neutral"]=v==m?null:s(a.formulas.maximize.critical(i,T,b));d["Positive"]=m==Infinity?null:s(a.formulas.maximize.positive(i,b));break;case"minimize":d["Negative"]=l==Infinity?null:s(a.formulas.minimize.negative(i,c));d["Critical"]=I==l?null:s(a.formulas.minimize.critical(i,h,c));d["Neutral"]=f==I?null:s(a.formulas.minimize.neutral(i,g,h));d["Positive"]=f==-Infinity?null:s(a.formulas.minimize.positive(i,g));break;case"target":d["Negative"]=o==-Infinity&&l===Infinity?null:s(a.formulas.target.negative(i,N,c));d["Critical"]=o==v&&I==l?null:s(a.formulas.target.critical(i,N,T,h,c));d["Neutral"]=v==m&&f==I?null:s(a.formulas.target.neutral(i,T,b,g,h));d["Positive"]=s(a.formulas.target.positive(i,b,g));break;default:throw new Error("Unsupported ImprovementDirection: "+e)}return d};a.formulas.maximize={negative:function(e,i){return function(n,a){var t=n[e];var u=i(n,a);return r.isInRange(t,Number.NEGATIVE_INFINITY,u,null,false)}},critical:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,true,false)}},neutral:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,true,false)}},positive:function(e,i){return function(n,a){var t=n[e];var u=i(n,a);return r.isInRange(t,u,Number.POSITIVE_INFINITY,true)}}};a.formulas.minimize={negative:function(e,i){return function(n,a){var t=n[e];var u=i(n,a);return r.isInRange(t,u,Number.POSITIVE_INFINITY,false)}},critical:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,false,true)}},neutral:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,false,true)}},positive:function(e,i){return function(n,a){var t=n[e];var u=i(n,a);return r.isInRange(t,Number.NEGATIVE_INFINITY,u,null,true)}}};a.formulas.target={negative:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);var I=r.isInRange(u,Number.NEGATIVE_INFINITY,l,null,false);var s=r.isInRange(u,o,Number.POSITIVE_INFINITY,false);return I||s}},critical:function(e,i,n,a,t){return function(u,l){var o=u[e];var I=i(u,l),s=n(u,l);var v=a(u,l),f=t(u,l);var m=r.isInRange(o,I,s,true,false);var c=r.isInRange(o,v,f,false,true);return m||c}},neutral:function(e,i,n,a,t){return function(u,l){var o=u[e];var I=i(u,l),s=n(u,l);var v=a(u,l),f=t(u,l);var m=r.isInRange(o,I,s,true,false);var c=r.isInRange(o,v,f,false,true);return m||c}},positive:function(e,i,n){return function(a,t){var u=a[e];var l=i(a,t);var o=n(a,t);return r.isInRange(u,l,o,true,true)}}};return n});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/emphasis/DimensionValues", ["sap/chart/coloring/ColoringUtils","sap/chart/coloring/criticality/DimensionValues","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,i,r,jQuery){"use strict";var n={};var t=function(i,n,t,s){var a=jQuery.extend({},s);a.bHasOtherSeriesDim=t.aDim.some(function(e){return e._getFixedRole()==="series"&&e.getName()!==n[0]});a.type="Emphasis";a.subType="DimensionValues";e.checkColoringDimension(n,t,i,a);var g=i[n[0]],h=g.Values,l=g.Legend||{};if(h.length>1&&!l.Highlighted){throw new r("error","Colorings.Emphasis.DimensionValues","Legend.Highlighted is mandatory when Highlight has multiple values.")}};n.qualify=function(e,i,r,n){t(e,i,r,n);var s;if(i[0]){s={dim:i[0],setting:e}}return s};n.parse=function(e,i){var r={},n=e.dim,t=e.setting[n],s=t.Values;var a=Array.isArray(s)?s:[s];var g=function(e){return a.indexOf(e[n])>-1};if(t.Legend&&t.Legend.Highlighted!=null){r.Highlight=t.Legend.Highlighted}else{r.Highlight=a[0]}if(t.Legend&&t.Legend.Others){r.Others=t.Legend.Others}else{r.Others=i.getText("COLORING_TYPE_OTHER")}var h={Highlight:g};return{callbacks:h,legend:r}};return n});
/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/emphasis/Emphasis", ["sap/chart/coloring/emphasis/DimensionValues","sap/chart/coloring/ColorPalette","sap/chart/coloring/ColoringUtils","sap/chart/ChartLog","sap/chart/data/TimeDimension"],function(e,r,a,i,s){"use strict";var t=["DimensionValues","MeasureValues"];function n(e,a){var i=e[0];var s=i.parsed.callbacks.Highlight||[];var t=i.parsed.legend;var n=[];n.push({callback:s,properties:{color:r.EMPHASIS.Highlight},displayName:t.Highlight});var o={properties:{color:r.EMPHASIS.Others},displayName:t.Others};return{rules:n,others:o}}function o(e,r){return function(){var r={plotArea:{dataPointStyle:n(e)}};return{properties:r}}}return{getCandidateSetting:function(r,i,s,n,l,p,u){var c=r.Emphasis||{},h=i.parameters||{};var g=a.dimOrMsrUse(c,h,t,"Emphasis");var m;switch(g){case"DimensionValues":var d=h.dimension||Object.keys(c.DimensionValues);if(typeof d==="string"||d instanceof String){d=[d]}m=e.qualify(c.DimensionValues,d,n,p);if(m){m.parsed=e.parse(m,u);m.ruleGenerator=o([m])}break;default:return{}}if(m.length){m.subType=g}return m}}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/DelineatedDimensionValues", ["sap/chart/coloring/ColoringUtils","sap/chart/data/MeasureSemantics","sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,n,r,i,jQuery){"use strict";var a={};var o=r.SingleColorScheme.SUPPORTED_SINGLE_SCHEMES;var t=r.SingleColorScheme.SUPPORTED_SATURATIONS;var l="colorings.Gradation.DelineatedDimensionValues";var s=function(n,r,a,s){if(n.SingleColorScheme&&o.indexOf(n.SingleColorScheme)===-1){throw new i("error",l,'"SingleColorScheme" should be one of "'+o.join('" or "')+'".')}if(n.Saturation&&t.indexOf(n.Saturation)===-1){throw new i("error",l,'"Saturation" should be one of "'+t.join('" or "')+'".')}var c={};Object.keys(n).forEach(function(e){if(e!=="SingleColorScheme"&&e!=="Saturation"){c[e]=n[e]}});var u=jQuery.extend({},s);u.bHasOtherSeriesDim=e.hasOtherSeriesDim(r[0],a);u.type="Gradation";u.subType="DelineatedDimensionValues";e.checkColoringDimension(r,a,c,u);var h=c[r[0]];if(h){var d=h.Levels;if(!Array.isArray(d)||d.length<2||d.length>6){throw new i("error",l,'The number of dimension names contained in "Levels" should be between 2 to 6.')}if(e.hasDuplicatedValues(d)){throw new i("error",l,'The dimension names contained in "Levels" have duplicated values.')}}};a.qualify=function(e,n,r,i,a){s(e,n,i,a);var o=n[0],t;if(o){t={dim:o,setting:e}}return t};a.parse=function(e){var n=e.dim,r=e.setting;var i={callbacks:{},legend:{},singleColorScheme:r.SingleColorScheme||o[0],saturation:r.Saturation||t[0]};r[n].Levels.forEach(function(e){i.callbacks[e]=a.getCallback(n,e);i.legend[e]=e});return i};a.getCallback=function(e,n){return function(r){return r[e]===n}};a.getContextHandler=function(e){var n=e.dim,r=e.setting[n].Levels;return function(a){var o=a.getProperty(n);if(r.indexOf(o)===-1){e.chartLog=new i("error",l,"Dimension memeber, "+o+', should be configured in "Levels".')}}};return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/DelineatedMeasures", ["sap/chart/coloring/ColoringUtils","sap/chart/data/MeasureSemantics","sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils","sap/chart/ChartLog"],function(e,r,a,n){"use strict";var o={};var i=a.SingleColorScheme.SUPPORTED_SINGLE_SCHEMES;var t=a.SingleColorScheme.SUPPORTED_SATURATIONS;var l="colorings.Gradation.DelineatedMeasures";var s=function(r,a,o){if(o.bIsScatter){throw new n("error",l,'"DelineatedMeasures" could not apply to Scatter or Bubble.')}if(r.SingleColorScheme&&i.indexOf(r.SingleColorScheme)===-1){throw new n("error",l,'"SingleColorScheme" should be one of "'+i.join('" or "')+'".')}if(r.Saturation&&t.indexOf(r.Saturation)===-1){throw new n("error",l,'"Saturation" should be one of "'+t.join('" or "')+'".')}var s=a.aMsr.map(function(e){return e.getName()});var u=r.Levels;if(Array.isArray(u)&&u.length>=2&&u.length<=6){e.notIn(u,s,l,"Measure, ",', configured in "Levels" should be visible.');e.notIn(s,u,l,"Visible measure, ",', should be configured in "Levels".');if(e.hasDuplicatedValues(u)){throw new n("error",l,'The measure names contained in "Levels" have duplicated values.')}}else{throw new n("error",l,'The number of measure names contained in "Levels" should be between 2 to 6.')}if(e.hasSeriesDim(a)||o.bTimeChart&&o.bWaterfall&&a.aDim.length>1||o.bIsPie&&a.aDim.length){throw new n("error",l,"Semantic coloring could not be applied if chart already has coloring.")}};o.qualify=function(a,o,u,c){s(a,u,c);o.forEach(function(e){var a;Object.keys(r).forEach(function(o){var i=r[o];if(e[i]){if(!a){a=e[i]}else if(e[i]!==a){a+=", "+e[i];throw new n("error",l,"When "+a+' have semantic relationship, "DelineatedMeasures" could not be applied.')}}})});var h=[],f=a.Levels;f.forEach(function(r){h.push({msr:e.find(r,u.aMsr)})});h.SingleColorScheme=a.SingleColorScheme||i[0];h.Saturation=a.Saturation||t[0];h.Levels=f;return h};o.parse=function(e){var r=e.msr.getName();var a={msr:e.msr,callbacks:o.getCallbacks(r),legend:{}};a.legend[r]=r;return a};o.getCallbacks=function(e){var r={};r[e]=[function(r){return r.hasOwnProperty(e)}];return r};return o});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/Gradation", ["sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureValues","sap/chart/coloring/gradation/DelineatedMeasures","sap/chart/coloring/gradation/DelineatedDimensionValues","sap/chart/coloring/ColorPalette","sap/chart/coloring/ColoringUtils","sap/chart/data/MeasureSemantics","sap/chart/ChartLog"],function(e,a,r,n,t,i,s){"use strict";var o=["DelineatedDimensionValues","RankedMeasureValues","DelineatedMeasures"];function l(a){return function(){var r,n;if(a.bMBC){r=e.createScales(a)}else{var t=u(a);n={plotArea:{dataPointStyle:{rules:t}}}}return{colorScale:r,properties:n}}}function u(e){var a=[];e.forEach(function(r,i){if(r.chartLog){throw r.chartLog}var s=r.dim;var o=r.setting[s].Levels;var l=n.GRADATION.SingleColorScheme[r.parsed.singleColorScheme];l=t.assignColor(l,o.length);if(r.parsed.saturation==="DarkToLight"){l=l.reverse()}o.forEach(function(n,t){var i={callback:r.parsed.callbacks[n],properties:{color:l[t]},displayName:r.parsed.legend[n]};if(e.bIsLine){i.properties.lineColor=i.properties.color}a.push(i)})});return a}function c(e,a){var r=[];a.forEach(function(a){var n=a.msr.getName();e.forEach(function(e){Object.keys(i).forEach(function(a){var t=i[a];if(e[t]===n){e.order=[];e.order.push(t);r.push(e)}})})});e.splice(0,e.length);e.push.apply(e,r)}return{getCandidateSetting:function(n,i,s,u,d,f,p){var g=n.Gradation||{},h=i.parameters||{};var v=t.dimOrMsrUse(g,h,o,"Gradation");var m={};var D;switch(v){case"RankedMeasureValues":var M=h.measure||Object.keys(g.RankedMeasureValues);if(typeof M==="string"||M instanceof String){M=[M]}D=e.qualify(g.RankedMeasureValues,M,u,f);if(D&&D.sMethod){D.forEach(function(a){a.parsed=e.parse(a)});m.contextHandler=e.getContextHandler(D);m.qualifiedSettings=D;m.ruleGenerator=l(D);D.bMBC=f.bMBC}break;case"DelineatedMeasures":D=a.qualify(g.DelineatedMeasures,s,u,f);if(D){m.qualifiedSettings=D;D.forEach(function(e){e.type=v;e.parsed=a.parse(e)});c(s,D)}break;case"DelineatedDimensionValues":var S=h.dimension||Object.keys(g.DelineatedDimensionValues).filter(function(e){return e!=="SingleColorScheme"&&e!=="Saturation"});if(typeof S==="string"||S instanceof String){S=[S]}D=r.qualify(g.DelineatedDimensionValues,S,s,u,f);if(D){m.qualifiedSettings=D;D.parsed=r.parse(D);m.contextHandler=r.getContextHandler(D);var b=[D];m.ruleGenerator=l(b);b.bIsLine=f.bIsLine}break;default:return{}}if(D&&D.length){m.subType=v}return m}}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils", ["sap/chart/coloring/ColoringUtils","sap/chart/coloring/ColorPalette","sap/chart/ChartLog"],function(e,r,o){"use strict";var a={SingleColorScheme:{},DivergingColorScheme:{},TargetColorScheme:{}};var i=["NoSemantics","Positive","Negative"];var n=["NoSemantics","PositiveToNegative","NegativeToPositive","ColdToHot","HotToCold"];var t=["PositiveTarget"];var l=["LightToDark","DarkToLight"];var g=5;var c=["BelowMidArea","AboveMidArea"];var s=["MidAreaLowValue","MidAreaHighValue"];var u=["BelowTargetMidpoint","AboveTargetMidpoint"];var h=["TargetMidpoint"];var m="colorings.Gradation.RankedMeasureValues";function f(r){return e.isNumber(r)&&r%1===0&&r>=2&&r<=6}function v(e,r,o){var a=[];var i=(r-e)/o;if(i>1){if(e+Math.ceil(i)*(o-1)<r){i=Math.ceil(i)}else{i=Math.floor(i)}}for(var n=0;n<o;n++){a.push(e+i*n)}return a}function S(e,r,o,a,i){var n=e.min,t=e.max,l=e.hasOwnProperty("belowMidArea")?e.belowMidArea:e.belowTargetMidpoint,g=e.hasOwnProperty("aboveMidArea")?e.aboveMidArea:e.aboveTargetMidpoint,c=e.hasOwnProperty("midAreaLowValue")?e.midAreaLowValue:e.targetMidpoint,s=e.midAreaHighValue;var u=[],h=[],m=[],f=0;if(c!==undefined){u.push(c)}if(s!==undefined&&u.indexOf(s)===-1){u.push(s)}if(u.length>1){h.push(1);m.push(a);f++}var S;if(n<u[0]){u=[n].concat(u);h=[l].concat(h);S=i(r,l);if(r.gradationSaturation==="DarkToLight"){S=S.reverse()}m=S.concat(m);f+=l}if(t>u[u.length-1]){u=u.concat([t]);h=h.concat([g]);S=i(o,g);if(o.gradationSaturation==="DarkToLight"){S=S.reverse()}m=m.concat(S);f+=g}var d=[];for(var b=0;b<u.length-1;b++){d=d.concat(v(u[b],u[b+1],h[b]))}d=d.concat(u.slice(-1));if(m.length===0){m=i(r,1);return{feed:"color",palette:[],startColor:m[0],endColor:m[0],numOfSegments:1}}return{feed:"color",palette:m,numOfSegments:f,maxNumOfSegments:13,legendValues:d}}a.SingleColorScheme.SUPPORTED_SINGLE_SCHEMES=i;a.SingleColorScheme.SUPPORTED_SATURATIONS=l;a.SingleColorScheme.validate=function(e,r){var a=e[r].SingleColorScheme||{};if(a.Scheme&&i.indexOf(a.Scheme)===-1){throw new o("error",m,'"SingleColorScheme.Scheme" of the measure, '+r+', should be one of "'+i.join('" or "')+'".')}if(a.Saturation&&l.indexOf(a.Saturation)===-1){throw new o("error",m,'"SingleColorScheme.Saturation" of the measure, '+r+', should be one of "'+l.join('" or "')+'".')}};a.SingleColorScheme.parse=function(e,r){var o=e.settings[e.type];var a=[];if(e.byAggregation){a=e.byAggregation.LevelBoundaries}r.legend={segments:a,gradationScheme:o.Scheme||i[0],gradationSaturation:o.Saturation||l[0],numberOfLevels:o.NumberOfLevels||g,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}};a.SingleColorScheme.createScales=function(o){var a=[],i=o[0];var n=i.parsed.legend;var t=r.GRADATION.SingleColorScheme[n.gradationScheme];var l=n.numberOfLevels;if(n.segments.length>0){a=n.segments;l=a.length-1;var g=n.min,c=n.max;if(g<a[0]){a=[g].concat(a);l++}if(c>a[a.length-1]){a=a.concat([c]);l++}}t=e.assignColor(t,l);if(n.gradationSaturation==="DarkToLight"){t=t.reverse()}return{feed:"color",palette:t,numOfSegments:l,legendValues:a}};a.SingleColorScheme.levels=function(e,r,a){var i=e[r].SingleColorScheme;if(a){var n=false;var t=a.LevelBoundaries;if(Array.isArray(t)&&t.length>=1&&t.length<=5){n=t.reduce(function(e,r){return e<r?r:Number.POSITIVE_INFINITY},Number.NEGATIVE_INFINITY)<Number.POSITIVE_INFINITY}if(!n){throw new o("error",m,'"SingleColorScheme.RankingPerAggregationLevel.LevelBoundaries" of the measure, '+r+", may contain between 1 to 5 members in strictly increasing sequence.")}}else{if(i.hasOwnProperty("NumberOfLevels")){var l=i.NumberOfLevels;if(!f(l)){throw new o("error",m,'"SingleColorScheme.NumberOfLevels" of the measure, '+r+", should be an Integer between 2 to 6.")}}}};a.DivergingColorScheme.validate=function(e,r){var a=e[r].DivergingColorScheme;if(a.Scheme&&n.indexOf(a.Scheme)===-1){throw new o("error",m,'"DivergingColorScheme.Scheme" of the measure, '+r+', should be one of "'+n.join('" or "')+'".')}var i=a.NumberOfLevels;c.forEach(function(e){if(!f(i&&i[e])){throw new o("error",m,'"DivergingColorScheme.NumberOfLevels.'+e+'"  of the measure, '+r+", should be an Integer between 2 to 6.")}})};a.DivergingColorScheme.parse=function(e,r){var o=e.settings[e.type];r.legend={midAreaLowValue:e.byAggregation.MidAreaLowValue,midAreaHighValue:e.byAggregation.MidAreaHighValue,gradationScheme:o.Scheme||n[0],belowMidArea:o.NumberOfLevels.BelowMidArea,aboveMidArea:o.NumberOfLevels.AboveMidArea,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}};a.DivergingColorScheme.createScales=function(o){var a=o[0];var i=a.parsed.legend;var n=r.GRADATION.DivergingColorScheme[i.gradationScheme],t=n.slice(0,6).reverse(),l=n.slice(7);t.gradationSaturation="DarkToLight";return S(i,t,l,n[6],e.assignColor)};a.DivergingColorScheme.levels=function(r,a,i){var n=false;s.forEach(function(r){if(i.hasOwnProperty(r)){n=true;if(!e.isNumber(i[r])){throw new o("error",m,'"DivergingColorScheme.NumberOfLevels.'+r+'"  of the measure, '+a+", should be a number.")}}});if(!n){throw new o("error",m,'At least one of the "MidAreaLowValue" or "MidAreaHighValue" in "DivergingColorScheme.RankingPerAggregationLevel" of the measure, '+a+", should be specified.")}if(i.MidAreaLowValue>i.MidAreaHighValue){throw new o("error",m,'"MidAreaLowValue" should no more than "MidAreaHighValue" in "DivergingColorScheme.RankingPerAggregationLevel" of the measure, '+a+".")}};a.TargetColorScheme.validate=function(e,r){var a=e[r].TargetColorScheme;if(a.Scheme&&t.indexOf(a.Scheme)===-1){throw new o("error",m,'"TargetColorScheme.Scheme" of the measure, '+r+',  should be "'+t.join('" or "')+'".')}var i=a.NumberOfLevels;u.forEach(function(e){if(!f(i&&i[e])){throw new o("error",m,'"TargetColorScheme.NumberOfLevels.'+e+'"  of the measure, '+r+", should be an Integer between 2 to 6.")}})};a.TargetColorScheme.parse=function(e,r){var o=e.settings[e.type];r.legend={targetMidpoint:e.byAggregation.TargetMidpoint,gradationScheme:o.Scheme||t[0],belowTargetMidpoint:o.NumberOfLevels.BelowTargetMidpoint,aboveTargetMidpoint:o.NumberOfLevels.AboveTargetMidpoint,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}};a.TargetColorScheme.createScales=function(e){var o=e[0];var i=o.parsed.legend;var n=r.GRADATION.TargetColorScheme[i.gradationScheme],t=n.slice(0,6),l=n.slice(0,6);l.gradationSaturation="DarkToLight";return S(i,t,l,null,a.TargetColorScheme.assignColor)};a.TargetColorScheme.levels=function(r,a,i){h.forEach(function(r){if(!e.isNumber(i[r])){throw new o("error",m,'"TargetColorScheme.NumberOfLevels.'+r+'"  of the measure, '+a+", should be a number.")}})};a.TargetColorScheme.assignColor=function(e,r){switch(r){case 1:return[e[5]];case 2:return[e[0],e[5]];case 3:return[e[0],e[2],e[5]];case 4:return e.slice(0,2).concat(e.slice(4,6));case 5:return e.slice(0,3).concat(e.slice(4,6));case 6:return e.slice(0,6);default:return null}};return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureValues", ["sap/chart/coloring/ColoringUtils","sap/chart/coloring/gradation/rankedMeasureValues/RankedMeasureUtils","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,r,n,jQuery){"use strict";var a={};var i=["SingleColorScheme","DivergingColorScheme","TargetColorScheme"];var t=function(a,t,o,s){if(!s.bMBC){throw new n("error","colorings.Gradation",'"RankedMeasureValues" only applys to Heatmap.')}e.checkColoringMeasure(t,o.aMsr,a);t.forEach(function(e){var t=Object.keys(a[e]).filter(function(e){return i.indexOf(e)>-1});if(t.length>1){throw new n("error","colorings.Gradation.RankedMeasureValues",'One and only one of "'+i.join('" or "')+'" can be applied to the measure, '+e+".")}else{var o=t[0]||i[0];if(r[o].validate){r[o].validate(a,e)}}})};a.qualify=function(a,o,s,l){t(a,o,s,l);var u=[],c=s.aDim.map(function(e){return e.getName()}).sort();jQuery.each(a,function(t,g){if(o.length&&o.indexOf(t)===-1){return}var f=e.find(t,s.aMsr);if(Object.keys(g).length===0){g["SingleColorScheme"]={}}Object.keys(g).forEach(function(e){if(i.indexOf(e)===-1){return}u.sMethod=e;var o=null,s=null;var h=Array.isArray(g[e].RankingPerAggregationLevel)?g[e].RankingPerAggregationLevel:[];h.forEach(function(e){if(e&&e.VisibleDimensions){if(Array.isArray(e.VisibleDimensions)&&e.VisibleDimensions.sort().join(",")===c.join(",")){o=e}}else{s=e}});o=o||s;if(o||h.length===0&&e==="SingleColorScheme"){if(r[e].levels){r[e].levels(a,t,o)}u.push({type:e,msr:f,settings:g,byAggregation:l.bFiltered?null:o})}else{throw new n("error","colorings.Gradation.RankedMeasureValues",'No aggregation level in "'+e+'" of the measure, '+t+",  matched with current visible dimensions.")}})});return u};a.parse=function(e){var n={msr:e.msr,legend:{}};r[e.type].parse(e,n);return n};a.createScales=function(e){return r[e.sMethod].createScales(e)};a.getContextHandler=function(e){var r=e[0];var n=r.msr.getName();var a=r.parsed.legend;return function(e){var r=e.getProperty(n);a.min=Math.min(a.min,r);a.max=Math.max(a.max,r)}};return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/Dimension", ["sap/ui/core/Element","sap/chart/utils/ChartUtils","sap/ui/thirdparty/jquery"],function(t,e,jQuery){"use strict";var r={category:true,category2:true,series:true};var a=t.extend("sap.chart.data.Dimension",{metadata:{library:"sap.chart",properties:{name:{type:"string"},label:{type:"string"},textFormatter:{type:"function"},textProperty:{type:"string"},displayText:{type:"boolean",defaultValue:true},role:{type:"string",defaultValue:"category"}}}});a.prototype.setLabel=e.makeNotifyParentProperty("label");a.prototype.setTextFormatter=e.makeNotifyParentProperty("textFormatter");var o=e.makeNotifyParentProperty("textProperty");a.prototype.setTextProperty=function(t,e){return o.apply(this,arguments)};a.prototype.setDisplayText=e.makeNotifyParentProperty("displayText");var p=e.makeNotifyParentProperty("role");a.prototype.setRole=function(t,e){if(!r[t]){throw new TypeError("Invalide Dimension role: "+t)}return p.apply(this,arguments)};a.prototype._getFixedRole=function(){return this._sFixedRole||this.getRole()};return a});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/DimensionRoleType", ["sap/ui/base/DataType"],function(e){"use strict";var a={category:"category",series:"series",category2:"category2"};e.registerEnum("sap.chart.data.DimensionRoleType",a);return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/HierarchyDimension", ["sap/chart/data/Dimension","sap/chart/utils/ChartUtils"],function(e,t){"use strict";var i=e.extend("sap.chart.data.HierarchyDimension",{metadata:{library:"sap.chart",properties:{level:{type:"int",defaultValue:0}}}});i.prototype.setLevel=t.makeNotifyParentProperty("level");i.prototype._getEffectiveLevel=function(){if(this._iEffectiveLevel==null){return this.getLevel()}else{return this._iEffectiveLevel}};return i});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/Measure", ["sap/ui/core/Element","sap/chart/utils/ChartUtils","sap/chart/data/MeasureSemantics","sap/ui/thirdparty/jquery"],function(e,t,a,jQuery){"use strict";var r={axis1:true,axis2:true,axis3:true,axis4:true};var i=e.extend("sap.chart.data.Measure",{metadata:{library:"sap.chart",properties:{name:{type:"string"},label:{type:"string"},unitBinding:{type:"string"},valueFormat:{type:"string",defaultValue:null},role:{type:"string",defaultValue:"axis1"},semantics:{type:"sap.chart.data.MeasureSemantics",defaultValue:a.Actual},semanticallyRelatedMeasures:{type:"object",defaultValue:null},analyticalInfo:{type:"object",defaultValue:null}}}});i.prototype.setLabel=t.makeNotifyParentProperty("label");var s=t.makeNotifyParentProperty("role");i.prototype.setRole=function(e,t){if(!r[e]){throw new TypeError("Invalide Measure role: "+e)}return s.apply(this,arguments)};i.prototype.setUnitBinding=t.makeNotifyParentProperty("unitBinding");i.prototype.setValueFormat=t.makeNotifyParentProperty("valueFormat");i.prototype.setSemantics=t.makeNotifyParentProperty("semantics");i.prototype.setSemanticallyRelatedMeasures=t.makeNotifyParentProperty("semanticallyRelatedMeasures");i.prototype._getFixedRole=function(){return this._sFixedRole||this.getRole()};return i});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/MeasureRoleType", ["sap/ui/base/DataType"],function(a){"use strict";var s={axis1:"axis1",axis2:"axis2",axis3:"axis3",axis4:"axis4"};a.registerEnum("sap.chart.data.MeasureRoleType",s);return s},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/MeasureSemantics", ["sap/ui/base/DataType"],function(e){"use strict";var a={Actual:"actual",Reference:"reference",Projected:"projected"};e.registerEnum("sap.chart.data.MeasureSemantics",a);return a},true);
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/data/TimeDimension", ["sap/chart/data/Dimension","sap/chart/utils/ChartUtils"],function(t,e){"use strict";var r=t.extend("sap.chart.data.TimeDimension",{metadata:{library:"sap.chart",properties:{timeUnit:{type:"sap.chart.TimeUnitType"},fiscalYearPeriodCount:{type:"object"},projectedValueStartTime:{type:"any"}}}});r.prototype.setTimeUnit=e.makeNotifyParentProperty("timeUnit");r.prototype.setFiscalYearPeriodCount=e.makeNotifyParentProperty("fiscalYearPeriodCount");r.prototype.setProjectedValueStartTime=e.makeNotifyParentProperty("projectedValueStartTime");r.prototype._setIsUTC=function(t){this._bUTC=t};r.prototype._getIsUTC=function(){return this._bUTC};r.prototype.setIsUTC=function(t){this._setIsUTC(t)};r.prototype.getIsUTC=function(){return this._getIsUTC()};return r});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/library", ["sap/base/i18n/Localization","sap/base/i18n/ResourceBundle","sap/viz/ui5/format/ChartFormatter","sap/ui/core/Lib","sap/ui/core/library","sap/viz/library","sap/chart/utils/RoleFitter","sap/chart/utils/ChartTypeAdapterUtils","sap/chart/ChartType","sap/chart/data/Dimension","sap/chart/data/Measure","sap/chart/AutoScaleMode","sap/chart/ScaleBehavior","sap/chart/data/MeasureSemantics","sap/chart/coloring/CriticalityType","sap/chart/ColoringType","sap/chart/data/DimensionRoleType","sap/chart/data/MeasureRoleType"],function(e,a,t,r,i,o,n,s,c,u,l,p,m,g){"use strict";const h=r.init({name:"sap.chart",dependencies:["sap.ui.core","sap.viz"],types:["sap.chart.data.MeasureSemantics"],interfaces:[],controls:["sap.chart.Chart"],elements:["sap.chart.data.Dimension","sap.chart.data.TimeDimension","sap.chart.data.HierarchyDimension","sap.chart.data.Measure"],noLibraryCSS:true,version:"1.120.3"});h.SelectionMode={Multi:"MULTIPLE",Single:"SINGLE",None:"NONE"};h.SelectionBehavior={DataPoint:"DATAPOINT",Category:"CATEGORY",Series:"SERIES"};h.MessageId={NoData:"NO_DATA",MultipleUnits:"MULTIPLE_UNITS"};h.api={};let d;let T;h.api.getChartTypes=function(){if(T==null||d!==e.getLanguage()){d=e.getLanguage();T=a.create({bundleName:"sap.chart.messages.messagebundle"})}return Object.keys(c).reduce(function(e,a){var t=c[a];e[t]=T.getText("info/"+t);return e},{})};h.data=h.data||{};h.coloring=h.coloring||{};h.coloring.ImprovementDirectionType={Minimize:"Minimize",Target:"Target",Maximize:"Maximize"};h.coloring.GradationSingleColorScheme={NoSemantics:"NoSemantics",Positive:"Positive",Negative:"Negative"};h.coloring.GradationDivergingColorScheme={NoSemantics:"NoSemantics",PositiveToNegative:"PositiveToNegative",NegativeToPositive:"NegativeToPositive",ColdToHot:"ColdToHot",HotToCold:"HotToCold"};h.coloring.GradationTargetColorScheme={PositiveTarget:"PositiveTarget"};h.coloring.GradationSaturation={LightToDark:"LightToDark",DarkToLight:"DarkToLight"};h.api.getChartTypeLayout=function(e,a,t){var r,i;if(!e){throw new Error("Invalid chart type: "+String(e))}if(a){r=a.map(function(e,a){if(e instanceof u){return e}else if(e&&e.name){return{getName:function(){return e.name},getRole:function(){return e.role||"category"}}}else{throw new Error("Invalid Dimension at ["+a+"]: "+String(e)+". Dimension should be an object of the format{name:'name'} or an instance of sap.chart.data.Dimension.")}})}else{r=[]}if(t){i=t.map(function(e,a){if(e instanceof l){return e}else if(e&&e.name){return{getName:function(){return e.name},getRole:function(){return e.role||"axis1"}}}else{throw new Error("Invalid Measure at ["+a+"]: "+String(e)+". Measure should be an object of the format{name:'name'} or an instance of sap.chart.data.Measure.")}})}else{i=[]}var o=s.adaptChartType(e,r);var c=n.compatible(o,r,i);return{dimensions:c.used.Dimension||[],measures:c.used.Measure||[],errors:Object.keys(c.error||{}).reduce(function(e,a){return e.concat({cause:a,detail:c.error[a]})},[])}};var v=t.getInstance();if(!(sap.viz.api.env.Format.numericFormatter()instanceof t)){sap.viz.api.env.Format.numericFormatter(v)}return h});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/pagination/PagingController", ["sap/ui/model/Sorter","sap/ui/thirdparty/jquery"],function(e,jQuery){"use strict";var t=500;function i(e,t,i){var a=e.getContexts(t,i),r;if(a.length===0||a.dataRequested){r=true}else{r=a.some(function(e){return e===undefined})}return!r}var a=function(e){this._mMeasureRange={};this._iRenderedPageNo=-1;this._bUnderPaging=false;this._iMaxPageNo=-1;this._iRemainingRecords=-1;this._iOffset=null;this._oChart=e;this._bInitialized=false;this._aPagingSorters=null;this._bMinMaxQueried=false;this._oColorTracker=e._oColorTracker;var i=this._oChart._getDataset();if(i){i.setRange(0,t*2)}var r=this._oChart._getVizFrame();r.attachEvent("_scroll",a.prototype._scrollHandler.bind(this))};a.prototype.bindingChanged=function(){if(!this._bInitialized||!this._bMinMaxQueried){this.init(true)}else if(this.isUnderPaging()){this.paging(this._scrollRatio)}};a.prototype.reset=function(){this._bInitialized=false;this._iRenderedPageNo=0;this._mMeasureRange={};this._bMinMaxQueried=false;this._oColorTracker.clear();var i=this._oChart.getBinding("data");var a=this._oChart._getDataset();if(!a||!i){return}var r=this._oChart._prepareFeeds();r._order=r._order.filter(function(e){return e!=="MND"&&this._oChart.getDimensions().map(function(e){return e.getName()}).indexOf(e)>-1}.bind(this));this._aPagingSorters=null;this._oChart._getVizFrame()._runtimeScales(this._oColorTracker.get(),true);this._oChart._getVizFrame()._readyToRender(false);var n;if(this._oChart.getBindingInfo("data").length){n=Math.min(t*2,this._oChart.getBindingInfo("data").length)}else{n=t*2}a.setRange(0,n);var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(r._order.length){var o=this._oChart._aFeeds._order.map(function(t){return new e(t)});i.sort(o);this._aPagingSorters=o}else if(s&&i.getModel()instanceof s){i.sort([])}a.setPagingOption({bEnabled:false})};a.prototype.getPagingSorters=function(){return this._aPagingSorters};a.prototype.isUnderPaging=function(){return!!this._bUnderPaging};a.prototype.init=function(e){this._bInitialized=true;this._bUnderPaging=false;var a=this._oChart._getVizFrame();var r=a.getDataset();var n=r.getBinding("data");if(!n){return}var s=n.isA("sap.ui.model.analytics.AnalyticalBinding")?n.getTotalSize():n.getLength();var o;if(s>=0){if(this._oChart.getBindingInfo("data").length){this._iTotalSize=Math.min(this._oChart.getBindingInfo("data").length,s)}else{this._iTotalSize=s}if(this._iTotalSize>t*2){this._bUnderPaging=true;this._iMaxPageNo=Math.floor(this._iTotalSize/t)-1;this._iRemainingRecords=this._iTotalSize%t;this._iOffset=null;this._iRenderedPageNo=0;var h=t/this._iTotalSize;o={bEnabled:true,sMode:"reset",thumbRatio:h};r.setRange(0,t);if(e){this._bMinMaxQueried=true;var g=this._oChart._oMeasureRangePromise||this._queryMinMax(this._oChart,n);g.then(function(e){this._mMeasureRange=e;this._oChart._invalidateBy({source:this._oChart,keys:{vizFrame:true}});this._oChart.setBusy(false);a._readyToRender(i(n,0,t))}.bind(this))}else{a._readyToRender(i(n,0,t))}this._bUnderPaging=true}else{this._mMeasureRange={};o={bEnabled:false};this._bUnderPaging=false;r.setRange(0,this._iTotalSize);a._readyToRender(i(n,0,this._iTotalSize))}r.setPagingOption(o)}};a.prototype.paging=function(e){var a=Math.floor(this._iTotalSize*e/t);var r=this._oChart._getVizFrame();a=Math.min(a,this._iMaxPageNo);this._iOffset=null;var n=Math.max((a-1)*t,0);var s,o;if(a===0){s=t;o=t}else if(a===this._iMaxPageNo){s=t*2+this._iRemainingRecords;o=t+this._iRemainingRecords}else{s=t*2;o=t}this._iOffset=(this._iTotalSize*e-a*t)/o;if(this._iRenderedPageNo===a){var h={plot:{transform:{translate:{translateByPage:{context:this._middleCtx,offset:this._iOffset}}}}};r._states(h)}else{if(this._pagingTimer){clearTimeout(this._pagingTimer)}var g=r.getDataset();var _=g.getBinding("data");this._pagingTimer=setTimeout(function(){g.setRange(n,s);g.setPagingOption({bEnabled:true,sMode:"update",thumbRatio:null});var e=i(_,n,s);if(e){this._iRenderedPageNo=a;g.invalidate();r._readyToRender(true);r.invalidate();this._oColorTracker.add(r._runtimeScales());r._runtimeScales(this._oColorTracker.get(),true)}else{r._readyToRender(false)}}.bind(this),50);this._sLoadingTimer=this._sLoadingTimer||setTimeout(function(){this._oChart._showLoading(true)}.bind(this),200)}};a.prototype.vizFrameRenderCompleted=function(){if(this._sLoadingTimer){clearTimeout(this._sLoadingTimer);this._sLoadingTimer=null}this._oChart._showLoading(false);if(!this._bUnderPaging){return}var e=this._oChart._getVizFrame();var i=e.getDataset();var a=i.getBinding("data");var r=this._iRenderedPageNo;if(r!==0){var n=r*t-1;this._middleCtx=a.getContexts(n,1)[0].getObject()}else{this._middleCtx=null}if(this._middleCtx||this._iOffset){var s={plot:{transform:{translate:{translateByPage:{context:this._middleCtx,offset:this._iOffset}}}}};e._states(s)}};a.prototype._scrollHandler=function(e){if(this._oChart._isEnablePaging()){this._scrollRatio=e.getParameters().position;this.paging(this._scrollRatio)}};a.prototype._queryMinMax=function(e,t){var i=e._getRequiredDimensions().map(function(e){return e.getName()}),a=e._getRequiredMeasures().map(function(e){return e.getName()});var r=a.reduce(function(e,t){e[t]={min:{},max:{}};return e},{});return new Promise(function(e,n){function s(){var t=a.every(function(e){return r[e].min.requested&&r[e].max.requested});if(t){e(r)}}function o(e,t,i){r[e][t].requested=true;r[e][t].value=parseFloat(i&&i.results[0][e]);s()}function h(e,t,i){r[e][t].requested=true;r[e][t].error=i;s()}var g=a.reduce(function(e,t){return e.concat({urlParameters:{$select:i.concat(t).join(","),$top:1,$orderby:t+" asc"},success:o.bind(null,t,"min"),error:h.bind(null,t,"min")},{urlParameters:{$select:i.concat(t).join(","),$top:1,$orderby:t+" desc"},success:o.bind(null,t,"max"),error:h.bind(null,t,"max")})},[]);var _=t.getPath(),d=t.getModel();g.forEach(function(e){d.read(_,e)})}).then(function(e){var t={};jQuery.each(e,function(e,i){t[e]={min:i.min.value,max:i.max.value}});return t})};a.prototype.getMeasureRange=function(){return this._mMeasureRange};return a});
/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/ChartTypeAdapterUtils", ["sap/chart/utils/ChartUtils","sap/chart/data/TimeDimension"],function(t,e){"use strict";var r={};function n(r,n){var a=n.some(function(t){return t instanceof e});if(a){return t.CONFIG.oAdapteredChartTypes[r]}else{return r}}r.adaptChartType=function(e,r){if(t.CONFIG.oAdapteredChartTypes[e]){return n(e,r)}else{return e}};return r});
/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/ChartUtils", ["sap/chart/ChartType","sap/base/util/deepEqual"],function(e,t){"use strict";var a={chartTypes:[e.Bar,e.Column,e.Line,e.Combination,e.Pie,e.Donut,e.Scatter,e.Bubble,e.Heatmap,e.Bullet,e.VerticalBullet,e.StackedBar,e.StackedColumn,e.StackedCombination,e.HorizontalStackedCombination,e.DualBar,e.DualColumn,e.DualLine,e.DualStackedBar,e.DualStackedColumn,e.DualCombination,e.DualHorizontalCombination,e.DualStackedCombination,e.DualHorizontalStackedCombination,e.PercentageStackedBar,e.PercentageStackedColumn,e.PercentageDualStackedBar,e.PercentageDualStackedColumn,e.Waterfall,e.HorizontalWaterfall],pagingChartTypes:[e.Bar,e.Column,e.Line,e.Combination,e.Bullet,e.VerticalBullet,e.StackedBar,e.StackedColumn,e.StackedCombination,e.HorizontalStackedCombination,e.DualBar,e.DualColumn,e.DualLine,e.DualStackedBar,e.DualStackedColumn,e.DualCombination,e.DualHorizontalCombination,e.DualStackedCombination,e.DualHorizontalStackedCombination,e.PercentageStackedBar,e.PercentageStackedColumn,e.PercentageDualStackedBar,e.PercentageDualStackedColumn],timeChartTypes:["timeseries_line","timeseries_column","timeseries_bubble","timeseries_scatter","timeseries_combination","dual_timeseries_combination","timeseries_bullet","timeseries_stacked_column","timeseries_100_stacked_column","timeseries_waterfall"],oAdapteredChartTypes:{line:"timeseries_line",column:"timeseries_column",scatter:"timeseries_scatter",bubble:"timeseries_bubble",combination:"timeseries_combination",dual_combination:"dual_timeseries_combination",vertical_bullet:"timeseries_bullet",stacked_column:"timeseries_stacked_column","100_stacked_column":"timeseries_100_stacked_column",waterfall:"timeseries_waterfall"},nonSemanticPatternChartType:[e.Pie,e.Donut,e.PercentageDonut,e.Scatter,e.Bubble,e.Heatmap,e.Waterfall,e.HorizontalWaterfall,"timeseries_bubble","timeseries_scatter","timeseries_waterfall"],lineChartType:[e.Line,e.DualLine,"timeseries_line"]};return{CONFIG:a,makeNotifyParentProperty:function(e){return function(a,i){var n=this.mProperties[e];a=this.validateProperty(e,a);if(t(n,a)){return this}this.setProperty(e,a,i);if(i){return this}var r=this.getParent();if(r&&typeof r._invalidateBy==="function"){r._invalidateBy({source:this,property:e,oldValue:n,newValue:a})}return this}},isStackedLikeChart:function(e){return e.indexOf("stacked")>=0||e.indexOf("waterfall")>=0},isBulletChart:function(e){return e.indexOf("bullet")>=0}}});
/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/DataSourceUtils", ["sap/chart/data/Dimension","sap/chart/data/TimeDimension","sap/chart/data/HierarchyDimension","sap/chart/data/Measure","sap/chart/TimeUnitType","sap/ui/thirdparty/jquery"],function(e,t,a,n,r,jQuery){"use strict";function i(e,t){var a=t.path;var n=(t.parameters||{}).entitySet;if(!n){n=a.split("/")[1];if(n.indexOf("(")!=-1){n=n.split("(")[0]+(e?"Results":"Set")}}return n}function o(e,t,a){return"{/#"+e+"/"+t+"/@sap:"+a+"}"}var s={"com.sap.vocabularies.Common.v1.IsCalendarDate":"yearmonthday","com.sap.vocabularies.Common.v1.IsCalendarYearQuarter":"yearquarter","com.sap.vocabularies.Common.v1.IsCalendarYearMonth":"yearmonth","com.sap.vocabularies.Common.v1.IsCalendarYearWeek":"yearweek","com.sap.vocabularies.Common.v1.IsFiscalYear":"fiscalyear","com.sap.vocabularies.Common.v1.IsFiscalYearPeriod":"fiscalyearperiod"};function u(n,i){var o=e;if(n.type==="Edm.DateTime"&&n["sap:display-format"]==="Date"){o=t;i.timeUnit=r.Date}else if(n["sap:hierarchy-node-for"]){o=a}else if(n.type==="Edm.String"){var u=Object.keys(s);for(var l=0;l<u.length;l++){var m=u[l];if(n[m]&&n[m].Bool){var c=s[m];if(r[c]){o=t;i.timeUnit=c}break}}}return o}var l={getEntitySet:i.bind(null,true),deriveColumns:function(e,t){var a=e.getAnalyticalExtensions().findQueryResultByName(l.getEntitySet(t));if(!a){throw new Error('value of the "isAnalytical" property does not match the Data Service in use')}var n=a.getEntityType().getQName();n=n.slice(n.lastIndexOf(".")+1);var r=a.getEntityType().getSchema().namespace;var i=l.makeDimension.bind(this,n,r,a);var o=l.makeMeasure.bind(this,n);var s=a.getEntityType().getAllHierarchyPropertyNames().map(function(e){return a.findDimensionByPropertyName(e).getHierarchy().getNodeIDProperty().name});var u=a.getAllDimensionNames().concat(s);return{dimensions:jQuery.map(u,i),measures:jQuery.map(a.getAllMeasures(),o)}},makeDimension:function(e,t,a,n){var r={name:n,label:o(e,n,"label"),textProperty:o(e,n,"text")};var i=l.ANNOTATION_ACCESS_TEMPLATE.replace(/%SCHEMANS/,t).replace(/%RESULTTYPE/,e).replace(/%DIMENSION/,n);var s=a.getModel().getODataModel().getMetaModel().getProperty(i);var m=u(s,r);return new m(r)},makeMeasure:function(e,t){return new n({name:t.getName(),label:o(e,t.getName(),"label")})},updateModel:function(e){function t(e,t,a,n){var r=[];var i={name:e.getName(),grouped:false,inResult:!!a,visible:!n};if(t!=null){i.level=t}r.push(i);var o=e.getTextProperty();if(e.getDisplayText()&&o){i={name:o,grouped:false,inResult:!!a,visible:!n};r.push(i)}return r}function n(t,a){var n=t.getUnitBinding(),r=e._isEnablePaging(),i=t.getAnalyticalInfo(),o=[];if(i){o.push({name:i.propertyPath,with:i.with,as:t.getName(),total:false})}else{o.push({name:t.getName(),total:false,inResult:false,visible:true})}var s=sap.ui.require("sap/ui/model/odata/v4/ODataModel");if(r&&s&&e.getModel()instanceof s){o[0].min=true;o[0].max=true}if(n&&a.indexOf(n)===-1){o.push({name:n,inResult:false,visible:true})}return o}var r=e.getBinding("data");if(!r){return}var i=e._getVisibleDimensions(true);var o=e._getVisibleMeasures(true);var s=e._normalizeDorM(e.getInResultDimensions(),true);var u=e._getDrillStateTop().hierarchylevel;var l=i.map(function(e){return e.getName()}).concat(s.map(function(e){return e.getName()})).concat(o.map(function(e){return e.getName()}));var m=i.reduce(function(e,a){return e.concat(t(a,u[a.getName()]))},[]).concat(s.reduce(function(e,n){var r=n instanceof a?n.getLevel():null;return e.concat(t(n,r,true,true))},[])).concat(o.reduce(function(e,t){return e.concat(n(t,l))},[]));var c=e._getCandidateColoringSetting();var d=c.additionalMeasures||[];var g=c.additionalDimensions||[];if(d.length){m=m.concat(e._normalizeDorM(d).reduce(function(e,t){return e.concat(n(t))},[]))}if(g.length){m=m.concat(e._normalizeDorM(g,true).reduce(function(e,a){return e.concat(t(a,u[a.getName()]))},[]))}var p=r.updateAnalyticalInfo(m);return p&&p.measureRangePromise},ANNOTATION_ACCESS_TEMPLATE:"/dataServices/schema/[${"+"namespace"+"}==='%SCHEMANS']/entityType/[${"+"name"+"}==='%RESULTTYPE']/property/[${"+"name"+"}==='%DIMENSION']/"};var m={getEntitySet:i.bind(null,false),deriveColumns:function(e,t){var a=e.getMetaModel(),r={dimensions:[],measures:[]};if(a){var i=a.getODataEntitySet(m.getEntitySet(t)).entityType;var o=a.getODataEntityType(i);jQuery.each(o.property,function(e,t){var a=m.CLAZZ[t.type];if(!a){throw new Error("Unsupported type: "+t.type)}var i={name:t.name};if(t.hasOwnProperty("com.sap.vocabularies.Common.v1.Label")){i.label=t["com.sap.vocabularies.Common.v1.Label"].String}if(a===n){r.measures.push(new a(i))}else{if(t.hasOwnProperty("com.sap.vocabularies.Common.v1.Text")){i.textProperty=t["com.sap.vocabularies.Common.v1.Text"].Path}a=u(t,i);r.dimensions.push(new a(i))}})}return r},CLAZZ:{Null:e,"Edm.Binary":e,"Edm.Boolean":e,"Edm.Byte":n,"Edm.DateTime":e,"Edm.Decimal":n,"Edm.Double":n,"Edm.Single":n,"Edm.Guid":e,"Edm.Int16":n,"Edm.Int32":n,"Edm.Int64":n,"Edm.SByte":n,"Edm.String":e,"Edm.Time":e,"Edm.DateTimeOffset":e},updateModel:function(e,t,a){var n=sap.ui.require("sap/ui/model/odata/ODataModel");if(n&&e.getModel()instanceof n){var r=t.reduce(function(e,t){if(t.getTextProperty()){return e.concat(t.getName(),t.getTextProperty())}else{return e.concat(t.getName())}},[]);var i=a.reduce(function(e,t){if(t.getUnitBinding()){return e.concat(t.getName(),t.getUnitBinding())}else{return e.concat(t.getName())}},[]);e._oBindingInfo.parameters=e._oBindingInfo.parameters||{};e._oBindingInfo.parameters.entitySet=m.getEntitySet(e._oBindingInfo);e._oBindingInfo.parameters.select=r.concat(i).join(",");e.bindData(e._oBindingInfo);if(e._isEnablePaging()&&e._getPagingController().getPagingSorters()){e.getBinding("data").sort(e._getPagingController().getPagingSorters())}}else{return}}};function c(e){return function(t){var a=t?l:m;return a[e]}}return{deriveColumns:c("deriveColumns"),updateModel:c("updateModel"),getEntitySet:c("getEntitySet")}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/DateFormatUtil", ["sap/chart/TimeUnitType","sap/ui/core/format/DateFormat"],function(e,t){"use strict";var y={};y[e.yearmonthday]="yyyyMMdd";y[e.yearquarter]="yyyyQQQQQ";y[e.yearmonth]="yyyyMM";y[e.yearweek]="yyyyww";function r(e){var r=y[e];if(r){return t.getDateInstance({pattern:r})}else{return null}}return{getInstance:r}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/MeasureSemanticsUtils", ["sap/chart/coloring/ColoringUtils","sap/chart/coloring/ColorPalette","sap/chart/data/MeasureSemantics","sap/chart/coloring/CriticalityType","sap/chart/ChartLog","sap/chart/ColoringType","sap/chart/coloring/criticality/Criticality","sap/chart/utils/ChartUtils","sap/ui/thirdparty/jquery"],function(e,t,a,r,i,n,l,u,jQuery){"use strict";var s=["sapUiChartPaletteQualitativeHue1","sapUiChartPaletteQualitativeHue2","sapUiChartPaletteQualitativeHue3","sapUiChartPaletteQualitativeHue4","sapUiChartPaletteQualitativeHue5","sapUiChartPaletteQualitativeHue6","sapUiChartPaletteQualitativeHue7","sapUiChartPaletteQualitativeHue8","sapUiChartPaletteQualitativeHue9","sapUiChartPaletteQualitativeHue10","sapUiChartPaletteQualitativeHue11","sapUiChartPaletteQualitativeHue12","sapUiChartPaletteQualitativeHue13","sapUiChartPaletteQualitativeHue14","sapUiChartPaletteQualitativeHue15","sapUiChartPaletteQualitativeHue16","sapUiChartPaletteQualitativeHue17","sapUiChartPaletteQualitativeHue18","sapUiChartPaletteQualitativeHue19","sapUiChartPaletteQualitativeHue20","sapUiChartPaletteQualitativeHue21","sapUiChartPaletteQualitativeHue22"],c=[["sapUiChartPaletteSequentialHue1","sapUiChartPaletteSequentialHue1Light2","sapUiChartPaletteSequentialHue1Dark1"],["sapUiChartPaletteSequentialHue2","sapUiChartPaletteSequentialHue2Light2","sapUiChartPaletteSequentialHue2Dark1"]],o="sapUiChartPaletteSequentialNeutralDark2",f="sapUiChartPaletteSemanticNeutral",p={actual:"solid",projected:"dash",reference:"dot"},d={projected:"diagonalLightStripe",reference:"noFill"};var h=[r.Positive,r.Neutral,r.Critical,r.Negative];function v(e){var t={};if(e.getSemanticallyRelatedMeasures){var a=e.getSemanticallyRelatedMeasures();if(a){if(a.projectedValueMeasure){t.projected=a.projectedValueMeasure}if(a.referenceValueMeasure){t.reference=a.referenceValueMeasure}return t}}return t}function m(e,t){var a=e.reduce(function(e,t){e[t.getName()]={msr:t,sem:t.getSemantics&&t.getSemantics()||"actual",rel:v(t)};return e},{});jQuery.each(a,function(e,t){if(t.sem==="actual"){jQuery.each(t.rel,function(e,r){if(a[r]&&a[r].sem!==e){delete t.rel[e];var n=new i("error","Semantic Pattern",r+" shouldn't be used as "+e+" in semantic relation. ");n.display()}})}});if(t){for(var r=0;r<t.length;r++){var n=t[r];var l=v(n);if(l.projected&&l.reference&&a[l.projected]&&a[l.reference]){a[l.projected]={msr:n,sem:"projected",rel:{reference:l.reference}}}}}return a}function g(e,t,r){var n=[],l=0,u;var s;if(!r){s=e.slice().sort(function(a,r){var i=t[a.getName()].sem,n=t[r.getName()].sem;if(i<n){return-1}else if(i>n){return 1}else{return e.indexOf(a)-e.indexOf(r)}})}else{s=jQuery.extend(true,{},e)}jQuery.each(s,function(e,s){var c=s.getName();if(!t[c]){return}var o=t[c];var f={};var p;f[r?"actual":o.sem]=c;if(s.getLabel){p=s.getLabel();if(p){f.labels={};f.labels[o.sem]=p}}f.index=l++;if(!r&&(o.sem==="actual"||o.sem==="projected")){if(o.rel.projected){if(t[o.rel.projected]){f.projected=o.rel.projected;if(t[o.rel.projected].msr.getLabel){p=t[o.rel.projected].msr.getLabel();if(p){f.labels=jQuery.extend(true,f.labels,{projected:p})}}delete t[o.rel.projected]}else{u=new i("error","Semantic Pattern",o.msr.getName()+" has an invalid projected semantic relation.");u.display()}}if(o.rel.reference){if(t[o.rel.reference]){f.reference=o.rel.reference;if(t[o.rel.reference].msr.getLabel){p=t[o.rel.reference].msr.getLabel();if(p){f.labels=jQuery.extend(true,f.labels,{reference:p})}}delete t[o.rel.reference]}else{u=new i("error","Semantic Pattern",o.msr.getName()+" has an invalid reference semantic relation.");u.display()}}delete t[c]}f.order=[a.Actual,a.Projected,a.Reference];n.push(f)});return n}var C=function(e,t){if(!e.dataPointStyle){e=jQuery.extend(true,e,{dataPointStyle:{rules:[],others:null}})}e.dataPointStyle.rules.push(t)};var P=function(e,t,a){var r,i;if(e.indexOf("dual")===-1){i=s;r=s.length}else{var n=a==="valueAxis"?0:1;i=c[n];r=i.length}return{actual:i[t%r],projected:i[t%r],reference:i[t%r]}};var y=function(e,t,r){if(e.projectedValueStartTime&&e.timeAxis&&t!==a.Reference){r=r||function(){return true};var i=function(t){return t.hasOwnProperty(e.semanticMsrName)};if(t===a.Actual){return function(t){return r(t)&&i(t)&&new Date(t[e.timeAxis]).getTime()<e.projectedValueStartTime}}else if(t===a.Projected){return function(t){return r(t)&&i(t)&&new Date(t[e.timeAxis]).getTime()>=e.projectedValueStartTime}}}else{r=r||function(a){return a.hasOwnProperty(e[t])};return r}};var S=function(r,i,n,l){var u,s;if(i){if(r.iUnMentionedIndex==undefined){s=f}else{u=e.assignUnmentionedColor(t.CRITICALITY.Neutral,l.unMentionedTuplesNumber);s=u[r.iUnMentionedIndex]}}else{if(n===a.Reference&&l.hasSingleReference){s=o}else{u=P(l.chartType,r.index,r.valueAxisID);s=u[n]}}return s};var U=function(e,t,a){var r=false;if(e.chartType.indexOf("combination")>-1){if(e.chartType.indexOf("timeseries")>-1){if(t.index!==0||t.valueAxisID!=="valueAxis"){r=true}else{if(t.hasOwnProperty("actual")){if(!t.projectedValueStartTime&&a!=="actual"||a==="reference"){r=true}}}}else{if(a!=="actual"){r=true}}}return r};var x=function(r,i,n,l,s){var c,o,f={},v;var m=r[n];var g;(i||[]).forEach(function(e){if(e.parsed.msr&&e.parsed.msr.getName()===m){o=e.parsed;g=e.type}});var P=r.labels&&r.labels[n]?r.labels[n]:m;if(r.semanticMsrName&&(n===a.Actual||n===a.Projected)){f[r.semanticMsrName]=P}if(o){var x=h,b,j=0;if(i.Levels){x=i.Levels;b=t.GRADATION.SingleColorScheme[i.SingleColorScheme];j=x.length}x.forEach(function(a,h){var m=o.callbacks[a];if(m){var P=y(r,n,m[0]);var S=e.assignColor(b||t.CRITICALITY[a],j||m.length);if(i.Saturation==="DarkToLight"){S=S.reverse()}c=S[j===0?0:h];v={color:c,pattern:d[n]};if(u.CONFIG.lineChartType.indexOf(s.chartType)>-1){v.lineType=p[n];if(g==="Static"||g==="DelineatedMeasures"){v.lineColor=c}}if(U(s,r,n)){if(n==="projected"){v.pattern=""}v.lineType=p[n];if(g==="Static"){v.lineColor=c}}C(l,{callback:P,properties:v,displayName:o.legend[a],dataName:f})}})}else{if(!i||i.bShowUnmentionedMsr){var T=y(r,n);c=S(r,i,n,s);v={color:c,pattern:d[n]};if(u.CONFIG.lineChartType.indexOf(s.chartType)>-1){v.lineType=p[n];v.lineColor=c}if(U(s,r,n)){if(n==="projected"){v.pattern=""}v.lineType=p[n];v.lineColor=c}C(l,{callback:T,properties:v,displayName:P,dataName:f})}}};var b=function(e){return e.reference&&!(e.actual||e.projected)};var j=function(e,t,r,i){var n=e.filter(function(e){return e.reference}).length===1;var l=e.filter(function(e){return e.hasOwnProperty("iUnMentionedIndex")}).length;e.forEach(function(e){e.order.forEach(function(u){var s=true;if(i.indexOf("bullet")>-1){s=u!==a.Reference||b(e)}if(e.hasOwnProperty(u)&&s){var c={chartType:i,hasSingleReference:n,unMentionedTuplesNumber:l};x(e,t,u,r,c)}})})};var T=function(e,t,a,r,u,s){a=a||{};var c=a.type===n.Criticality&&a.subType==="MeasureValues"&&!(a.qualifiedSettings&&a.qualifiedSettings.bMBC);var o=a.type===n.Gradation&&a.subType==="DelineatedMeasures";var f={};if(!u){f.plotArea={dataPointStyle:null}}if(!s){f.legend={title:{text:null,visible:e.indexOf("waterfall")>-1?true:false}}}else{f.legend={}}var p,d=true;if(r&&H(t)||c||o){var h=c||o?a.qualifiedSettings:null;j(t,h,f.plotArea,e);jQuery.extend(true,f.legend,l.getLegendProps(h))}else if(a.ruleGenerator){try{var v=a.ruleGenerator();jQuery.extend(true,f,v.properties);p=v.colorScale}catch(e){if(e instanceof i){e.display()}else{throw e}}}if(p){d=false}return{properties:f,scales:p?[p]:[],replaceColorScales:d}};function H(e){if(e){return e.some(function(e){return e.hasOwnProperty(a.Projected)||e.hasOwnProperty(a.Reference)})}return false}function N(e,t){var a;var r;if(e){r=e.slice(0);r.sort(function(e,t){return e.index>t.index?1:-1})}if(t.indexOf("combination")>-1&&e){var i=true;for(var n=0;n<r.length;n++){if(r[n].hasOwnProperty("projected")||r[n].hasOwnProperty("reference")){i=false;break}}var l=[];var u=[];if(!i){r.forEach(function(e){e.order.forEach(function(t){if(e.hasOwnProperty(t)){if(e.valueAxisID==="valueAxis"){l.push(t==="actual"?"bar":"line")}else{u.push(t==="actual"?"bar":"line")}}})})}else{return}a={plotArea:{dataShape:{primaryAxis:l,secondaryAxis:u}}}}return a}return{getTuples:function(e,t,a){return g(e,m(e,t),a)},getSemanticVizSettings:T,hasSemanticRelation:H,getSemanticSettingsForCombination:N}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/RoleFitter", ["sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/viz/ui5/controls/common/feeds/AnalysisObject","sap/chart/TimeUnitType","sap/chart/data/TimeDimension","sap/chart/utils/DateFormatUtil","sap/chart/utils/ChartUtils","sap/chart/utils/RoleMapper","sap/chart/ChartLog","sap/ui/model/type/String","sap/ui/thirdparty/jquery"],function(e,t,i,n,a,r,s,o,u,c,l,jQuery){"use strict";var f=function(){return sap.viz.vizservices.BVRService.suggestFeeds.apply(null,arguments)};var d=function(e,t){var i=sap.viz.vizservices.FeedService.validate(e,t);if(!i.valid){var n=i.results?i.results.bindings:null;if(n&&Object.keys(n).every(function(e){return n[e].allowMND&&(!n[e].missing||n[e].missing===1)&&!n[e].incorrect})){return{valid:true}}}return i};var m=[{types:"*",toViz:{"category|category2":"categoryAxis",series:"color","axis1|axis2|axis3|axis4":"valueAxis"}},{types:"column|bar|stacked_bar|stacked_column|line|combination|100_stacked_bar|100_stacked_column|stacked_combination|horizontal_stacked_combination",toViz:{}},{types:"scatter|bubble|time_bubble|timeseries_scatter|timeseries_bubble",toViz:{"category|category2":"@context",axis1:"valueAxis",axis2:"valueAxis2"}},{types:"bubble|time_bubble",toViz:{axis3:"bubbleWidth"}},{types:"pie|donut|100_donut",toViz:{"category|series|category2":"color","axis1|axis2|axis3|axis4":"size"}},{types:"bullet|vertical_bullet",toViz:{"axis1|axis2|axis3|axis4":"@semanticBulletMsrs"}},{types:"dual_combination|dual_horizontal_combination|dual_stacked_bar|100_dual_stacked_bar|dual_stacked_column|100_dual_stacked_column|dual_bar|dual_column|dual_line|dual_stacked_combination|dual_horizontal_stacked_combination",toViz:{axis1:"valueAxis","axis2|axis3|axis4":"valueAxis2"}},{types:"timeseries_line|timeseries_column|timeseries_combination|timeseries_stacked_column|timeseries_100_stacked_column",toViz:{category:"timeAxis"}},{types:"timeseries_scatter",toViz:{category:u,"axis2|axis3":false}},{types:"timeseries_bubble",toViz:{category:u,axis2:false,axis3:"bubbleWidth"}},{types:"dual_timeseries_combination",toViz:{category:"timeAxis",axis1:"valueAxis","axis2|axis3|axis4":"valueAxis2"}},{types:"heatmap",toViz:{category:"categoryAxis","category2|series":"categoryAxis2","axis1|axis2|axis3|axis4":"color"}},{types:"waterfall|horizontal_waterfall",toViz:{series:"waterfallType"}},{types:"timeseries_bullet",toViz:{"category|series":"timeAxis","axis1|axis2|axis3|axis4":"@semanticBulletMsrs"}},{types:"timeseries_waterfall",toViz:{"category|series":"timeAxis"}}].reduce(function(e,t){var i=Object.keys(t.toViz).reduce(function(e,i){i.split("|").forEach(function(n){e[n]=t.toViz[i];return e});return e},{});t.types.split("|").forEach(function(t){if(!e.hasOwnProperty(t)){e[t]=[]}e[t].push(i)});return e},{});var p=Object.keys(m).reduce(function(e,t){if(t!=="*"){e[t]=jQuery.extend.apply(null,[true,{}].concat(m["*"].concat(m[t])))}return e},{});function v(e,t,i){var n=typeof t==="function"?t:function(e){return e[t]};return e.reduce(function(e,t){var a=n(t),r=typeof i==="function"?i(t):t;if(a&&!e[a]){e[a]=[r]}else if(a){e[a].push(r)}return e},{})}function _(e,t){var i={},n;t.forEach(function(t){var a=t._sFixedRole||t.getRole();if(e.hasOwnProperty(a)){var r=e[a];if(r){if(typeof r==="function"){if(!n){n=new r}r=n.toFeedingId(t)}if(!i[r]){i[r]=[]}i[r].push(t)}}});return i}var g={from:i.fromLightWeightFmt,build:function(e){var t=[];jQuery.each(e.dims,function(e,i){t.push({id:e,type:"Dimension",values:i.map(y("Dimension"))})});jQuery.each(e.msrs,function(e,i){t.push({id:e,type:"Measure",values:i.map(y("Measure"))})});return t}};function y(e){return function(t){var i=t.getName();if(i==="MND"){return{id:"MND",type:"MND"}}var n={id:i,name:i,type:e};if(t instanceof r){n.dataType="Date"}return n}}function b(t,i){var n=t.getName(),a=t.getLabel(),o=t.getTextProperty(),u=t.getTextFormatter(),c=t.getDisplayText();var f={identity:n,name:a||n,value:"{"+n+"}"};if(typeof u==="function"){f.displayValue={formatter:u,parts:[{path:n,type:new l}]};if(o){f.displayValue.parts.push({path:o,type:new l})}}else if(c&&o){f.displayValue="{"+o+"}"}var d=new e(f);if(i&&t instanceof r){var m=s.getInstance(t.getTimeUnit());if(m){var p=m.parse.bind(m);var v=t._getIsUTC();d.getBindingInfo("value").formatter=function(e){return p(e,v)}}d.setDataType("Date");d._setTimeUnit(t.getTimeUnit())}return d}function x(e){var i=e.getName();var n=new t({identity:i,name:e.getLabel()||i,value:"{"+i+"}"});n._setUnitBinding(e.getUnitBinding());return n}function h(e,t){var i=sap.viz.api.metadata.Viz.get("info/"+e),n=v(i.bindings,"role"),a=v(t,"id"),r=n["layout.category"]||[],s=n["mark.color"]||[];if(r.length===0){return[]}else{var o=[];jQuery.each(r.concat(s),function(e,t){var i=a[t.id];if(i&&i.length>0){jQuery.each(i[0].values,function(e,t){o.push(t.id)})}});return o}}function z(e){return o.CONFIG.timeChartTypes.indexOf(e)>-1}function k(e){return e&&e.indexOf("bullet")>-1}function T(e){jQuery.each(e,function(e,t){if(t&&(t.getSemantics&&t.getSemantics()!=="actual"||t.getSemanticallyRelatedMeasures&&!jQuery.isEmptyObject(t.getSemanticallyRelatedMeasures()))){new c("error","Semantic Pattern"," Semantic pattern rule defined in invisible measures doesn't work.").display()}})}function D(e,t,i,n,a){var r=p[e];var s={dims:_(r,t),msrs:_(r,i)};if(k(e)){s.invisibleMsrs=a}else{T(a)}var l=null,f=null;if(s.dims["@context"]){l=s.dims["@context"];delete s.dims["@context"]}var d=false;if(!n){if(u.semantics.hasSemanticMeasures(s)){var m;if(o.CONFIG.nonSemanticPatternChartType.indexOf(e)===-1){m=new c("error","Semantic Pattern","Semantic pattern doesn't work when there is dataPointStyle or seriesStyle defined.");d=true}else{m=new c("error","Semantic Pattern",e+" doesn't support semantic pattern feature.");d=true}m.display()}}f=u.semantics.semanticPatternMsrs(s,e,d);l=(l||[]).concat(f.contexts);var v=g.build(s);v.contexts=l;v.semanticTuples=f.semanticTuples;return v}var V=[{chartTypes:"bar,column,line,combination,heatmap,bullet,vertical_bullet,stacked_bar,stacked_column,stacked_combination,horizontal_stacked_combination,dual_bar,dual_column,dual_line,dual_stacked_bar,dual_stacked_column,dual_combination,dual_horizontal_combination,dual_stacked_combination,dual_horizontal_stacked_combination,100_stacked_bar,100_stacked_column,100_dual_stacked_bar,100_dual_stacked_column,waterfall,horizontal_waterfall".split(","),feed:"categoryAxis"},{chartTypes:"donut,100_donut,pie,scatter,bubble".split(","),feed:"color"}];function w(e,t,i){var n,a;for(n=0;n<V.length;n++){if(V[n].chartTypes.indexOf(e)!==-1){a=V[n].feed;break}}var r=t.some(function(e){return e.id===a});if(!r){var s=f("info/"+e,t,[{id:"MND",type:"MND"}]).feedItems;t.splice(0,t.length);s.forEach(function(e){if(e.values.length>0){t.push(e)}});t=j(e,t)}for(n=0;n<t.length;n++){if(t[n].id===a&&t[n].type==="Dimension"){t[n].values=t[n].values.concat(i.map(function(e){return{id:e.getName(),name:e.getName(),type:"Dimension",inResult:true}}))}}return d("info/"+e,t)}function N(e){e.forEach(function(e){e._sFixedRole=e.getRole()})}function M(e,t,i){t.forEach(function(t){t.values.forEach(function(n){var a=i.filter(function(e){return e.getName()===n.id})[0];if(a){jQuery.each(p[e],function(e,i){if(i===t.id){a._sFixedRole=e;return false}})}})})}function O(e,t){var i=true;if(e.indexOf("timeseries_bullet")>-1){i=t.length>1&&t.every(function(e){return e.actual&&e.reference||e.projected&&e.reference})}else if(e.indexOf("timeseries_combination")>-1){i=t.length>0&&t.some(function(e){return e.projected||e.reference})}return i}function A(e,t,i,n,a,r,s){var o=t.concat(i).concat(n);N(o);var u=D(e,t,i,a,r);e=e.indexOf("donut")>-1?"donut":e;var c=d("info/"+e,u);var l=u.contexts,f=u.semanticTuples,m=[];if(!c.valid){if(e.indexOf("dual_timeseries_combination")>-1){u.contexts=[]}u=E(e,c,u,t,i);c=d("info/"+e,u);M(e,u,o);if(a){if(O(e,f)){u=D(e,t,i,a,r);l=u.contexts;f=u.semanticTuples}}}else{M(e,u,o)}if(f){m=f.filter(function(e){return e.projectedValueStartTime})}if(c.valid&&n&&n.length>0){var p=v(t,function(e){return e.getName()});w(e,u,n.filter(function(e){return!p[e.getName()]}))}var _=u.reduce(function(e,t){t.values.forEach(function(t){e[t.id]=true});return e},{});var y=g.from(u);if(l){l.forEach(function(e){_[e.getName()]=true});y._context=l.map(function(e){var t=e.getName();var i=true;for(var n=0;n<m.length;n++){if(t===m[n].actual||t===m[n].projected){i=false;break}}return{id:t,showInTooltip:i}})}y._unused=F(u,t,i).filter(function(e){return!_[e]});y._def=I(t,c.valid?n:[],i,_,f,z(e));if(s){y._def.dim.forEach(function(e){e.setBindingContext(null)});y._def.msr.forEach(function(e){e.setBindingContext(null)})}y._order=h(e,u);y._valid=c.valid;y._semanticTuples=f;return y}function S(e){return v(sap.viz.api.metadata.Viz.get("info/"+e).bindings,"id")}function j(e,t,i){i=i||S(e);t.forEach(function(e){e.type=i[e.id][0].type});return t}function E(e,t,i,n,a){var r=S(e),s=false,o=false;var u=t.results.bindings;Object.keys(u).forEach(function(e){if(!r[e]){return}if(r[e][0].type==="Measure"){o=true}if(r[e][0].type==="Dimension"&&!(u[e].allowMND&&(!u[e].missing||u[e].missing===1))){s=true}});var c=i.filter(function(e){return!(e.type==="Dimension"?s:o)}),l=c.reduce(function(e,t){(t.values||[]).forEach(function(t){e[t.id]=true});return e},{});if(i.contexts){i.contexts.forEach(function(e){l[e.getName()]=true})}var d=n.map(y("Dimension")),m=a.map(y("Measure"));var p=f("info/"+e,c,d.concat(m).filter(function(e){return!l[e.id]})).feedItems;j(e,p,r);return p}function F(e,t,i){var n=e.reduce(function(e,t){t.values.forEach(function(t){e[t.id]=true});return e},{});return t.concat(i).filter(function(e){return!n[e.getName()]}).map(function(e){return e.getName()})}function I(e,i,n,a,o,u){var c;if(u){var l;for(var f=0;f<e.length;f++){if(e[f]instanceof r){l=e[f];break}}c=s.getInstance(l.getTimeUnit())}return{dim:e.reduce(function(e,t){if(a[t.getName()]){e.push(b(t,u))}return e},[]).concat(i.map(function(e){var t=b(e);t._setInResult(true);return t})),msr:n.reduce(function(e,t){if(a[t.getName()]){e.push(x(t))}return e},[]).concat((o||[]).reduce(function(e,i){if(i.timeAxis&&i.projectedValueStartTime){e.push(new t({identity:i.actual+"-"+i.projected,name:(i.labels&&i.labels.actual||i.actual)+"-"+(i.labels&&i.labels.projected||i.projected),value:{parts:[i.timeAxis,i.actual,i.projected],formatter:function(e){var t=e,n;if(e&&e.length>1){var a=e[0];if(a){if(c){var r=c.parse(a);if(r){n=r.getTime()}}else{n=new Date(a).getTime()}if(n&&n<i.projectedValueStartTime){t=e[1]}else{t=e[2]}}}return t}}}))}return e},[]))}}return{fit:A,compatible:function(e,t,i){var n="info/"+e,a={used:{},error:null,compatible:true};var r=D(e,t,i),s=d(n,r);if(!s.valid){r=E(e,s,r,t,i);s=d(n,r);a.needFix=true}if(s.valid){a.used=v(r,function(e){return e.type},function(e){return e.values.filter(function(e){return e.type==="Dimension"||e.type==="Measure"}).map(function(e){return e.id})});jQuery.each(a.used,function(e,t){a.used[e]=t.reduce(function(e,t){return e.concat(t)},[])})}else{a.compatible=false;var o=sap.viz.api.metadata.Viz.get(n).bindings,u=v(o,"type",function(e){return e.id}),c={dim:0,msr:0,time:0};jQuery.each(s.results.bindings,function(e,t){if(!t.missing){return}if(u.Dimension.indexOf(e)!==-1&&!(t.allowMND&&t.missing===1)){c[e==="timeAxis"?"time":"dim"]+=t.missing}else if(u.Measure.indexOf(e)!==-1){c.msr+=t.missing}});a.error={missing:c}}return a}}});
/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/RoleMapper", ["sap/chart/data/TimeDimension","sap/chart/utils/MeasureSemanticsUtils","sap/chart/utils/ChartUtils","sap/chart/utils/DateFormatUtil","sap/chart/data/MeasureSemantics","sap/chart/ChartLog","sap/ui/thirdparty/jquery"],function(e,t,a,r,i,s,jQuery){"use strict";function n(e){this._bTimeFed=false}n.prototype.toFeedingId=function(t){if(t instanceof e&&!this._bTimeFed){this._bTimeFed=true;return"timeAxis"}else{return"@context"}};function u(e){return a.CONFIG.timeChartTypes.indexOf(e)>-1}function c(e,t,a){var r={actualValues:[],targetValues:[]};jQuery.each(e,function(e,a){if(a.actual){r.actualValues.push(t[a.actual]);a.valueAxisID="actualValues"}if(a.projected){r.actualValues.push(t[a.projected]);a.valueAxisID="actualValues"}if(a.reference){if(a.actual||a.projected){r.targetValues.push(t[a.reference]);a.valueAxisID="targetValues"}else{r.actualValues.push(t[a.reference]);a.valueAxisID="actualValues"}}});delete a["@semanticBulletMsrs"];jQuery.extend(a,r)}function l(e,t){var a=t["@semanticBulletMsrs"];if(a){var r={actualValues:[]};for(var i=0;i<a.length;i++){r.actualValues.push(a[i])}for(var i=0;i<e.length;i++){e[i].valueAxisID="actualValues"}delete t["@semanticBulletMsrs"];jQuery.extend(t,r)}}n.semantics={hasSemanticMeasures:function(e){return Object.keys(e.msrs).some(function(t){var a=false;var r=e.msrs[t];a=r.some(function(e){if(e.getSemantics){var t=e.getSemantics();return t&&t!=="actual"}});return a})},semanticPatternMsrs:function(e,a,i){var n=[],o=[],f={},m,d;var h=u(a)&&(e.dims.timeAxis&&e.dims.timeAxis.length===1);var p;var v;if(h){var g=e.dims.timeAxis[0];p=g.getProjectedValueStartTime&&g.getProjectedValueStartTime();if(p){var x=g.getTimeUnit();if(x==="fiscalyearperiod"||x==="fiscalyear"){v=p}else{var j=r.getInstance(x);if(j){if(j.parse(p)){v=j.parse(p).getTime()}}else{v=new Date(p).getTime()}}}}var O=["valueAxis","valueAxis2"];var y=Object.keys(e.msrs).sort(function(e,t){return O.indexOf(e)-O.indexOf(t)});var S=this.hasSemanticMeasures(e);y.forEach(function(r){var u=e.msrs[r],c;d=null;jQuery.extend(true,f,u.reduce(function(e,t){e[t.getName()]=t;return e},{}));if(a&&a.indexOf("bullet")>-1&&e.invisibleMsrs){c=e.invisibleMsrs.filter(function(e){return e.getSemantics()==="actual"&&e.getSemanticallyRelatedMeasures()})}if(jQuery.isEmptyObject(e.dims)){d=new s("error","Semantic Pattern","Semantic Pattern doesn't work when there is no dimension.");i=i||true}else if(e.dims.color&&e.dims.color.length>0){d=new s("error","Semantic Pattern","Semantic pattern doesn't work when there is series dimension.");i=i||true}var l;l=t.getTuples(u,c,i);if(a&&(a.indexOf("stacked_column")>-1||a.indexOf("stacked_bar")>-1)){var o=false;if(h&&p){if(!v){d=new s("error","Semantic Pattern","The value of projectedValueStartTime is invalid.");d.display();o=true}for(var m=0;m<l.length;m++){if(l[m].hasOwnProperty("actual")){if(!l[m].hasOwnProperty("projected")){o=true;break}if(l[m].hasOwnProperty("reference")){o=true;break}}else{o=true;break}}}else{var g="";if(l[0].hasOwnProperty("actual")){g="actual"}else if(l[0].hasOwnProperty("projected")){g="projected"}else if(l[0].hasOwnProperty("reference")){g="reference"}if(g==="projected"||g==="reference"){for(var m=0;m<l.length;m++){if(!l[m].hasOwnProperty(g)){o=true;break}}}else{for(var m=0;m<l.length;m++){if(l[m].hasOwnProperty("projected")||l[m].hasOwnProperty("reference")){o=true;break}}}}if(a.indexOf("dual")>-1&&y.length<=1){o=false}if(o){d=new s("error","Semantic Pattern","Actual, forecast or target can't be stacked in one bar or column.");i=true;l=t.getTuples(u,c,i)}}l.forEach(function(e){e.valueAxisID=r});if(S&&i&&d){d.display()}n=n.concat(l)});if(a&&a.indexOf("bullet")>-1){h=h&&n.some(function(e){return e.actual&&e.projected});m=n.some(function(e){return e.actual&&e.projected||e.actual&&e.reference||e.projected&&e.reference});if(m&&!h){c(n,f,e.msrs)}else{l(n,e.msrs)}}if(!i&&h){d=null;var w=[];var b=function(e){var t=w.indexOf(e.getName())===-1;if(!t){o.push(e)}return t};for(var P=0;P<n.length;P++){var T=n[P];if(p){if(v){var V=e.msrs[T.valueAxisID];if(T.actual&&T.projected){T.timeAxis=e.dims.timeAxis[0].getName();T.projectedValueStartTime=v;T.semanticMsrName=T.actual+"-"+T.projected;w.push(T.actual);w.push(T.projected);V.push(f[T.actual].clone().setName(T.semanticMsrName));if(n.length===1&&a.indexOf("combination")>-1){d=new s("error","Semantic Pattern","Do not satisfy the minimum number of measure to work "+"with Projected Value Start Time in Time Series Combination.")}}e.msrs[T.valueAxisID]=V.filter(b)}else{d=new s("error","Semantic Pattern","The value of projectedValueStartTime is invalid.")}}}if(d){d.display()}}if(n.length>0&&!i){var A=[];var M=["actual","projected","semanticMsrName","reference"];n.forEach(function(e){for(var t=0;t<M.length;t++){if(e[M[t]]){A.push(e[M[t]])}}});jQuery.each(e.msrs,function(t){e.msrs[t].sort(function(e,t){return A.indexOf(e.getName())-A.indexOf(t.getName())})})}return{semanticTuples:n,contexts:o}}};return n});
/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/SelectionAPIUtils", ["sap/ui/thirdparty/jquery"],function(jQuery){"use strict";function e(e){return e.reduce(function(e,t){e[t]=true;return e},{})}function t(t,n){var r=e(t);function i(e){return n.reduce(function(t,n){if(e.hasOwnProperty(n)){t[n]=e[n]}return t},{})}return function(e,t){return e.filter(function(e){return r[e]}).map(function(e){var n=i(t);n[e]="*";return{data:n}})}}function n(e){var t={data:{}},n=e.measures,r=e.dimensions;if(n){t.data.measureNames=n instanceof Array?{in:n}:n}jQuery.each(r||{},function(e,n){t.data[e]=n instanceof Array?{in:n}:n});return t}function r(e){var t=e.data;return Object.keys(t).reduce(function(e,n){var r=t[n];if(r.in&&r.in instanceof Array){r=r.in}if(n==="measureNames"){e.measures=r}else if(!e.dimensions){e.dimensions={};e.dimensions[n]=r}else{e.dimensions[n]=r}return e},{})}function i(e,n,r,i){var a=t(e,n);return i.reduce(function(e,t){var n=r.getContexts(t.index,1);if(n.length>0){e=e.concat(a(t.measures,n[0].getObject()))}return e},[])}function a(e,t){return Object.keys(e).filter(function(e){return t.indexOf(e)!==-1})}function u(e,t,n){if(e){var r,i;for(i in e){if(e.hasOwnProperty(i)&&n.data[i]){var a=e[i];r=n.data[a.timeAxis]<a.projectedValueStartTime?a.projected:a.actual}}if(r){n.measures=n.measures.filter(function(e){return e!==r});if(n.dataName){n.dataName=Object.keys(n.dataName).reduce(function(e,r,i){if(t.indexOf(r)!==-1){e[r]=n.dataName[r]}return e},{});if(jQuery.isEmptyObject(n.dataName)){delete n.dataName}}}else{var u=[];for(var s in e){if(e.hasOwnProperty(s)){i=e[s];u.push(i.actual);u.push(i.projected)}}n.measures=n.measures.filter(function(e){return u.indexOf(e)===-1})}}}return{makeLookUp:e,toVizCtx:t,toVizCSCtx:n,fromVizCSCtx:r,buildSelectionVizCtx:i,filterVisibleMsr:a,filterSemMsr:u,match:function(e,t,n){return Object.keys(e).every(function(r){if(n.indexOf(r)!==-1){return t.hasOwnProperty(r)}else{return e[r]===t[r]}})}}});
/*
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.predefine("sap/chart/utils/ValueAxisScaleUtils", ["sap/chart/AutoScaleMode","sap/chart/ScaleBehavior","sap/chart/ChartLog","sap/chart/utils/ChartUtils"],function(e,i,a,t){"use strict";var m={};m.getValueAxisScaleSetting=function(m,s,r,u){var n=r.filter(function(e){return u.indexOf(e.getName())!==-1});var l,o,f={};n.forEach(function(e){o=e.getName();l=e._getFixedRole();if(l==="axis1"||l==="axis2"){if(!f[l]){f[l]={measures:[],min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}}f[l].measures.push(o)}});var c,x=s&&s.scaleBehavior===i.FixedScale,S=t.isStackedLikeChart(m)&&n.length>1,h=s&&s.fixedScaleSettings&&s.fixedScaleSettings.measureBoundaryValues||{};if(x){if(S){var g=s&&s.fixedScaleSettings&&s.fixedScaleSettings.stackedMultipleMeasureBoundaryValues||[];if(g&&g.length>0){var v=function(e){return g.filter(function(i){return i.measures&&i.measures.length>0&&i.measures.sort().toString()===e.measures.sort().toString()})};for(var d in f){if(f.hasOwnProperty(d)){var p=f[d];var y=v(p);if(y&&y.length>0){c=y[y.length-1].boundaryValues;if(c&&(isFinite(c.minimum)&&typeof c.minimum=="number")||isFinite(c.maximum)&&typeof c.maximum=="number"){p.min=c.minimum;p.max=c.maximum}}}}}}else{n.forEach(function(e){l=e._getFixedRole();if(l==="axis1"||l==="axis2"){o=e.getName();c=h[o];if(!c||!(isFinite(c.minimum)&&typeof c.minimum=="number")||!(isFinite(c.maximum)&&typeof c.maximum=="number")){f[l].min=Number.NEGATIVE_INFINITY;f[l].max=Number.POSITIVE_INFINITY}else{if(f[l].min>c.minimum){f[l].min=c.minimum}if(f[l].max<c.maximum){f[l].max=c.maximum}}}})}}x=false;var I=[],N=t.isBulletChart(m);for(var d in f){if(f.hasOwnProperty(d)){var p=f[d];var b=!(isFinite(p.min)&&typeof p.min=="number"&&isFinite(p.max)&&typeof p.max=="number");var F=d==="axis1"?"valueAxis":"valueAxis2";if(N){F="actualValues"}if(b){if(s&&s.scaleBehavior===i.FixedScale){new a("error","Chart.ValueAxisScale",F+" was switched to auto scale, because minimum or maximum value is missing in measure").display()}}else if(p.min>p.max){new a("error","Chart.ValueAxisScale",F+" was switched to auto scale, because minimum value exceeds maximum value").display()}else{x=true}I.push({feed:F,type:"linear",min:b?"auto":p.min,max:b?"auto":p.max})}}var V={};if(!x){var A=true,w=false;if(s&&s.autoScaleSettings&&s.autoScaleSettings.zeroAlwaysVisible===false){A=false}if(s&&s.autoScaleSettings&&s.autoScaleSettings.syncWith===e.VisibleData){w=true}V={plotArea:{adjustScale:!A},interaction:{syncValueAxis:w}}}return{scale:I,property:V}};return m});
sap.ui.require.preload({
	"sap/chart/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.chart","type":"library","embeds":[],"applicationVersion":{"version":"1.120.3"},"title":"Smart viz control based on Vizframe","description":"Smart viz control based on Vizframe","ach":"BI-CVM","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":[]},"sap.ui5":{"dependencies":{"minUI5Version":"1.120","libs":{"sap.ui.core":{"minVersion":"1.120.3"},"sap.viz":{"minVersion":"1.120.3"}}},"library":{"i18n":false,"css":false,"content":{"controls":["sap.chart.Chart"],"elements":["sap.chart.data.Dimension","sap.chart.data.TimeDimension","sap.chart.data.HierarchyDimension","sap.chart.data.Measure"],"types":["sap.chart.data.MeasureSemantics"],"interfaces":[]}}}}'
});
//# sourceMappingURL=library-preload.js.map
