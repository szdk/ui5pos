/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/odata/ComboBox","sap/m/ComboBoxRenderer","sap/ui/comp/util/FormatUtil"],function(e,t,r){"use strict";var i="00000000-0000-0000-0000-000000000000";function s(e){return e===i}var a=e.extend("sap.ui.comp.smartfield.ComboBox",{metadata:{library:"sap.ui.comp",properties:{selectedKey:{type:"string",group:"Data",defaultValue:null},enteredValue:{type:"string",group:"Data",defaultValue:null},realValue:{type:"string",group:"Data",defaultValue:null},valueTextArrangement:{type:"string",group:"Misc",defaultValue:""}}},renderer:t});a.prototype.init=function(){e.prototype.init.apply(this,arguments);this.attachChange(function(){var e=this._getValue();if(this.getItemByKey(e)){this.setSelectedKey(e)}this.setProperty("realValue",e)}.bind(this))};a.prototype.onBeforeRendering=function(){e.prototype.onBeforeRendering.apply(this,arguments);this._processValueTextArrangement();this._synchronize()};a.prototype._processValueTextArrangement=function(){var e,t,i,s,a,l,n,u,o=this.getValueTextArrangement();i=this.getSelectedKey();s=this.getItemByKey(""+i);e=s&&s.getBinding("text");if(o&&s&&i!==""&&e&&Array.isArray(e.aBindings)){n=e.aBindings[0];l=e.aBindings[1];t=n&&n.getValue();a=l&&l.getValue();if(i!==t){return}u=r.getFormattedExpressionFromDisplayBehaviour(o,t,a);this.setValue(u)}};a.prototype._synchronize=function(){var e=this.getSelectedKey(),t=this.getKeys(),r=this.getItemByKey(""+e);if(r&&(e!==""||t.indexOf(e)!==-1)&&e===this.getValue()){this.setAssociation("selectedItem",r,true);this._setPropertyProtected("selectedItemId",r.getId(),true);this.setProperty("enteredValue",e);this.setProperty("realValue",e);this.setValue(r.getText());this._sValue=this.getValue()}};a.prototype.validateProperty=function(t,r){if(r===null&&(t==="enteredValue"||t==="selectedItemId"||t==="selectedKey"||t==="realValue"||t==="value")){return r}return e.prototype.validateProperty.apply(this,arguments)};a.prototype.setRealValue=function(e){if(e===null||s(e)){this.setValue("")}else{this.setValue(e)}this.setSelectedKey(e);return this.setProperty("realValue",e)};a.prototype.setEnteredValue=function(e){var t,r=this.getSelectedItem();if(typeof e!=="undefined"){this.setSelectedKey(e)}if(e&&!r&&!s(e)){this.setValue(e)}t=this._getValue();this.setProperty("enteredValue",t);return this};a.prototype._getValue=function(){var e,t=this.getSelectedKey(),r=this.getSelectedItem();if(r&&t!==null){e=t}else if(t===null&&this.getValue()===""){e=t}else{e=this.getValue()}return e};a.prototype.shouldResetSelection=function(e){var t=this.getKeys(),r=t.length===0||t.indexOf(e)!==-1;return e===this.getMetadata().getProperty("selectedKey").defaultValue||!r};return a});
//# sourceMappingURL=ComboBox.js.map