/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/smarttable/flexibility/Utils","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/core/Core","sap/ui/base/ManagedObjectMetadata"],function(e,t,r,a){"use strict";var o={};function n(e){var t=e.getMetadata().getName();var r=t.slice(t.lastIndexOf(".")+1)+" - ";if(e.getText&&e.getText()){r=r+e.getText()}else if(e.getTooltip_AsString&&e.getTooltip_AsString()){r=r+e.getTooltip_AsString()}else{r=r+e.getId()}return r}function s(e,t){var r=[];for(var o=0;o<e.length;o++){if(!e[o].hasStyleClass("sapUiCompSmartTableToolbarContent")&&e[o]!=t._oSeparator&&!a.isGeneratedId(e[o].getId())){r.push(e[o])}}return r}o.isEnabled=function(e){var t=e.getCustomToolbar();if(t&&!t.hasStyleClass("sapUiCompSmartTableToolbar")){var r=s(t.getContent(),e);return r.length>2}return false};o.handleToolbarSettings=function(t,a){return new Promise(function(o,l){sap.ui.require(["sap/m/p13n/Popup","sap/m/p13n/SelectionPanel"],function(i,u){var p=[];var T=[];var c=t.getCustomToolbar();var g=s(c.getContent(),t);var f=e.getAppComponentForControl(t)||null;for(var d=0;d<g.length;d++){var C=e.getSelectorForControl(g[d],f);p.push({visible:true,name:C.id,label:n(g[d]),selector:C});T.push(C)}var v=new u({title:r.getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_RTA_REARRANGE_TOOLBAR_CONTENT_TABLE_TITLE"),enableCount:false,showHeader:false});var b=new i({title:r.getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_RTA_REARRANGE_TOOLBAR_CONTENT_TITLE"),close:function(e){var r=e.getParameter("reason");if(r==="Cancel"){b.destroy();l();return}p=v.getP13nData();b.destroy();var a=false;var n=[];for(var s=0;s<p.length;s++){n.push(p[s].selector);if(T[s].id!=n[s].id){a=true}}if(a){o([{selectorControl:t,changeSpecificData:{changeType:"ToolbarContentMove",content:{order:n}}}])}else{l()}},panels:[v]});v.getSelectedFields=function(){var e=[];this._loopItems(this._oListControl,function(t,r){e.push(r)});return e};v._oListControl.setMode("None");v.setP13nData(p);b.open(c);b.addStyleClass(a.styleClass)})})};return o});
//# sourceMappingURL=ToolbarContentMoveHandler.js.map