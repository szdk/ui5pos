/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["./ODataType","sap/ui/comp/odata/FiscalMetadata","sap/ui/model/odata/AnnotationHelper","sap/m/library","sap/base/Log","sap/ui/comp/odata/CalendarMetadata"],function(e,t,i,n,a,o){"use strict";var r={"com.sap.vocabularies.Common.v1.FilterExpressionType/SingleInterval":"interval","com.sap.vocabularies.Common.v1.FilterExpressionType/MultiValue":"multi-value","com.sap.vocabularies.Common.v1.FilterExpressionType/SingleValue":"single-value"};var s={"com.sap.vocabularies.UI.v1.SelectionRangeOptionType/EQ":"EQ","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/BT":"BT","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/CP":"CP","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/LE":"LE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/GE":"GE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NE":"NE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NB":"NB","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NP":"NP","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/GT":"GT","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/LT":"LT"};var l={"com.sap.vocabularies.UI.v1.SelectionRangeSignType/I":"I","com.sap.vocabularies.UI.v1.SelectionRangeSignType/E":"E"};var u=n.P13nConditionOperation;var p=function(e){if(typeof e==="object"){this.oModel=e}else{this._sResourceRootUri=e}this._oMetadata=null;if(!this.oModel&&this._sResourceRootUri){a.error("Analyzing metadata cannot be done without an ODataModel!");return}if(this.oModel){this._oMetaModel=this.oModel.getMetaModel()}if(this._oMetaModel){this._oMetadata=this._oMetaModel.getProperty("/")}if(this._oMetadata&&this._oMetadata.dataServices){this._oSchemaDefinition=this._oMetadata.dataServices.schema[0]}};p.hierarchyType={nodeFor:1,nodeExternalKeyFor:2,parentNodeFor:3,levelFor:4,drillStateFor:5,nodeDescendantCountFor:6};p.prototype.getNamespace=function(){if(this._oSchemaDefinition){return this._oSchemaDefinition.namespace}};p.prototype.getSchemaDefinition=function(){return this._oSchemaDefinition};p.prototype.getEntityContainerAttribute=function(e){var t=null,i;if(this._oMetaModel&&e){if(e.indexOf("sap:")<0){e="sap:"+e}i=this._oMetaModel.getODataEntityContainer();t=i[e]||null}return t};p.prototype.getEntityLabelByEntityTypeName=function(e){var t=this._getEntityDefinition(e),i,n="";if(t){i=t["com.sap.vocabularies.Common.v1.Label"];if(i&&i.String){n=i.String}}return n};p.prototype._getEntityDefinition=function(e){var t=null;if(e){t=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(e))}return t};p.prototype._getComplexTypeDefinition=function(e){var t=null;if(e){t=this._oMetaModel.getODataComplexType(this._getFullyQualifiedNameForEntity(e))}return t};p.prototype._getNameOfPropertyUsingComplexType=function(e,t){var i;if(this._oSchemaDefinition){i=this._oSchemaDefinition.namespace}if(e&&t&&i){var n=i+"."+t;var a=this._getEntityDefinition(e);if(a){var o=a.property;if(o&&o.length){var r=0;for(r=0;r<o.length;r++){var s=o[r];if(s&&s.type===n){return s.name}}}}}return null};p.prototype.removeNamespace=function(e){var t,i=e;if(e){t=e.lastIndexOf(".")+1}if(t>0){i=e.substring(t)}return i};p.prototype.getEntityTypeNameFromEntitySetName=function(e){var t=null,i=null;if(this._oMetaModel){t=this._oMetaModel.getODataEntitySet(e);if(t){i=t.entityType}}return i};p.prototype.getEntitySetNameFromEntityTypeName=function(e){var t,i,n,a,o,r;if(this._oMetaModel&&e){t=this._getFullyQualifiedNameForEntity(e);i=this._oMetaModel.getODataEntityContainer();if(i&&t){n=i.entitySet;o=n.length;for(a=0;a<o;a++){r=n[a];if(r.entityType===t){break}r=null}if(r){return r.name}}}return null};p.prototype.getKeysByEntitySetName=function(e){var t=null,i=null;if(!this._oMetaModel){return undefined}i=this.getEntityTypeNameFromEntitySetName(e);if(i){t=this.getKeysByEntityTypeName(i)}return t};p.prototype.getKeysByEntityTypeName=function(e){var t=null,i=null,n,a=0,o=null;if(!this._oMetaModel){return undefined}o=this._getEntityDefinition(e);if(o){if(o.key){i=o.key.propertyRef;if(i){a=i.length;t=[];for(n=0;n<a;n++){t.push(i[n].name)}}}}return t};p.prototype.getFieldsByEntitySetName=function(e){var t=null,i,n=null;if(!this._oMetaModel){return undefined}i=this._oMetaModel.getODataEntitySet(e);if(i){n=i.entityType}if(n){t=this.getFieldsByEntityTypeName(n);this._enrichEntitySetMetadata(t,i)}return t};p.prototype._enrichEntitySetMetadata=function(e,t){var i,n,a,o,r,s;a=this._getNonSortableFields(t);o=this._getNonFilterableFields(t);r=this._getRequiredFilterFields(t);s=this._getFilterExpressionRestriction(t);i=e.length;while(i--){n=e[i];n.sortable=!(a.indexOf(n.name)>-1);n.filterable=!(o.indexOf(n.name)>-1);n.requiredFilterField=r.indexOf(n.name)>-1;n.filterRestriction=s[n.name]}};p.prototype._extractPropertyPathsFromAnnotation=function(e,t){var i=[],n,a,o;if(e&&t){n=e[t]}if(n){a=n.length;while(a--){o=n[a].PropertyPath;if(o){i.push(o)}}}return i};p.prototype._getNonSortableFields=function(e){var t;if(e){t=e["Org.OData.Capabilities.V1.SortRestrictions"]}return this._extractPropertyPathsFromAnnotation(t,"NonSortableProperties")};p.prototype._getNonFilterableFields=function(e){var t;if(e){t=e["Org.OData.Capabilities.V1.FilterRestrictions"]}return this._extractPropertyPathsFromAnnotation(t,"NonFilterableProperties")};p.prototype._getRequiredFilterFields=function(e){var t;if(e){t=e["Org.OData.Capabilities.V1.FilterRestrictions"]}return this._extractPropertyPathsFromAnnotation(t,"RequiredProperties")};p.prototype._getFilterExpressionRestriction=function(e){var t={},i,n,a,o,s;if(e){var l=e["Org.OData.Capabilities.V1.FilterRestrictions"];if(l){i=l["FilterExpressionRestrictions"];if(i){for(var u=0;u<i.length;u++){o=i[u].Property;s=i[u].AllowedExpressions;if(s&&s.String){switch(s.String){case"SingleValue":t[o.PropertyPath]="single-value";break;case"MultiValue":t[o.PropertyPath]="multi-value";break;case"SingleRange":t[o.PropertyPath]="interval";break;case"SearchExpression":t[o.PropertyPath]="search-expression";break;default:}}}}}if(i==undefined){i=e["com.sap.vocabularies.Common.v1.FilterExpressionRestrictions"];if(i){n=i.length;while(n--){a=i[n];if(a){o=a.Property;s=a.AllowedExpressions;if(o&&s&&o.PropertyPath&&s.EnumMember){t[o.PropertyPath]=r[s.EnumMember]}}}}}}return t};p.prototype._isFilterable=function(e,t){var i,n=true;if(t){i=this._getNonFilterableFields(t);n=!(i.indexOf(e.name)>-1)}if(n){n=!(e["sap:filterable"]==="false")}return n};p.isHiddenFilter=function(e){return!!e["com.sap.vocabularies.UI.v1.HiddenFilter"]&&p.isTermDefaultTrue(e["com.sap.vocabularies.UI.v1.HiddenFilter"])};p.isHidden=function(e){return!!e["com.sap.vocabularies.UI.v1.Hidden"]&&p.isTermDefaultTrue(e["com.sap.vocabularies.UI.v1.Hidden"])};p.prototype.getFieldsByEntityTypeName=function(e){var t;if(!this._oMetaModel){return undefined}t=this._getEntityDefinition(e);return this._getFieldsByEntityDefinition(t)};p.prototype.getFieldsByComplexTypeName=function(e,t){var i;if(!this._oMetaModel){return undefined}i=this._getComplexTypeDefinition(e);return this._getFieldsByEntityDefinition(i,t)};p.prototype.getAllEntityTypeNames=function(){if(!this._oMetaModel){return undefined}var e=this._oSchemaDefinition;if(e.entityType&&e.entityType.length>0){var t=0;var i=[];for(t=0;t<e.entityType.length;t++){i.push(e.entityType[t].name)}return i}return null};p.prototype.getFieldSemanticObjectMap=function(e){var t=this.getFieldsByEntitySetName(e);if(!t){return null}var i={},n,a=t.length;for(n=0;n<a;n++){var o=t[n];var r=this.getSemanticObjectAnnotation(o.fullName);if(r&&r.semanticObject){i[o.name]=r.semanticObject}}return i};p.prototype._getFieldsByEntityDefinition=function(e,t){var i=null,n=null,a=0,o=0,r,s;if(e){n=e.property}if(n){i=[];o=n.length;for(a=0;a<o;a++){r=n[a];if(r){s=this._parseV4PropertyAnnotations(r,e,t);this._determineHierarchyInformation(s,r);this._determineFilterAndSortInformation(s,r,null);i.push(s)}}}return i};p.prototype.getPropertyContextByPath=function(e){var t,i,n,a,o;if(e&&this._oMetaModel){t=e.split("/");i=this._oMetaModel.getODataEntityType(t[0])||this._oMetaModel.getODataComplexType(t[0]);n=t[1];a=this._oMetaModel.getODataProperty(i,n,true);if(a){o=this._oMetaModel.createBindingContext(a)}}return o};p.getDisplayFormat=function(e){var t=e["sap:display-format"];if(t){return t}};p.isCalendarDate=function(e){return p.isPropertyStringType(e)&&p.isTermDefaultTrue(e["com.sap.vocabularies.Common.v1.IsCalendarDate"])};p.isFiscalDate=function(e){return t.isFiscalValue(e)};p.isCalendarType=function(e){return o.isCalendarValue(e)};p.getTimezonePropertyPath=function(e){if(e["type"]!=="Edm.DateTimeOffset"){return undefined}var t=e["com.sap.vocabularies.Common.v1.Timezone"];return t?t.Path:undefined};p.getIsTimezoneProperty=function(e){if(e["type"]!=="Edm.String"){return undefined}return e["com.sap.vocabularies.Common.v1.IsTimezone"]&&e["com.sap.vocabularies.Common.v1.IsTimezone"].Bool!=="false"};p.hasValueListRelevantQualifiers=function(e){var t=false;if(e&&e["com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"]){t=true}return t};p.getAggregationRole=function(e){if(e["com.sap.vocabularies.Analytics.v1.Dimension"]){return"dimension"}if(e["com.sap.vocabularies.Analytics.v1.Measure"]){return"measure"}return undefined};p.getLinkDisplayFormat=function(e){if(p.isEmailAddress(e)){return"EmailAddress"}if(p.isPhoneNumber(e)){return"PhoneNumber"}if(p.isURL(e)){return"URL"}return""};p.getValueListMode=function(e){if(p.isValueListWithFixedValues(e)){return"fixed-values"}var t=e["sap:value-list"];if(t){return t}return""};p.isTermTrue=function(e){return!!e&&e.Bool==="true"};p.isPropertyStringType=function(e){return!!e&&e.type==="Edm.String"};p.isTermDefaultTrue=function(e){if(e){return e.Bool?e.Bool!=="false":true}return false};p.isNullable=function(e){return!(e&&e.nullable==="false")};p.isSkippingMeasuredQuantityCheck=function(e){var t="com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasuredQuantity";return p.isTermTrue(e[t])};p.isDigitSequence=function(e){return p.isPropertyStringType(e)&&p.isTermDefaultTrue(e["com.sap.vocabularies.Common.v1.IsDigitSequence"])};p.isUpperCase=function(e){return p.isPropertyStringType(e)&&p.isTermDefaultTrue(e["com.sap.vocabularies.Common.v1.IsUpperCase"])};p.isEmailAddress=function(e){return p.isPropertyStringType(e)&&p.isTermDefaultTrue(e["com.sap.vocabularies.Communication.v1.IsEmailAddress"])};p.isPhoneNumber=function(e){return p.isPropertyStringType(e)&&p.isTermDefaultTrue(e["com.sap.vocabularies.Communication.v1.IsPhoneNumber"])};p.isURL=function(e){return p.isPropertyStringType(e)&&(p.isTermDefaultTrue(e["Org.OData.Core.V1.IsURL"])||p.isTermDefaultTrue(e["Org.OData.Core.V1.IsUrl"]))};p.isValueList=function(e){var t="com.sap.vocabularies.Common.v1.ValueList";return!!(e&&(e["sap:value-list"]||e[t]))};p.isRecommendationList=function(e){return!!(e&&e["com.sap.vocabularies.UI.v1.RecommendationList"])};p.isCurrencyCode=function(e){return!!(e&&e["sap:semantics"]==="currency-code")};p.isUnitOfMeasure=function(e){return!!(e&&e["sap:semantics"]==="unit-of-measure")};p.isValueListWithFixedValues=function(e){var t="com.sap.vocabularies.Common.v1.ValueListWithFixedValues";return p.isTermTrue(e[t])};p.hasImportance=function(e){return!!(e&&e["com.sap.vocabularies.UI.v1.Importance"])};p.prototype._parseProperty=function(e,t,i){var n=this._parseV4PropertyAnnotations(e,t,i);this._determineHierarchyInformation(n,e);this._determineFilterAndSortInformation(n,e,null);return n};p.prototype._parseV4PropertyAnnotations=function(e,t,i){var n=Object.assign({},e);var a=e["com.sap.vocabularies.Common.v1.Label"];if(a){n.fieldLabel=a.String}a=e["com.sap.vocabularies.Common.v1.QuickInfo"];if(a){n.quickInfo=a.String}n.displayFormat=p.getDisplayFormat(e);n.isDigitSequence=p.isDigitSequence(e);n.isURL=p.isURL(e);n.isEmailAddress=p.isEmailAddress(e);n.isPhoneNumber=p.isPhoneNumber(e);n.isUpperCase=p.isUpperCase(e);n.isCalendarDate=p.isCalendarDate(e);n.isCalendarType=p.isCalendarType(e);n.calendarType=o.getCalendarAnnotationType(e);n.isFiscalDate=p.isFiscalDate(e);n.timezone=p.getTimezonePropertyPath(e);n.isTimezone=p.getIsTimezoneProperty(e);n.aggregationRole=p.getAggregationRole(e);a=e["Org.OData.Measures.V1.ISOCurrency"];if(a){n.isCurrencyField=true;n.isMeasureField=true;n.unit=a.Path}a=e["Org.OData.Measures.V1.Unit"];if(a){n.isMeasureField=true;n.unit=a.Path}a=e["com.sap.vocabularies.Common.v1.Text"];if(a){n.description=a.Path;n.displayBehaviour=this.getTextArrangementValue(a)}else if(e["com.sap.vocabularies.UI.v1.TextArrangement"]){n.displayBehaviour=this.getTextArrangementValue(e)}a=e["com.sap.vocabularies.UI.v1.IsImageURL"]||e["com.sap.vocabularies.UI.v1.IsImageUrl"];n.isImageURL=p.isTermDefaultTrue(a);n.entityName=t.name;n.parentPropertyName=i;n.fullName=this._getFullyQualifiedNameForField(e.name,t);a=e["com.sap.vocabularies.Common.v1.FieldControl"];n.visible=!(a&&(a.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden"||a.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Inapplicable"));n.visible=n.visible&&!p.isHidden(e);n.hiddenFilter=p.isHiddenFilter(e);if(e["defaultValue"]!==undefined){n.defaultPropertyValue=e["defaultValue"]}a=e["com.sap.vocabularies.Common.v1.FilterDefaultValue"];if(a){n.defaultFilterValue=this._getDefaultValues(e.type,a,e)}return n};p.prototype._determineHierarchyInformation=function(e,t){var i={field:null,type:null};if(t["sap:hierarchy-node-for"]!=null){i.field=t["sap:hierarchy-node-for"];i.type=p.hierarchyType.nodeFor}if(t["sap:hierarchy-node-external-key-for"]!=null){i.field=t["sap:hierarchy-node-external-key-for"];i.type=p.hierarchyType.nodeExternalKeyFor}if(t["sap:hierarchy-parent-node-for"]!=null){i.field=t["sap:hierarchy-parent-node-for"];i.type=p.hierarchyType.parentNodeFor}if(t["sap:hierarchy-level-for"]!=null){i.field=t["sap:hierarchy-level-for"];i.type=p.hierarchyType.levelFor}if(t["sap:hierarchy-drill-state-for"]!=null){i.field=t["sap:hierarchy-drill-state-for"];i.type=p.hierarchyType.drillStateFor}if(t["sap:hierarchy-node-descendant-count-for"]!=null){i.field=t["sap:hierarchy-node-descendant-count-for"];i.type=p.hierarchyType.nodeDescendantCountFor}if(i.type!=null){e.hierarchy=i}};p.prototype._determineFilterAndSortInformation=function(e,t,i){if(i){this._enrichEntitySetMetadata([e],i)}if(e.filterable==undefined||e.filterable){e.filterable=t["sap:filterable"]!=="false"}if(!e.filterRestriction&&t["sap:filter-restriction"]){e.filterRestriction=t["sap:filter-restriction"]}if(!e.requiredFilterField){e.requiredFilterField=t["sap:required-in-filter"]==="true"}if(e.sortable==undefined||e.sortable){e.sortable=t["sap:sortable"]!=="false"}};p.prototype._getDefaultValues=function(t,i,n){var o=null,r=e.getDefaultValueTypeName(t);if(i[r]){o=i[r]}else{a.error("default value for "+n.name+" expected through the property "+r)}return o};p.prototype.extractNavigationPropertyField=function(e,t){var i,n,a,o,r,s,l,u=null;if(t&&e){i="/"+t+"/";o=e.split("/");r=o.pop();s=o.join("/");if(s&&r){n=this._oMetaModel.getMetaContext(i+s);if(n){l=this._oMetaModel.getProperty(n.getPath())}}if(l){a=this._oMetaModel.getODataProperty(l,r)}if(a){u=this._parseV4PropertyAnnotations(a,l,s);u.name=e;var p=this._oMetaModel.getODataEntitySet(t);this._determineFilterAndSortInformation(u,a,p);u.name=a.name}}return u};p.prototype.getAllFilterableFieldNamesByEntityTypeName=function(e){var t,i,n,a,o,r,s;r=[];t=this.getAllFilterableFieldsByEntityTypeName(e);if(t&&t.length){n=t.length;for(i=0;i<n;i++){s=t[i];if(s.fields&&s.fields.length){o=s.fields.length;for(a=0;a<o;a++){r.push(s.fields[a].name)}}}}return r};p.prototype._getAllFilterableFieldsByEntity=function(e,t,i,n){var a=[],o,r,s,l,u,p,f,c;if(!this._oMetaModel||!e){return undefined}if(t){r=this._oMetaModel.getODataEntitySet(e);if(r){o=this._getEntityDefinition(r.entityType)}}else{o=this._getEntityDefinition(e)}if(o){a.push(this._getFilterableFieldsFromEntityDefinition(o,undefined,r));s=this._getFilterableAssociations(o,r);for(l in s){if(!n||n.indexOf(l)>-1){c=s[l];if(t){u=this._oMetaModel.getODataAssociationSetEnd(o,l);if(u.entitySet){f=this._oMetaModel.getODataEntitySet(u.entitySet)}}p=this._getEntityDefinition(c);if(p){if(i&&p["sap:semantics"]==="parameters"){continue}a.push(this._getFilterableFieldsFromEntityDefinition(p,l,f))}}}}return a};p.prototype._getAllFilterableFieldsByEntityForAllEndpoints=function(e,t,i,n){var a=[],o,r,s,l,u,p,f,c;if(!this._oMetaModel||!e){return undefined}if(t){r=this._oMetaModel.getODataEntitySet(e);if(r){o=this._getEntityDefinition(r.entityType)}}else{o=this._getEntityDefinition(e)}if(o){a.push(this._getFilterableFieldsFromEntityDefinition(o,undefined,r));s=this._getAssociations(o,r,true,true);for(l in s){if(!n||n.indexOf(l)>-1){c=s[l];if(t){u=this._oMetaModel.getODataAssociationSetEnd(o,l);if(u.entitySet){f=this._oMetaModel.getODataEntitySet(u.entitySet)}}p=this._getEntityDefinition(c);if(p){if(i&&p["sap:semantics"]==="parameters"){continue}a.push(this._getFilterableFieldsFromEntityDefinition(p,l,f))}}}}return a};p.prototype.getAllFilterableFieldsByEntitySetName=function(e,t,i){if(!this._oMetaModel){return undefined}return this._getAllFilterableFieldsByEntity(e,true,t,i)};p.prototype.getAllFilterableFieldsByEntityTypeName=function(e){if(!this._oMetaModel){return undefined}return this._getAllFilterableFieldsByEntity(e)};p.prototype._getFilterableFieldsFromEntityDefinition=function(e,t,i){var n={},o=[],r=[],s=null,l,u,p,f=null;if(!this._oMetaModel||!e){return undefined}if(!i){a.error("mandatory parameter 'oEntitySet' not set or null.")}else{l=e["com.sap.vocabularies.Common.v1.Label"];if(l){n.groupLabel=l.String}n.groupEntitySetName=i.name;n.groupEntityTypeName=e.name;n.groupName=t;s=this._getFieldsByEntityDefinition(e,t);if(i){this._enrichEntitySetMetadata(s,i)}p=s.length;for(u=0;u<p;u++){f=s[u];if(f.filterable){if(f.visible){f.groupEntitySet=n.groupEntitySetName;f.groupEntityType=n.groupEntityTypeName;o.push(f)}else{r.push(f)}}}}n.fields=o;n.hiddenFields=r;return n};p.prototype._getFullyQualifiedNameForField=function(e,t){var i,n,a=e;if(t){i=t.namespace;n=t.name}if(i&&n){a=i+"."+n+"/"+e}return a};p.prototype.getFieldNameByFullyQualifiedFieldName=function(e){var t,i;t=this.removeNamespace(e);i=t.indexOf("/");t=t.substring(i+1);return t};p.prototype._getFilterableAssociations=function(e,t){return this._getAssociations(e,t,true,false)};p.prototype._getAssociations=function(e,t,i,n){var a={},o=null,r=null,s,l=0,u=null;if(!this._oMetaModel||!e){return undefined}o=e.navigationProperty;if(o&&o.length){l=o.length;for(s=0;s<l;s++){r=o[s];if(i){if(!this._isFilterable(r,t)||p.isHiddenFilter(r)){continue}}u=this._oMetaModel.getODataAssociationEnd(e,r.name);if(!u||u.type===e.namespace+"."+e.name){continue}if(n||u.multiplicity==="1"||u.multiplicity==="0..1"){if(a[r.name]===undefined){a[r.name]=u.type}}}}return a};p.prototype.getParametersByEntitySetName=function(e){var t,i,n,a,o,r,s,l,u,p,f;f=this._oMetaModel.getODataEntitySet(e);if(f){u=this._getEntityDefinition(f.entityType)}i=this._getAssociations(u,null,false,false);for(a in i){r=i[a];l=this._oMetaModel.getODataAssociationSetEnd(u,a);if(l.entitySet){p=this._getEntityDefinition(r);if(p){if(p["sap:semantics"]==="parameters"&&p.key){t={entitySetName:l.entitySet,parameters:[],navPropertyName:""};for(var c=0;c<p.key.propertyRef.length;c++){t.parameters.push(p.key.propertyRef[c].name)}n=this._getAssociations(p,null,false,true);for(o in n){s=n[o];if(s===f.entityType){t.navPropertyName=o;break}}return t}}}}return null};p.prototype.getValueListAnnotationLazy=function(e,t){var i,n,a,o,r={additionalAnnotations:[],additionalAnnotationsWithPVQualifier:[]},s,l,u,f,c;o=new Promise(function(o,m){if(e&&this._oMetaModel){f=this.getPropertyContextByPath(e);u=e.split("/");l=u[1];if(f){i=f.getObject&&f.getObject();if(t&&p.hasValueListRelevantQualifiers(i)){a=this.oModel.getContext(t);n=this.getODataRelevantValueLists(f,a)}else{n=this._oMetaModel.getODataValueLists(f)}n.then(function(e){for(c in e){s={annotation:e[c]};if(s.annotation){this._enrichValueHelpAnnotation(s,l);if(!s.annotation["PresentationVariantQualifier"]){if(!c){r.primaryValueListAnnotation=s}else{r.additionalAnnotations.push(s)}s.qualifier=c}else{if(!c){r.primaryValueListAnnotationWithPVQualifier=s}else{s.qualifier=c;r.additionalAnnotationsWithPVQualifier.push(s)}}}}if(!r.primaryValueListAnnotation){r.primaryValueListAnnotation=r.additionalAnnotations.shift()}o(r)}.bind(this),m);return}}m()}.bind(this));return o};p.prototype.getODataRelevantValueLists=function(e,t){return this._oMetaModel.getODataValueLists(e).then(function(i){var n,a={},o=this._getODataValueListRelevantQualifiers(e,t),r=Array.isArray(o)&&o.length>0;for(n in i){if(r&&o.indexOf(n)!==-1){a[n]=i[n]}}return a}.bind(this))};p.prototype._getODataValueListRelevantQualifiers=function(e,t){var i,n=t.getModel(),a=e.getObject(),o=a["com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"];if(Array.isArray(o)&&n!==undefined){i=o.filter(function e(i){var a,o,r,s,l=false,u=i["If"],p=i["String"];if(p||p===""){l=true}else if(this._isBooleanStatement(u)){o=u[0]["Path"];s=n.getObject(o,t);if(s===true){l=true}}else if(u){a=u[0]["Eq"];o=a[0]["Path"];r=a[1]["String"];s=n.getObject(o,t);if(r===s){l=true}}return l}.bind(this)).map(function e(t){var i,n=t["If"],a=t["String"];if(a||a===""){i=a}else if(n){i=n[1]&&n[1]["String"]}return i})}return i};p.prototype._isBooleanStatement=function(e){var t=false;if(e&&e[0]&&e[0]["Eq"]===undefined&&e[0]["Path"]!==undefined){t=true}return t};p.prototype.getValueListAnnotationForFunctionImport=function(e,t){var i={additionalAnnotations:[]},n,a;for(a in e){n={annotation:e[a]};if(n.annotation){this._enrichValueHelpAnnotation(n,t);if(!a){i.primaryValueListAnnotation=n}else{n.qualifier=a;i.additionalAnnotations.push(n)}}}return i};p.prototype.getValueListAnnotation=function(e){var t={additionalAnnotations:[]},i,n,a,o,r,s;if(e&&this._oMetaModel){a=e.split("/");o=this._oMetaModel.getODataEntityType(a[0])||this._oMetaModel.getODataComplexType(a[0]);r=this._oMetaModel.getODataProperty(o,a[1]);if(r){n=r.name;for(var l in r){if(l==="com.sap.vocabularies.Common.v1.ValueList"||l.indexOf("com.sap.vocabularies.Common.v1.ValueList#")>-1){s=null;i={annotation:r[l]};a=l.split("#");if(a.length===2){s=a[1]}if(i.annotation){this._enrichValueHelpAnnotation(i,n);if(!s){t.primaryValueListAnnotation=i}else{i.qualifier=s;t.additionalAnnotations.push(i)}}}}}}return t};p.prototype._getRecommendationListAnnotation=function(e){var t=e.split("/"),i=this._oMetaModel.getODataEntityType(t[0])||this._oMetaModel.getODataComplexType(t[0]),n=t[1],a=this._oMetaModel.getODataProperty(i,n,true),o=this._oMetaModel.createBindingContext(a),r=o.getObject();return r["com.sap.vocabularies.UI.v1.RecommendationList"]};p.prototype._enrichValueHelpAnnotation=function(e,t){var i,n,a,o,r=[],s,l={},u={},f={},c,m,y,d=[],h=[],g,v,b,M,_,F,S=0,T=0,P=0,D=0,E,O=[],A=[];if(e&&e.annotation){i=e.annotation;if(i){n=i["SearchSupported"];e.isSearchSupported=n?n.Bool==="true":false;n=i["CollectionPath"];if(n){e.valueListEntitySetName=n.String;a=this.getVLEntitySets(e.valueListEntitySetName);o=a[0];if(o){e.valueListEntityName=o.entityType;e.valueListEntitySetName=o.name;e.semantics=o["sap:semantics"];r=this.getKeysByEntitySetName(o.name);d=this.getFieldsByEntitySetName(o.name)}}n=i["Label"];if(n){e.valueListTitle=n.String}g=i["Parameters"];if(d&&g){S=g.length}for(T=0;T<S;T++){F=g[T];b=undefined;M=undefined;_=undefined;v=F["ValueListProperty"];b=this.getVLProperty(v,a);v=F["LocalDataProperty"];if(v){M=v.PropertyPath}v=F["Constant"];if(v){_=v[Object.keys(v)[0]]}c=false;if(F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterIn"){c=true}m=false;if(F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterOut"){m=true}y=false;if(F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterConstant"){y=true}if(F.InitialValueIsSignificant&&F.InitialValueIsSignificant.Bool==="true"&&(F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterIn"||F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterConstant")){A.push(b)}if(c){l[M]=b}if(m){u[M]=b}if(y){f[b]=_}if(m||F.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"){D=d.length;while(D--){if(d[D].name===b){h.push(d[D]);break}}}if(!s&&m&&M===t){s=b}if(p.hasImportance(F)&&this._getImportanceAnnotation(F)==="High"){for(P=0;P<d.length;P++){E=d[P];if(E.name===b){O.push(E);break}}}}}e.inParams=l;e.outParams=u;e.constParams=f;e.fields=d;e.valueListFields=h;e.aHighImportanceFields=O;e.keys=r;e.keyField=s;e.descriptionField=this.getDescriptionFieldName(e.keyField,e.valueListEntitySetName);e.deprecationCodeField=this.getDeprecationCodeFieldName(d);e.aInitialValueIsSignificantFields=A}};p.prototype.getVLEntitySets=function(e){var t;if(this._oMetaModel){t=this._oMetaModel.getODataEntitySet(e)}return[t]};p.prototype.getVLProperty=function(e){var t;if(e){t=e.String}return t};p.prototype._enrichRecommendationListAnnotation=function(e){var t={},i=[],n,a;t.annotation=e;a=e["CollectionPath"];if(a){t.path=a.String}a=e["RankProperty"];if(a){t.rankProperty=a.String}a=e["Binding"];if(a){i=a}if(this._oMetaModel&&t.path){n=this._oMetaModel.getODataEntitySet(t.path)}if(n){t.entityName=n.name;t.keys=this.getKeysByEntitySetName(n.name);t.fields=this.getFieldsByEntitySetName(n.name);t.rankField=t.fields.filter(function(e){return e.name===t.rankProperty})}i=i.map(function(e){var i=0;while(i<t.fields.length){if(t.fields[i].name===e.RecommendationListProperty.String){return t.fields[i]}i++}return false});t.fieldsToDisplay=i.concat(t.rankField);return t};p.prototype.getDescriptionFieldName=function(e,t){var i,n=0,a,o,r;if(typeof e==="object"){o=e}else{i=this.getFieldsByEntitySetName(t);if(i){a=i.length;for(n=0;n<a;n++){o=i[n];if(o.name===e){break}o=null}}}if(o&&o["com.sap.vocabularies.Common.v1.Text"]){r=o["com.sap.vocabularies.Common.v1.Text"].Path}return r};p.prototype.getDeprecationCodeFieldName=function(e){var t=0,i,n,a;for(t=0,i=e.length;t<i;t++){n=e[t];if(p.isTermDefaultTrue(n["com.sap.vocabularies.CodeList.v1.IsConfigurationDeprecationCode"])){a=n.name;break}}return a};p.prototype.getIsSearchSupported=function(e){var t=false,i;if(e){i=e.SearchSupported;if(i&&i.Bool==="true"){t=true}}return t};p.prototype.getValueListSemantics=function(e){var t,i,n;if(e){t=e["CollectionPath"]?e["CollectionPath"].String:undefined}if(t){i=this._oMetaModel.getODataEntitySet(t);if(i){n=i["sap:semantics"]}}return n};p.prototype.getLineItemAnnotation=function(e,t){var i,n,a,o;if(e&&this._oMetaModel){i=this._oMetaModel.getODataEntityType(e);if(i){n="com.sap.vocabularies.UI.v1.LineItem";if(t){n+="#"+t}a=i[n];if(a){o={annotation:a};this._enrichAnnotationWithUIDataField(o,a)}}}return o};p.prototype.isSemanticAggregation=function(e){var t;if(e&&this._oMetaModel){t=this._oMetaModel.getODataEntityType(e);if(t){return t["sap:semantics"]==="aggregate"}}return false};p.prototype.getPresentationVariantAnnotation=function(e,t){var i,n,a,o,r,s,l,u,p;if(e&&this._oMetaModel){i=this._oMetaModel.getODataEntityType(e);if(i){n="com.sap.vocabularies.UI.v1.PresentationVariant";if(t){n+="#"+t}a=i[n];if(a){s={annotation:a,requestAtLeastFields:[],sortOrderFields:[],groupByFields:[],maxItems:undefined};if(a.Visualizations){o=a.Visualizations.length;for(r=0;r<o;r++){p=a.Visualizations[r].AnnotationPath;if(!l&&(p==="@com.sap.vocabularies.UI.v1.LineItem"||p.indexOf("@com.sap.vocabularies.UI.v1.LineItem#")>-1)){l=i[p.substring(1)];s.lineItemAnnotation={annotation:l};this._enrichAnnotationWithUIDataField(s.lineItemAnnotation,l)}else if(!u&&(p==="@com.sap.vocabularies.UI.v1.Chart"||p.indexOf("@com.sap.vocabularies.UI.v1.Chart#")>-1)){u=i[p.substring(1)];s.chartAnnotation={annotation:u,semantics:i["sap:semantics"]};this._enrichChartAnnotation(s.chartAnnotation,u)}if(l&&u){break}}}if(a.RequestAtLeast){o=a.RequestAtLeast.length;for(r=0;r<o;r++){s.requestAtLeastFields.push(a.RequestAtLeast[r].PropertyPath)}}if(a.SortOrder){o=a.SortOrder.length;for(r=0;r<o;r++){s.sortOrderFields.push({name:a.SortOrder[r].Property.PropertyPath,descending:a.SortOrder[r].Descending?a.SortOrder[r].Descending.Bool==="true":false})}}if(a.GroupBy){o=a.GroupBy.length;for(r=0;r<o;r++){s.groupByFields.push(a.GroupBy[r].PropertyPath)}}if(a.MaxItems){s.maxItems=a.MaxItems.Int}}}}return s};p.prototype._getPresentationVariantQualifierForVHD=function(e){var t,i,n,a,o;if(e&&this._oMetaModel){t=this._oMetaModel.getODataEntityType(e);i="com.sap.vocabularies.UI.v1.PresentationVariant";for(o in t){if(o.indexOf(i+"#")>-1){a=o.split("#");if(a.length===2){n=a[1]}}}}return n||""};p.prototype._enrichChartAnnotation=function(e,t){var i,n,a;if(e&&t){e.measureFields=[];e.dimensionFields=[];e.measureAttributes={};e.dimensionAttributes={};if(t.ChartType&&t.ChartType.EnumMember){e.chartType=t.ChartType.EnumMember}if(t.Measures){n=t.Measures.length;for(i=0;i<n;i++){e.measureFields.push(t.Measures[i].PropertyPath)}}if(t.MeasureAttributes){n=t.MeasureAttributes.length;for(i=0;i<n;i++){a=t.MeasureAttributes[i];if(a.Measure){e.measureAttributes[a.Measure.PropertyPath]={role:a.Role?a.Role.EnumMember:null,dataPoint:a.DataPoint?a.DataPoint.AnnotationPath:null}}}}if(t.Dimensions){n=t.Dimensions.length;for(i=0;i<n;i++){e.dimensionFields.push(t.Dimensions[i].PropertyPath)}}if(t.DimensionAttributes){n=t.DimensionAttributes.length;for(i=0;i<n;i++){a=t.DimensionAttributes[i];if(a.Dimension){e.dimensionAttributes[a.Dimension.PropertyPath]={role:a.Role?a.Role.EnumMember:null,hierarchyLevel:a.HierarchyLevel?a.HierarchyLevel.Int:0}}}}}};p.prototype.getChartAnnotation=function(e,t){var i,n,a,o;if(e&&this._oMetaModel){i=this._oMetaModel.getODataEntityType(e);if(i){o="com.sap.vocabularies.UI.v1.Chart";if(t){o+="#"+t}n=i[o];if(n){a={annotation:n,semantics:i["sap:semantics"]};this._enrichChartAnnotation(a,n)}}}return a};p.prototype.getDataPointAnnotation=function(e){var t,i,n,a,o,r={};if(e&&this._oMetaModel){t=this._oMetaModel.getODataEntityType(e);if(t){for(i in t){if(i==="com.sap.vocabularies.UI.v1.DataPoint"||i.indexOf("com.sap.vocabularies.UI.v1.DataPoint#")>-1){n=null;o=t[i];a=i.split("#");if(a.length===2){n=a[1]}if(o){if(n){if(!r.additionalAnnotations){r.additionalAnnotations={}}r.additionalAnnotations[n]=o}else{r.primaryAnnotation=o}}}}}}return r};p.prototype.getFieldGroupAnnotation=function(e){var t,i,n,a,o,r,s=[];if(e&&this._oMetaModel){t=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(e));if(t){for(var l in t){if(l==="com.sap.vocabularies.UI.v1.FieldGroup"||l.indexOf("com.sap.vocabularies.UI.v1.FieldGroup#")>-1){i=null;o=t[l];n=l.split("#");if(n.length===2){i=n[1]}if(o){r={annotation:o};if(i){r.groupName=i}a=o["Label"];if(a){r.groupLabel=a.String}a=o["Data"];if(a){this._enrichAnnotationWithUIDataField(r,a)}s.push(r)}}}}}return s};p.prototype.getFieldGroupsByFilterFacetsAnnotation=function(e){var t,i,n,a,o,r=this.getFieldGroupAnnotation(e);o=r;if(e&&this._oMetaModel){t=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(e));if(t){for(var s in t){if(s==="com.sap.vocabularies.UI.v1.FilterFacets"||s.indexOf("com.sap.vocabularies.UI.v1.FilterFacets#")>-1){o=[];a=t[s];if(a){for(var l=0;l<a.length;l++){i=a[l].Target.AnnotationPath.split("#");if(i.length===2){n=i[1]}if(n){r.some(function(e){if(e.groupName===n){if(a[l].Label){e.groupLabel=a[l].Label.String}o.push(e);return true}return false})}}}}}}}return o};p.prototype._enrichAnnotationWithUIDataField=function(e,t){var i=[],n={},a={},o={},r={},s={},l,u,p,f=0,c=0;if(e&&t){f=t.length;i=[];a={};for(c=0;c<f;c++){p=t[c];if(p&&(p.RecordType==="com.sap.vocabularies.UI.v1.DataField"||p.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){u=null;l=p["Value"];if(l){u=l.Path}if(u){i.push(u);l=p["Url"];if(l){n[u]=this._extractURLInfo(l)}l=p["Label"];if(l&&l.String){a[u]=l.String}o[u]=this._getImportanceAnnotation(p);l=p["Criticality"];if(l){r[u]=this._extractCriticalityInfo(l,p)}s[u]=this._getWidthAnnotation(p)}}}e.fields=i;e.urlInfo=n;e.labels=a;e.importance=o;e.criticality=r;e.width=s}};p.prototype._extractCriticalityInfo=function(e,t){var i,n;if(e.Path||e.EnumMember){i={};i["path"]=e.Path;i["criticalityType"]=e.EnumMember;n=t["CriticalityRepresentation"];if(n){if(n.Path){i["criticalityRepresentationPath"]=n.Path}else if(n.EnumMember){i["criticalityRepresentationType"]=n.EnumMember}}}return i};p.prototype._extractURLInfo=function(e){var t,n,a,o;if(e){if(e.Apply&&e.Apply.Name==="odata.fillUriTemplate"){t={urlTarget:undefined,parameters:[]};if(!this._oDummyAnnotationHelperContext){this._oDummyAnnotationHelperContext=this._oMetaModel.createBindingContext("/")}if(this._oDummyAnnotationHelperContext){t.urlTarget=i.format(this._oDummyAnnotationHelperContext,e)}n=e.Apply.Parameters;a=n&&n.length?n.length:0;while(a--){o=n[a];if(o&&o.Type==="LabeledElement"&&o.Value&&o.Value.Path){t.parameters.push(o.Value.Path)}}}else if(e.Path){t={urlPath:e.Path}}}return t};p.prototype.updateDataFieldDefault=function(e){var t=e&&e["com.sap.vocabularies.UI.v1.DataFieldDefault"],i;if(t&&(t.RecordType==="com.sap.vocabularies.UI.v1.DataField"||t.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){i=t["Label"];if(i&&i.String){e.label=i.String}i=t["Criticality"];if(i){e.criticalityInfo=this._extractCriticalityInfo(i,t)}i=t["Url"];if(i){e.urlInfo=this._extractURLInfo(i)}e.width=this._getWidthAnnotation(t);e.importance=this._getImportanceAnnotation(t)}};p.prototype.getSelectionVariantAnnotationList=function(e){var t,i,n,a=[],o;if(e&&this._oMetaModel){t=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(e));if(t){for(var r in t){if(r==="com.sap.vocabularies.UI.v1.SelectionVariant"||r.indexOf("com.sap.vocabularies.UI.v1.SelectionVariant#")>-1){n="";i=t[r];o=r.split("#");if(o.length===2){n=o[1]}if(i){a.push({qualifier:n,annotation:i})}}}}}return a};p.prototype.getSelectionPresentationVariantAnnotationList=function(e){var t,i,n,a,o,r,s,l=null,u=null,p=null,f=[],c;if(e&&this._oMetaModel){i=this._oMetaModel.getODataEntitySet(e);if(i){n=this._oMetaModel.getODataEntityType(i.entityType)}t=[i,n];var m=function(e,t){return t.filter(function(t){return t.qualifier===e})[0]};var y=this.getEntityTypeNameFromEntitySetName(e);var d=this;t.forEach(function(e){if(e){for(var t in e){if(t==="com.sap.vocabularies.UI.v1.SelectionPresentationVariant"||t.indexOf("com.sap.vocabularies.UI.v1.SelectionPresentationVariant#")>-1){o="";a=e[t];c=t.split("#");if(c.length===2){o=c[1]}if(a){l=null;if(a.Text&&a.Text.String){l=a.Text.String}if(a.SelectionVariant&&a.SelectionVariant.Path){s=a.SelectionVariant.Path;r="";c=s.split("#");if(c.length===2){r=c[1]}if(n[s.substring(1)]){var i=m(r,d.getSelectionVariantAnnotationList(y));u={qualifier:r,annotation:i?i.annotation:undefined}}}if(a.PresentationVariant&&a.PresentationVariant.Path){s=a.PresentationVariant.Path;r="";c=s.split("#");if(c.length===2){r=c[1]}if(n[s.substring(1)]){p={qualifier:r,annotation:d.getPresentationVariantAnnotation(y,r)}}}f.push({qualifier:o,text:l,annotation:a,selectionVariant:u,presentationVariant:p})}}}}})}return f};p.prototype.getSelectionFieldsAnnotation=function(e){var t,i,n,a,o;if(e&&this._oMetaModel){t=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(e));if(t){i=t["com.sap.vocabularies.UI.v1.SelectionFields"];if(i){o={annotation:i,selectionFields:[]};n=i.length;for(a=0;a<n;a++){o.selectionFields.push(i[a].PropertyPath)}}}}return o};p.prototype.getSemanticKeyAnnotation=function(e){var t,i,n,a,o;if(e&&this._oMetaModel){t=this._oMetaModel.getODataEntityType(e);if(t){i=t["com.sap.vocabularies.Common.v1.SemanticKey"];if(i){o={annotation:i,semanticKeyFields:[]};n=i.length;for(a=0;a<n;a++){o.semanticKeyFields.push(i[a].PropertyPath)}}}}return o};p.resolveEditableFieldFor=function(e){var t=e&&e["com.sap.vocabularies.Common.v1.EditableFieldFor"];return t&&t.PropertyPath};p.isPotentiallySensitive=function(e){return this.isTermTrue(e["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"])};p.prototype._getImportanceAnnotation=function(e){var t=null,i;i=e["com.sap.vocabularies.UI.v1.Importance"];if(i){t=i.EnumMember}switch(t){case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":return"Medium";case"com.sap.vocabularies.UI.v1.ImportanceType/Low":return"Low";default:return"High"}};p.prototype._getWidthAnnotation=function(e){var t=null,i,n,a=/\d*\.?\d+(px|em|rem)/gi;i=e["com.sap.vocabularies.HTML5.v1.CssDefaults"];if(i){n=i.width;if(n&&n.String&&a.test(n.String)){t=n.String}}return t};p.prototype.getTextArrangementValue=function(e){var t,i,n,a,o;if(e&&this._oMetaModel){if(typeof e==="string"){e=this._getFullyQualifiedNameForEntity(e);t=e.split("/");if(t.length>1){i=this._oMetaModel.getODataEntityType(t[0])||this._oMetaModel.getODataComplexType(t[0]);n=this._oMetaModel.getODataProperty(i,t[1])}else{n=this._oMetaModel.getODataEntityType(e)||this._oMetaModel.getODataComplexType(e)}}else{n=e}if(n){a=n["com.sap.vocabularies.UI.v1.TextArrangement"]||n["com.sap.vocabularies.Common.v1.Text"]&&n["com.sap.vocabularies.Common.v1.Text"]["com.sap.vocabularies.UI.v1.TextArrangement"]}if(a){switch(a.EnumMember){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":o="descriptionAndId";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":o="idAndDescription";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":o="idOnly";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":o="descriptionOnly";break;default:o=undefined;break}}}return o};p.prototype.getSemanticObjectAnnotation=function(e){var t,i,n,a;if(e&&this._oMetaModel){t=e.split("/");i=this._oMetaModel.getODataEntityType(t[0])||this._oMetaModel.getODataComplexType(t[0]);n=this._oMetaModel.getODataProperty(i,t[1]);if(n){a=n["com.sap.vocabularies.Common.v1.SemanticObject"]}return this._prepareSemanticObjectAnnotationFromProperty(a)}return null};p.prototype.getSemanticObjectsFromAnnotation=function(e){if(!e||!this._oMetaModel){return null}var t=e.split("/");var i=this._oMetaModel.getODataEntityType(t[0])||this._oMetaModel.getODataComplexType(t[0]);return p.getSemanticObjectsFromProperty(this._oMetaModel.getODataProperty(i,t[1]))};p.getSemanticObjectsFromProperty=function(e){var t={defaultSemanticObject:undefined,additionalSemanticObjects:[]};for(var i in e){if(i==="com.sap.vocabularies.Common.v1.SemanticObject"){t.defaultSemanticObject=e[i]["Path"]?p._getSemanticObjectBindingPath(e[i]["Path"]):e[i]["String"]}else if(i.startsWith("com.sap.vocabularies.Common.v1.SemanticObject#")){t.additionalSemanticObjects.push(e[i]["String"])}}return t.defaultSemanticObject||t.additionalSemanticObjects.length>0?t:undefined};p._getSemanticObjectBindingPath=function(e){return"{"+e+"}"};p.prototype.getSemanticObjectAnnotationFromProperty=function(e){var t;if(e){t=e["com.sap.vocabularies.Common.v1.SemanticObject"];return this._prepareSemanticObjectAnnotationFromProperty(t)}return null};p.prototype._prepareSemanticObjectAnnotationFromProperty=function(e){var t,i;if(e){t=e["Path"]?p._getSemanticObjectBindingPath(e["Path"]):e["String"];if(t){i={annotation:e};i.semanticObject=t}}return i};p.prototype.getContactAnnotation=function(e){var t=this._oMetaModel.getMetaContext(e);var i=t.getProperty(t.getPath());return i["com.sap.vocabularies.Communication.v1.Contact"]};p.prototype._getFullyQualifiedNameForEntity=function(e){var t,i;if(!e){return undefined}if(e.indexOf(".")>-1){return e}if(this._oSchemaDefinition){t=this._oSchemaDefinition.namespace}if(t&&!(e.indexOf(t)>-1)){i=t+"."+e}else{i=e}return i};p.prototype.getMultiUnitBehaviorEnabled=function(){var e=this._oMetaModel&&this._oMetaModel.getODataEntityContainer();return p.isTermDefaultTrue(e&&e["com.sap.vocabularies.Common.v1.ApplyMultiUnitBehaviorForSortingAndFiltering"])};p.prototype.getPDFSupportedAnnotation=function(){var e=this._oMetaModel&&this._oMetaModel.getODataEntityContainer(true);var t=this._oMetaModel.getObject(e+"/com.sap.vocabularies.PDF.v1.Features");var i={};for(var n in t){var a=t[n];if(a.Bool){i[n]=a.Bool==="true"}else if(a.String){i[n]=a.String}else if(a.Int){i[n]=parseInt(a.Int)}}return t?i:undefined};p.getSelectionRangeOptionType=function(e){return s[e]};p.getSelectionRangeSignType=function(e){return l[e]};p.hasTextArrangementAnnotation=function(e){if(e["com.sap.vocabularies.UI.v1.TextArrangement"]||e["com.sap.vocabularies.Common.v1.Text"]&&e["com.sap.vocabularies.Common.v1.Text"]["com.sap.vocabularies.UI.v1.TextArrangement"]){return true}return false};p.isNumber=function(e){return!!e&&(e.type==="Edm.Decimal"||e.type==="Edm.Double"||e.type==="Edm.Int16"||e.type==="Edm.Int32"||e.type==="Edm.Int64"||e.type==="Edm.Byte"||e.type==="Edm.Single"||e.type==="Edm.String"&&this.isDigitSequence(e))};p._getSearchExpressionTypeOperations=function(){var e={},t=p._getSearchExpressionType();e[t]=p._getSearchExpressionRangeOperationsKeys();return e};p._getSearchExpressionRangeOperationsKeys=function(){return[u.Contains,u.StartsWith,u.EndsWith]};p._getSearchExpressionType=function(){return"string"};p.prototype.destroy=function(){this.oModel=null;this._oMetaModel=null;this._oMetadata=null;this._oSchemaDefinition=null;this._sResourceRootUri=null;this.bIsDestroyed=true;this._oDummyAnnotationHelperContext=null};return p},true);
//# sourceMappingURL=MetadataAnalyser.js.map