/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/core/library","sap/ui/comp/smartfield/type/String","sap/ui/comp/odata/type/NumericText","sap/ui/comp/odata/FiscalFormat","sap/ui/model/ValidateException"],function(t,e,a,r,s,i){"use strict";var o=a.extend("sap.ui.comp.odata.type.FiscalDate",{constructor:function(t,i,l){a.call(this,t,i);if(this.oConstraints&&this.oConstraints.isDigitSequence){r.call(this,t,i)}this.sFiscalType=this._getFiscalType(l);this.formatter=s.getDateInstance(Object.assign({format:o.FiscalDateFormatter[this.sFiscalType],calendarType:e.CalendarType.Gregorian},t))}});o.prototype.parseValue=function(t){if(t===""){return null}if(this.oConstraints&&this.oConstraints.isDigitSequence){return this.formatter.parse(r.prototype.parseValue.apply(this,arguments))}return this.formatter.parse(a.prototype.parseValue.apply(this,arguments))};o.prototype.formatValue=function(t){var e;if(this.oConstraints&&this.oConstraints.isDigitSequence){var s=Array.from(arguments),i=true;s.push(i);e=r.prototype.formatValue.apply(this,s)}else{e=a.prototype.formatValue.apply(this,arguments)}if(e===null){return null}return this.formatter.format(e)};o.prototype.validateValue=function(t){try{a.prototype.validateValue.apply(this,arguments)}catch(e){if(!this.formatter.validate(t)){throw new i(this.getErrorMessage(this.sFiscalType))}}if(t===null){return}if(!this.formatter.validate(t)){throw new i(this.getErrorMessage(this.sFiscalType))}};o.prototype.destroy=function(){a.prototype.destroy.apply(this,arguments);if(this.formatter){this.formatter.destroy();this.formatter=null}};o.prototype.getErrorMessage=function(e){var a;this.iFullYear=this.iFullYear||(new Date).getFullYear().toString();switch(e){case"IsFiscalYear":a=this.iFullYear;break;case"IsFiscalPeriod":a="001";break;case"IsFiscalYearPeriod":a=this.iFullYear+"001";break;case"IsFiscalQuarter":a="1";break;case"IsFiscalYearQuarter":a=this.iFullYear+"1";break;case"IsFiscalWeek":a="01";break;case"IsFiscalYearWeek":a=this.iFullYear+"01";break;case"IsDayOfFiscalYear":a="1";break;case"IsFiscalYearVariant":break;default:a=this.iFullYear}return t.getLibraryResourceBundle("sap.ui.comp").getText("FISCAL_VALIDATION_FAILS",[this.formatValue(a,"string")])};o.FiscalDateFormatter={IsFiscalYear:"YYYY",IsFiscalPeriod:"PPP",IsFiscalYearPeriod:"YYYYPPP",IsFiscalQuarter:"Q",IsFiscalYearQuarter:"YYYYQ",IsFiscalWeek:"WW",IsFiscalYearWeek:"YYYYWW",IsDayOfFiscalYear:"d",IsFiscalYearVariant:""};o.prototype.getName=function(){return"sap.ui.comp.odata.type.FiscalDate"};o.prototype.getFormatter=function(){return this.formatter};o.prototype._getFiscalType=function(t){var e="com.sap.vocabularies.Common.v1.";if(t.anotationType&&t.anotationType.indexOf(e)!=-1){return t.anotationType.replace(e,"")}return t.fiscalType};return o});
//# sourceMappingURL=FiscalDate.js.map