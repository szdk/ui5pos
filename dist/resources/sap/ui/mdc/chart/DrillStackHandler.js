/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/StandardListItem","sap/ui/core/InvisibleText","sap/m/library","sap/ui/Device","sap/base/Log","sap/m/IllustratedMessage","sap/m/SearchField","sap/ui/model/json/JSONModel","sap/ui/model/Filter"],function(e,t,n,o,i,s,r,a,l,c,d,u,m){"use strict";const p=r.PlacementType;const f=r.ListMode;function g(e){const t=e.getControlDelegate().getDrillStack(e);const n=[];t.forEach(function(e){e.dimension.forEach(function(e){if(e!=null&&e!=""&&n.indexOf(e)==-1){n.push(e)}})});return n}const D=function(){};D.createDrillDownPopover=function(o){let l=null;const u=e.getLibraryResourceBundle("sap.ui.mdc");const g=new d({placeholder:u.getText("chart.CHART_DRILLDOWN_SEARCH"),liveChange:function(e){if(!l){return}const t=e.getParameter("newValue");let n=[];if(t){n=new m("text","Contains",t)}l.getBinding("items").filter(n)}});const D=new t({id:o.getId()+"-drilldownPopover",contentWidth:"25rem",contentHeight:"20rem",placement:p.VerticalPreferredBottom,afterClose:function(){D.destroy()}});if(!a.system.phone){D.setSubHeader(g)}else{D.addContent(g)}const h=new i({title:"{$ChartDrilldown>text}"});l=new n({noData:new c({enableVerticalResponsiveness:true,title:u.getText("chart.NO_DRILLABLE_DIMENSION"),description:u.getText("chart.NO_DRILLABLE_DIMENSION_DESC"),illustrationType:r.IllustratedMessageType.NoDimensionsSet}),mode:f.SingleSelectMaster,items:{path:"$ChartDrilldown>/items",template:h},selectionChange:function(e){const t=e.getParameter("listItem");if(t){const e=t.getBindingContext("$ChartDrilldown");const n=e.getObject().id;o.getEngine().createChanges({control:o,key:"Item",state:[{name:n,position:o.getItems().length}]})}D.close()}});if(a.system.desktop){const e=new s({text:u.getText("chart.CHART_DRILLDOWN_TITLE")});D.setShowHeader(false);D.addContent(e);D.addAriaLabelledBy(e)}else{D.setTitle(u.getText("chart.CHART_DRILLDOWN_TITLE"))}D.addContent(l);o._oDrillDownPopover=D;return D};D.showDrillDownPopover=function(e,t){const n=e.getControlDelegate().getSortedDimensions(e);return n.then(function(n){const o=e._oDrillDownPopover;const i=g(e);n=n.filter(function(e){return i.indexOf(e.name)<0});const s={items:[]};n.forEach(function(e){s.items.push({text:e.label,id:e.name})});o.setModel(new u(s),"$ChartDrilldown");if(s.items.length<7){const e=o.getSubHeader()||o.getContent()[0];e.setVisible(false)}return new Promise(function(e,n){o.attachEventOnce("afterOpen",function t(n){e(o)});o.openBy(t)})})};return D});
//# sourceMappingURL=DrillStackHandler.js.map