/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/valuehelp/base/Content","sap/ui/mdc/util/loadModules","sap/ui/mdc/enums/ValueHelpSelectionType","sap/ui/mdc/enums/ConditionValidated","sap/ui/mdc/util/Common"],function(e,t,n,i,o){"use strict";const l=e.extend("sap.ui.mdc.valuehelp.content.Conditions",{metadata:{library:"sap.ui.mdc",interfaces:["sap.ui.mdc.valuehelp.ITypeaheadContent","sap.ui.mdc.valuehelp.IDialogContent"],properties:{label:{type:"string"}},aggregations:{},associations:{fieldHelp:{type:"sap.ui.mdc.ValueHelp",multiple:false},valueHelp:{type:"sap.ui.mdc.ValueHelp",multiple:false}},events:{}}});l.prototype.init=function(){e.prototype.init.apply(this,arguments);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc")};l.prototype.exit=function(){o.cleanup(this,["_oScrollContainer","_oDefineConditionPanel"]);e.prototype.exit.apply(this,arguments)};l.prototype.getContent=function(){return this._retrievePromise("content",function(){const e=["sap/ui/mdc/valuehelp/base/DefineConditionPanel","sap/ui/model/base/ManagedObjectModel"];if(this.provideScrolling()){e.push("sap/m/ScrollContainer")}return t(e).then(function(e){const t=e[0];const n=e[1];const i=e.length>2&&e[2];this._oManagedObjectModel=new n(this);this._oDefineConditionPanel=new t(this.getId()+"-DCP",{label:"{$help>/label}",conditions:"{$help>/conditions}",inputOK:"{$valueHelp>/_valid}",config:{path:"$help>/config"},conditionProcessed:r.bind(this),valueHelp:this.getValueHelp()||this.getFieldHelp&&this.getFieldHelp()}).setModel(this._oManagedObjectModel,"$help");if(i){this._oScrollContainer=new i(this.getId()+"-SC",{height:"100%",width:"100%",vertical:true,content:[this._oDefineConditionPanel]});this.setAggregation("displayContent",this._oScrollContainer);return this._oScrollContainer}else{this.setAggregation("displayContent",this._oDefineConditionPanel);return this._oDefineConditionPanel}}.bind(this))}.bind(this))};l.prototype.getCount=function(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n];if(o.isEmpty!==true&&o.validated===i.NotValidated){t++}}return t};l.prototype.getUseAsValueHelp=function(){return false};l.prototype.getValueHelpIcon=function(){return"sap-icon://value-help"};l.prototype.isFocusInHelp=function(){return true};l.prototype.getInitialFocusedControl=function(){return this._oDefineConditionPanel.getInitialFocusedControl()};l.prototype.getRequiresTokenizer=function(){return true};l.prototype.getFormattedTitle=function(t){let n=e.prototype.getFormattedTitle.apply(this,arguments);if(!n){n=this._oResourceBundle.getText(t?"valuehelp.DEFINECONDITIONS":"valuehelp.DEFINECONDITIONSNONUMBER",[t])}return n};l.prototype.getFormattedShortTitle=function(){let e=this.getShortTitle();if(!e){e=this._oResourceBundle.getText("valuehelp.DEFINECONDITIONS.Shorttitle")}return e};l.prototype.getFormattedTokenizerTitle=function(e){let t=this.getTokenizerTitle();if(!t){t=this._oResourceBundle.getText("valuehelp.DEFINECONDITIONS.TokenizerTitle"+(e===0?"NoCount":""),[e])}return t};l.prototype.getAriaAttributes=function(e){return{contentId:this.getId()+"-DCP",ariaHasPopup:"dialog",roleDescription:null,valueHelpEnabled:true,autocomplete:"none"}};l.prototype.getContainerConfig=function(){return{"sap.ui.mdc.valuehelp.Popover":{showArrow:true,showHeader:true,getContentWidth:function(){return"500px"},getFooter:function(){return this._retrievePromise("footer",function(){return t(["sap/m/library","sap/m/Button"]).then(function(e){const t=e[0];const n=t.ButtonType;const i=e[1];const o=new i(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),enabled:"{$valueHelp>/_valid}",type:n.Emphasized,press:s.bind(this)});const l=new i(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:this.fireCancel.bind(this)});return[o,l]}.bind(this))}.bind(this))}.bind(this)}}};l.prototype.onContainerClose=function(){if(this._oDefineConditionPanel){this._oDefineConditionPanel.cleanUp()}};function s(e){this.fireConfirm({close:true})}function r(e){let t=this.getConditions();if(this.getMaxConditions()===1){t=t.filter(function(e){return e.validated==="NotValidated"})}this.fireSelect({type:n.Set,conditions:t})}return l});
//# sourceMappingURL=Conditions.js.map