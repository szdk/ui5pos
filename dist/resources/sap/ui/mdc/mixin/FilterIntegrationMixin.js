/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/base/Log","sap/ui/mdc/enums/ReasonMode"],function(t,e,i){"use strict";const n={};const o="sap.ui.mdc.IFilter";n.setFilter=function(e){const i=typeof e==="object"?e.getId():e;const n=this.getFilter();if(n!==i){this._validateFilter(e);const i=t.byId(this.getFilter());if(i){l(this,i)}this.setAssociation("filter",e,true);const n=t.byId(this.getFilter());if(n){a(this,n)}}return this};function r(t){const e=t.getParameter("reason");const n=t.getSource();const o=n.getLiveMode&&(n.getLiveMode()?e===i.Enter:e===i.Go);this._rebind(o);if(this._onFilterSearch){this._onFilterSearch(t)}}function s(t){if(this._onFiltersChanged){this._onFiltersChanged(t)}}function a(t,e){e.attachSearch(r,t);if(e.attachFiltersChanged instanceof Function){e.attachFiltersChanged(s,t)}if(t._onFilterProvided instanceof Function){t._onFilterProvided(e)}}function l(t,e){e.detachSearch(r,t);if(e.detachFiltersChanged instanceof Function){e.detachFiltersChanged(s,t)}if(t._onFilterRemoved instanceof Function){t._onFilterRemoved(e)}}function c(t){if(!(t&&t.getMetadata()&&t.getMetadata().hasAssociation("filter"))){throw new Error("Please add the 'filter' association to your control metadata"+t)}if(!(t.rebind instanceof Function)){throw new Error("Please implement the method 'rebind' for the control "+t)}if(!(t.isFilteringEnabled instanceof Function)){throw new Error("Please implement the method isFilteringEnabled for the control "+t)}}n._validateFilter=function(e){c(this);const i=typeof e==="object"?e:t.byId(e);if(i&&!i.isA(o)){throw new Error('"'+e+'" is not valid for association "filter".'+' Please use an object that implements the "'+o+'" interface')}};n.rebind=function(){if(this.bIsDestroyed){return}let e;let i;const n=t.byId(this.getFilter()),o=this.isFilteringEnabled();if(o||n){if(n){e=n.validate(true)}if(o){i=this.retrieveInbuiltFilter().then(function(t){return t.validate(true)})}Promise.all([e,i]).then(function(){this._rebind()}.bind(this),function(){})}else{this._rebind()}};n._getLabelsFromFilterConditions=function(){const t=[];if(this.getFilterConditions){const i=this.getFilterConditions();Object.keys(i).forEach(function(n){if(!i[n]||i[n].length<1){return}const o=this.getPropertyHelper().getProperty(n)?this.getPropertyHelper().getProperty(n).label:n;if(o){t.push(o)}if(!o||o===n){e.error("No valid property found for filter with key "+n+". Check your metadata.")}}.bind(this))}return t};return function(){this.setFilter=n.setFilter;this._validateFilter=n._validateFilter;this.rebind=n.rebind;this._getLabelsFromFilterConditions=n._getLabelsFromFilterConditions}});
//# sourceMappingURL=FilterIntegrationMixin.js.map