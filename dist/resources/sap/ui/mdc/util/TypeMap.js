/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/mdc/enums/BaseType","sap/ui/model/SimpleType","sap/base/util/ObjectPath","sap/ui/mdc/util/DateUtil","sap/base/util/merge"],function(t,e,n,a,s){"use strict";const i="yyyy-MM-dd";const r="HH:mm:ss";const o=new WeakMap;const u={};u._get=function(t){const e=this._getMap().get(t);if(typeof e==="string"){return this._get(e)}else if(e){return[t,e]}};u._set=function(t,e){const n=this._getMap();if(n._bFrozen){throw"TypeMap: You must not modify a frozen TypeMap"}n.set(t,e)};u._getMap=function(){let t=o.get(this);if(!t){t=new Map;o.set(this,t)}return t};u.set=function(t,e,n){this._set(t,[e,n])};u.setAlias=function(t,e){this._set(t,e)};u._getBaseType=function(t){const e=this._get(t);return e&&e[1][0]};u._getOptions=function(t){const e=this._get(t);return e&&e[1][1]};u._getClass=function(t){const e=this._get(t);return e&&e[0]};u.export=function(){return Array.from(this._getMap())};u.import=function(t){t.export().forEach(function(t){this._getMap().set(t[0],t[1])}.bind(this))};u.freeze=function(){this._getMap()._bFrozen=true};u.getBaseType=function(e,n,a){const s=this._getBaseType(e);return s&&(typeof s==="function"?s(n,a):s)||t.String};u.getBaseTypeForType=function(t){return this.getBaseType(t.getMetadata&&t.getMetadata().getName(),t.getFormatOptions(),t.getConstraints())};u.getDataTypeClassName=function(t){return this._getClass(t)||t};u.getDataTypeClass=function(t){const e=this.getDataTypeClassName(t);const a=e?sap.ui.require(e.replace(/\./g,"/"))||n.get(e):undefined;if(!a){throw new Error("DataType '"+t+"' cannot be determined")}return a};u.getDataTypeInstance=function(t,e,n,a){const i=this.getDataTypeClass(t);const r=this._getOptions(i.getMetadata().getName());const o=r&&r(s({},e),s({},n),a);e=o&&o[0]||e;n=o&&o[1]||n;return new i(e,n)};u.getTypeConfig=function(t,e,n){const a=this._normalizeType.call(this,t,e,n);return{className:a.getMetadata().getName(),typeInstance:a,baseType:this.getBaseTypeForType(a)}};u.externalizeValue=function(e,n,s,o){const u=this._normalizeType.call(this,n,s,o);const c=this.getBaseTypeForType(u);switch(c){case t.DateTime:return a.typeToISO(e,u,c);case t.Date:return a.typeToString(e,u,i);case t.Time:return a.typeToString(e,u,r);case t.Boolean:return e;case t.Numeric:if(typeof e!=="string"&&(u.getMetadata().getName()==="sap.ui.model.odata.type.Int64"||u.getMetadata().getName()==="sap.ui.model.odata.type.Decimal")){return e.toString()}return e;default:return u.formatValue(e,"string")}};u.internalizeValue=function(e,n,s,o){const u=this._normalizeType.call(this,n,s,o);const c=this.getBaseTypeForType(u);switch(c){case t.DateTime:return a.ISOToType(e,u,c);case t.Date:if(e.indexOf("T")>=0){e=e.substr(0,e.indexOf("T"))}return a.stringToType(e,u,i);case t.Time:return a.stringToType(e,u,r);case t.Boolean:return e;case t.Numeric:if(typeof e!=="string"&&(u.getMetadata().getName()==="sap.ui.model.odata.type.Int64"||u.getMetadata().getName()==="sap.ui.model.odata.type.Decimal")){return e.toString()}return e;default:return u.parseValue(e,"string")}};u._normalizeType=function(t,n,a){if(t instanceof e){return t}return this.getDataTypeInstance(t,n,a)};u.initializeTypeFromValue=function(t,e){return{}};u.initializeInternalType=function(t,e){};return u});
//# sourceMappingURL=TypeMap.js.map