/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object"],function(e){"use strict";const t=function(e){if(!e){throw new Error("PromiseCache: Please provide an identifier!")}if(this._oCache&&this._oCache[e]){this.remove.call(this,e)}};const i=function(e){if(typeof e==="object"&&this._oCache){for(const t in this._oCache){if(this._oCache[t].promise===e){return t}}}};const n=function(e,t){const n=typeof e==="string"?e:i.call(this,e);const o=n&&this._oCache&&this._oCache[n];if(t&&!o){throw new Error("PromiseCache: Promise not found!")}return o};const o=e.extend("sap.ui.mdc.util.PromiseCache",{constructor:function(){this._oCache={}},add:function(e,i){t.call(this,e);const n={};this._oCache[e]=n;n.promise=new Promise(function(e,t){n.resolve=function(t){if(!n._isCanceled){n._isSettled=true;e(t)}};n.reject=function(e){if(!n._isCanceled){n._isSettled=true;t(e)}}});n.promise.isSettled=function(){return!!n._isSettled};n.promise.isPending=function(){return!n._isSettled&&!n._isCanceled};n.promise.isCanceled=function(){return!!n._isCanceled};n.promise.getInternalPromise=function(){return n._promise};if(i){const e=typeof i==="function";const t=!e&&typeof i.then==="function";if(!e&&!t){throw new Error("PromiseCache: fnCreate must be a promise or function")}const o=e?i():i;const s=o&&typeof o.then==="function";if(s){n._promise=o;n._promise.then(function(e){if(!n._isCanceled){n._isSettled=true;n.resolve(e)}return e},function(e){if(!n._isCanceled){n._isSettled=true;n.reject(e)}})}else{n.resolve(o)}}return this._oCache[e].promise},cancel:function(e){const t=n.call(this,e,true);if(!t._isSettled){t._isCanceled=true}return t.promise},retrieve:function(e,t){const i=this._oCache&&this._oCache[e];if(!i&&t){return this.add.apply(this,[e,t])}return i&&i.promise},retrieveMany:function(){const e=[];const t=arguments.length?[].slice.call(arguments):Object.keys(this._oCache);for(let i=0;i<t.length;i++){e.push(this.retrieve(t[i].toString()))}return e},remove:function(e){const t=typeof e==="string"?e:i.call(this,e);const n=t&&this._oCache&&this._oCache[t];if(n){n._isCanceled=true;delete this._oCache[t]}},resolve:function(e,t){const i=n.call(this,e,true);i.resolve(t);return i.promise},reject:function(e,t){const i=n.call(this,e,true);i.reject(t);return i.promise},clear:function(){Object.keys(this._oCache).forEach(function(e){this.remove(e)}.bind(this))},destroy:function(){this.clear();this._oCache=null}});return o});
//# sourceMappingURL=PromiseCache.js.map