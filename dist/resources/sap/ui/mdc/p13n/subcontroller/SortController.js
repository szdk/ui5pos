/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./SelectionController","sap/ui/mdc/p13n/P13nBuilder","sap/m/p13n/SortPanel"],function(t,e,o){"use strict";const n=t.extend("sap.ui.mdc.p13n.subcontroller.SortController",{constructor:function(){t.apply(this,arguments);this._bResetEnabled=true}});n.prototype.getStateKey=function(){return"sorters"};n.prototype.getUISettings=function(){return{tabText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("p13nDialog.TAB_Sort"),title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("sort.PERSONALIZATION_DIALOG_TITLE")}};n.prototype.getDelta=function(e){e.deltaAttributes.push("descending");return t.prototype.getDelta.apply(this,arguments)};n.prototype.initAdaptationUI=function(t){const e=new o;const n=this.mixInfoAndState(t);e.setP13nData(n.items);this._oPanel=e;return Promise.resolve(e)};n.prototype.model2State=function(){const t=[];if(this._oPanel){this._oPanel.getP13nData(true).forEach(function(e){if(e.sorted){t.push({name:e.name})}});return t}};n.prototype.getChangeOperations=function(){return{add:"addSort",remove:"removeSort",move:"moveSort"}};n.prototype._getPresenceAttribute=function(t){return"sorted"};n.prototype.mixInfoAndState=function(t){const o=this.getCurrentState();const n=e.arrayToMap(o);const r=this.prepareAdaptationData(t,function(t,e){const o=n[e.name];t.sorted=o?true:false;t.sortPosition=o?o.position:-1;t.descending=o?!!o.descending:false;return!(e.sortable===false)});this.sortP13nData({visible:"sorted",position:"sortPosition"},r.items);r.presenceAttribute=this._getPresenceAttribute();r.items.forEach(function(t){delete t.sortPosition});return r};return n});
//# sourceMappingURL=SortController.js.map