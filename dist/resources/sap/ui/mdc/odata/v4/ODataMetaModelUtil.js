/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define([],function(){"use strict";const e=function(){};e.fetchAllAnnotations=function(e,t){const r=e.getMetaContext(t);return e.requestObject("@",r).then(function(e){return e})};e.getAllCustomAggregates=function(e){const t={};let r;for(const i in e){if(i.startsWith("@Org.OData.Aggregation.V1.CustomAggregate")){r=i.replace("@Org.OData.Aggregation.V1.CustomAggregate#","");const a=r.split("@");if(a.length==2){if(a[1]=="Org.OData.Aggregation.V1.ContextDefiningProperties"){t[a[0]].contextDefiningProperties=e[i]}if(a[1]=="com.sap.vocabularies.Common.v1.Label"){t[a[0]].label=e[i]}}else if(a.length==1){t[a[0]]={name:a[0],propertyPath:a[0],label:"Custom Aggregate ("+r+")",sortable:true,sortOrder:"both",custom:true}}}}return t};e.getAllAggregatableProperties=function(e){const t={};let r,i;if(e["@com.sap.vocabularies.Analytics.v1.AggregatedProperties"]){r=e["@com.sap.vocabularies.Analytics.v1.AggregatedProperties"];for(let e=0;e<r.length;e++){i=r[e];t[i.Value]={name:i.Value,propertyPath:i.AggregatableProperty.$PropertyPath,aggregationMethod:i.AggregationMethod,label:i["@com.sap.vocabularies.Common.v1.Label"]||"Aggregatable property ("+i.Value+")",sortable:true,sortOrder:"both",custom:false}}}return t};e.getAllDataPoints=function(t){const r={};for(const i in t){if(i.startsWith("@com.sap.vocabularies.UI.v1.DataPoint")){const a=i.replace("@com.sap.vocabularies.UI.v1.DataPoint#","");const n=t[i].Value.$Path;r[n]=r[n]||{};r[n][a]=e.createDataPointProperty(t[i])}}return r};e.createDataPointProperty=function(t){const r={};if(t.TargetValue){r.targetValue=t.TargetValue.$Path}if(t.ForeCastValue){r.foreCastValue=t.ForeCastValue.$Path}let i=null;if(t.Criticality){if(t.Criticality.$Path){i={Calculated:t.Criticality.$Path}}else{i={Static:t.Criticality.$EnumMember.replace("com.sap.vocabularies.UI.v1.CriticalityType/","")}}}else if(t.CriticalityCalculation){const r={};const a=e._buildThresholds(r,t.CriticalityCalculation);if(a){i={ConstantThresholds:r}}else{i={DynamicThresholds:r}}}if(i){r.criticality=i}return r};e._buildThresholds=function(e,t){const r=["AcceptanceRangeLowValue","AcceptanceRangeHighValue","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"];let i=true,a;e.ImprovementDirection=t.ImprovementDirection.$EnumMember.replace("com.sap.vocabularies.UI.v1.ImprovementDirectionType/","");const n={oneSupplied:false,usedMeasures:[]};const s={oneSupplied:false};for(let e=0;e<r.length;e++){a=r[e];n[a]=t[a]?t[a].$Path:undefined;n.oneSupplied=n.oneSupplied||n[a];if(!n.oneSupplied){s[a]=t[a];s.oneSupplied=s.oneSupplied||s[a]}else if(n[a]){n.usedMeasures.push(n[a])}}if(n.oneSupplied){i=false;for(let t=0;t<r.length;t++){if(n[r[t]]){e[r[t]]=n[r[t]]}}e.usedMeasures=n.usedMeasures}else{let i;e.AggregationLevels=[];if(s.oneSupplied){i={VisibleDimensions:null};for(let e=0;e<r.length;e++){if(s[r[e]]){i[r[e]]=s[r[e]]}}e.AggregationLevels.push(i)}if(t.ConstantThresholds&&t.ConstantThresholds.length>0){for(let a=0;a<t.ConstantThresholds.length;a++){const n=t.ConstantThresholds[a];const s=n.AggregationLevel?[]:null;if(n.AggregationLevel&&n.AggregationLevel.length>0){for(let e=0;e<n.AggregationLevel.length;e++){s.push(n.AggregationLevel[e].$PropertyPath)}}i={VisibleDimensions:s};for(let e=0;e<r.length;e++){const t=n[r[e]];if(t){i[r[e]]=t}}e.AggregationLevels.push(i)}}}return i};e.getSortRestrictionsInfo=function(e){let t,r;const i={sortable:true,propertyInfo:{}};if(e){i.sortable=e.Sortable!=null?e.Sortable:true;if(e.NonSortableProperties){for(t=0;t<e.NonSortableProperties.length;t++){r=e.NonSortableProperties[t].$PropertyPath;i[r]={sortable:false}}}if(e.AscendingOnlyProperties){for(t=0;t<e.AscendingOnlyProperties;t++){r=e.AscendingOnlyProperties[t].$PropertyPath;i[r]={sortable:true,sortDirection:"asc"}}}if(e.DescendingOnlyProperties){for(t=0;t<e.DescendingOnlyProperties;t++){r=e.DescendingOnlyProperties[t].$PropertyPath;i[r]={sortable:true,sortDirection:"desc"}}}}return i};e.addSortInfoForProperty=function(e,t){const r=t[e.name];e.sortable=t.sortable&&r?r.sortable:true;if(e.sortable){e.sortDirection=r?r.sortDirection:"both"}};e.getFilterRestrictionsInfo=function(e){let t,r;const i={filterable:true,propertyInfo:{}};if(e){i.filterable=e.Filterable!=null?e.Filterable:true;i.requiresFilter=e.RequiresFilter!=null?e.RequiresFilter:false;i.requiredProperties=[];if(i.RequiredProperties){for(t=0;t<e.NonFilterableProperties;t++){r=e.NonFilterableProperties[t].$PropertyPath;i.requiredProperties.push(r)}}if(e.NonFilterableProperties){for(t=0;t<e.NonFilterableProperties.length;t++){r=e.NonFilterableProperties[t].$PropertyPath;i[r]={filterable:false}}}if(e.FilterExpressionRestrictions){for(t=0;t<e.FilterExpressionRestrictions;t++){r=e.FilterExpressionRestrictions[t].$PropertyPath;i[r]={filterable:true,allowedExpressions:e.FilterExpressionRestrictions[t].AllowedExpressions}}}}return i};e.isMultiValueFilterExpression=function(e){let t=true;switch(e){case"SearchExpression":case"SingleRange":case"SingleValue":t=false;break;default:break}return t};e.addFilterInfoForProperty=function(e,t){const r=t[e.name];e.filterable=t.filterable&&r?r.filterable:true;if(e.filterable){e.allowedExpressions=r?r.allowedExpressions:null}};e.fetchCalendarTag=function(e,t){const r="@com.sap.vocabularies.Common.v1.";return Promise.all([e.requestObject(r+"IsCalendarYear",t),e.requestObject(r+"IsCalendarHalfyear",t),e.requestObject(r+"IsCalendarQuarter",t),e.requestObject(r+"IsCalendarMonth",t),e.requestObject(r+"IsCalendarWeek",t),e.requestObject(r+"IsDayOfCalendarMonth",t),e.requestObject(r+"IsDayOfCalendarYear",t),e.requestObject(r+"IsCalendarYearHalfyear",t),e.requestObject(r+"IsCalendarYearQuarter",t),e.requestObject(r+"IsCalendarYearMonth",t),e.requestObject(r+"IsCalendarYearWeek",t),e.requestObject(r+"IsCalendarDate",t)]).then(function(e){if(e[0]){return"year"}if(e[1]){return"halfYear"}if(e[2]){return"quarter"}if(e[3]){return"month"}if(e[4]){return"week"}if(e[5]){return"dayOfMonth"}if(e[6]){return"dayOfYear"}if(e[7]){return"yearHalfYear"}if(e[8]){return"yearQuarter"}if(e[9]){return"yearMonth"}if(e[10]){return"yearWeek"}if(e[11]){return"date"}return undefined})};e.fetchFiscalTag=function(e,t){const r="@com.sap.vocabularies.Common.v1.";return Promise.all([e.requestObject(r+"IsFiscalYear",t),e.requestObject(r+"IsFiscalPeriod",t),e.requestObject(r+"IsFiscalYearPeriod",t),e.requestObject(r+"IsFiscalQuarter",t),e.requestObject(r+"IsFiscalYearQuarter",t),e.requestObject(r+"IsFiscalWeek",t),e.requestObject(r+"IsFiscalYearWeek",t),e.requestObject(r+"IsDayOfFiscalYear",t),e.requestObject(r+"IsFiscalYearVariant",t)]).then(function(e){if(e[0]){return"year"}if(e[1]){return"period"}if(e[2]){return"yearPeriod"}if(e[3]){return"quarter"}if(e[4]){return"yearQuarter"}if(e[5]){return"week"}if(e[6]){return"yearWeek"}if(e[7]){return"dayOfYear"}if(e[8]){return"yearVariant"}return undefined})};e.fetchCriticality=function(e,t){const r="@com.sap.vocabularies.UI.v1";return e.requestObject(r+".ValueCriticality",t).then(function(e){let t,r;if(e){t={VeryPositive:[],Positive:[],Critical:[],VeryNegative:[],Negative:[],Neutral:[]};for(let i=0;i<e.length;i++){r=e[i];if(r.Criticality.$EnumMember.endsWith("VeryPositive")){t.VeryPositive.push(r.Value)}else if(r.Criticality.$EnumMember.endsWith("Positive")){t.Positive.push(r.Value)}else if(r.Criticality.$EnumMember.endsWith("Critical")){t.Critical.push(r.Value)}else if(r.Criticality.$EnumMember.endsWith("VeryNegative")){t.VeryNegative.push(r.Value)}else if(r.Criticality.$EnumMember.endsWith("Negative")){t.Negative.push(r.Value)}else{t.Neutral.push(r.Value)}}for(const e in t){if(t[e].length==0){delete t[e]}}}return t})};return e});
//# sourceMappingURL=ODataMetaModelUtil.js.map