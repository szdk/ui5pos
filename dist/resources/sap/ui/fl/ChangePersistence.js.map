{"version":3,"file":"ChangePersistence.js","names":["sap","ui","define","union","includes","merge","Log","JsControlTreeModifier","Component","Applier","ChangesUtils","FlexObjectFactory","States","DependencyHandler","VariantManagementState","DataSelector","FlexState","Version","Settings","Condenser","Storage","Layer","LayerUtils","Utils","Measurement","oVariantIndependentUIChangesDataSelector","id","parentDataSelector","getFlexObjectsDataSelector","executeFunction","aFlexObjects","filter","oFlexObject","bIsUIChange","isA","bIsControllerExtension","bCorrectFileType","getFileType","getVariantReference","getSelector","persistencyKey","ChangePersistence","mComponent","this","_mComponent","_mChanges","createEmptyDependencyMap","_bChangesMapCreated","_mChangesInitial","name","error","Error","_aDirtyChanges","_oMessagebundle","undefined","_mChangesEntries","clearCachedResult","reference","async","getChangesFromFlexState","sReference","mPropertyBag","bInvalidateCache","update","getStorageResponse","oError","prototype","getChangesForComponent","aAllChanges","get","length","aRelevantUIChanges","includeCtrlVariants","concat","getInitialChanges","getVariantDependentFlexObjects","currentLayer","filterChangeOrChangeDefinitionsByCurrentLayer","forEach","getId","bind","loadChangesMapForComponent","oAppComponent","component","then","createChangeMap","aChanges","start","addChangeAndUpdateDependencies","end","getChangesMapForComponent","getOpenDependentChangesForControl","oSelector","getControlIdBySelector","getInitialDependencyClone","oChange","mInitialDependencies","mDependencies","copyDependencies","oInitialDependency","aNewValidDependencies","sControlId","aNewValidControlDependencies","controlsDependencies","oDependentControlSelector","bySelector","push","mControlsWithDependencies","dependencies","copyDependenciesFromInitialChangesMap","fnDependencyValidation","call","sChangeId","mDependentChangesOnMe","oReferenceChange","setInitialApplyState","insertChange","_addRunTimeCreatedChangeAndUpdateDependencies","addRuntimeChangeAndUpdateDependencies","getAllUIChanges","includeDirtyChanges","getDirtyChanges","Boolean","compareAgainstCurrentLayer","getLayer","layer","isChangeMapCreated","getChangesForView","filterChangeByView","finalizeChangeCreation","_addPropagationListener","addChange","vChange","addDirtyChange","addChanges","aNewChanges","addDirtyChanges","bSkipAddToState","oNewChange","createFromFileContent","indexOf","addDirtyFlexObject","map","addDirtyFlexObjects","oComponent","getAppComponentForControl","fnCheckIsNotFlPropagationListener","fnPropagationListener","_bIsSapUiFlFlexControllerApplyChangesOnControl","bNoFlPropagationListenerAttached","getPropagationListeners","every","oFlexControllerFactory","require","oFlexController","create","applyAllChangesForControl","addPropagationListener","_deleteNotSavedChanges","aCondensedChanges","bAlreadyDeletedViaCondense","some","oCondensedChange","removeChange","updateStorageResponse","flexObject","convertToFileContent","type","deleteChange","checkIfOnlyOne","sFunctionName","aProperties","aUniqueProperties","sValue","iIndex","canGivenChangesBeCondensed","bCondenseAnyLayer","bCondenserEnabled","sLayer","CUSTOMER","USER","oUriParameters","URLSearchParams","window","location","search","has","isBackendCondensingEnabled","bEnabled","getInstanceOrUndef","isCondensingEnabled","updateCacheAndDeleteUnsavedChanges","bSkipUpdateCache","_massUpdateCacheAndDirtyState","getAllRelevantChangesForCondensing","aDirtyChanges","aDraftFilenames","aPersistedAndSameLayerChanges","getState","LifecycleState","PERSISTED","checkLayerAndSingleTransportRequest","aRequests","getRequests","bCheckLayer","hasPersoConnector","aLayers","getLayers","executeWriteAndRemoveCalls","sCurrentLayer","sRequest","sParentVersion","aCondensedDeleteChanges","pRemoveCallsPromise","Promise","resolve","DELETED","saveSequenceOfDirtyChanges","write","flexObjects","prepareDirtyChanges","transport","isLegacyVariant","parentVersion","oResponse","saveDirtyChanges","aRelevantChangesForCondensing","bIsCondensingEnabled","aChangesClone","slice","oCondensedChangesPromise","condense","allChanges","condensedChanges","oFirstNewChange","NEW","shift","reduce","oPreviousPromise","oDirtyChange","performSingleSaveAction","_updateCacheAndDirtyState","oFirstChange","Number","Draft","getRequest","remove","oExistingDirtyChange","DIRTY","bRunTimeCreatedChange","bSkipRemoveFromFlexState","nIndexInDirtyChanges","splice","removeDirtyFlexObject","_deleteChangeInMap","markForDeletion","deleteChanges","bRunTimeCreatedChanges","removeDirtyFlexObjects","sChangeKey","removeChangeFromMap","removeChangeFromDependencies","isLocalAndInLayer","oObject","isPersistedAndInLayer","getAllCompVariantsEntities","aCompVariantEntities","mCompVariantsMap","getCompVariantsMap","sPersistencyKey","sId","byId","transportAllUIChanges","oRootControl","sStyleClass","aAppVariantDescriptors","aLocalChanges","publish","transportDialogSettings","styleClass","localChanges","appVariantDescriptors","_getChangesFromMapByNames","aNames","removeDirtyChanges","vLayer","oControl","sGenerator","aChangeTypes","aChangesToBeRemoved","bChangeValid","getSupportInformation","generator","vSelector","getChangeType","nIndex","resetChanges","aSelectorIds","bSelectorIdsProvided","bChangeTypesProvided","isPublicLayerAvailable","isApplicationReset","aCompVariantsEntries","aUiChanges","mParams","changes","selectorIds","changeTypes","reset","response","oChangeContentId","fileName","aChangesToRevert"],"sources":["ChangePersistence-dbg.js"],"mappings":"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"}