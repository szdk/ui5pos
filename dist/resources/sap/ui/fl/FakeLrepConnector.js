/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/initial/_internal/FlexConfiguration","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils","sap/ui/fl/write/_internal/connectors/ObjectPathConnector"],function(e,t,r,i){"use strict";var n={};var a="sap.ui.fl";n.prototype={};n.enableFakeConnector=function(e){this.setFlexibilityServicesAndClearCache("LocalStorageConnector",e)};n.setFlexibilityServicesAndClearCache=function(r,n){this._oFlexibilityServices=e.getFlexibilityServices();var a=[];if(n){i.setJsonPath(n);a.push({connector:"ObjectPathConnector"})}a.push({connector:r});e.setFlexibilityServices(a);t.clearState()};n.disableFakeConnector=function(){n.prototype={};t.clearState();if(this._oFlexibilityServices){e.setFlexibilityServices(this._oFlexibilityServices);delete this._oFlexibilityServices}};n.forTesting={getNumberOfChanges(e,t){return e.loadFlexData({reference:t}).then(function(e){return e.reduce(function(e,t){return e+t.changes.length},0)})},spyMethod(e,t,r,i){var n=e.spy(r,i);return function(e,r){r||=0;var a=n.getCall(r).args[0].flexObjects.length;t.equal(a,e,`${i} was called ${e} times`)}},clear(e,r){t.clearState();return e.reset(r)},setStorage(e,t){e.storage=t},synchronous:{clearAll(e){var t=function(t){var r=t.includes(a);if(!r){return}e.removeItem(t)};Object.keys(e).map(t)},store(e,t,i){var n=r.createFlexKey(t);var a=JSON.stringify(i);e.setItem(n,a)},getNumberOfChanges(e,t){return Object.keys(e).filter(function(i){return i.includes(a)&&r.isSameReference(JSON.parse(e.getItem(i)),t)}).length}}};return n},true);
//# sourceMappingURL=FakeLrepConnector.js.map