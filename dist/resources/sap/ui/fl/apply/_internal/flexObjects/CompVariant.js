/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/restricted/_pick","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/apply/_internal/flexObjects/Variant","sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/fl/Utils"],function(t,e,r,i,n,a,s){"use strict";var o=r.extend("sap.ui.fl.apply._internal.flexObjects.CompVariant",{metadata:{properties:{persisted:{type:"boolean",defaultValue:true},persistencyKey:{type:"string"}},aggregations:{revertData:{type:"sap.ui.base.ManagedObject",multiple:true,singularName:"revertData"},changes:{type:"sap.ui.base.ManagedObject",multiple:true}}},constructor:function(...t){const[e]=t;r.apply(this,t);this.setFileType("variant");if(e.favorite!==undefined){this.setFavorite(!!e.favorite)}else if(e.layer===n.VENDOR||e.layer===n.CUSTOMER_BASE){this.setFavorite(true)}}});o.STANDARD_VARIANT_ID="*standard*";o.getMappingInfo=function(){return Object.assign(r.getMappingInfo(),{persistencyKey:"selector.persistencyKey",standardVariant:"standardVariant",variantId:"variantId"})};o.prototype.getMappingInfo=function(){return o.getMappingInfo()};function p(t){var e=a.getInstanceOrUndef();var r=e&&e.getUserId();return!r||!t||r.toUpperCase()===t.toUpperCase()}function u(t,e,r){if(e){return t===e}else if(t===n.USER){return true}var s=a.getInstanceOrUndef();if(i.isSapUiLayerParameterProvided()){e=i.getCurrentLayer()}else{e||=s.isPublicLayerAvailable()?n.PUBLIC:n.CUSTOMER}var o=t===e;var u=s.isKeyUser()||p(r);return o&&u}function c(t){return!t||s.getCurrentLanguage()===t}function l(t,e){var r=a.getInstanceOrUndef();if(!r){return true}if(!t||!e){return true}var i=r.getSystem();var n=r.getClient();return i===t&&e===n}o.prototype.getPackage=function(){return this.getFlexObjectMetadata().packageName};o.prototype.isVariant=function(){return true};o.prototype.isRenameEnabled=function(t){return!this.getStandardVariant()&&this.isEditEnabled(t)&&c(this.getSupportInformation().originalLanguage)};o.prototype.isEditEnabled=function(t){var e=t&&i.isDeveloperLayer(t);var r=l(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);var n=u(this.getLayer(),t,this.getOwnerId());return e||r&&n};o.prototype.isDeleteEnabled=function(t){var e=l(this.getSupportInformation().sourceSystem,this.getSupportInformation().sourceClient);return e&&u(this.getLayer(),t,this.getOwnerId())&&!this.getStandardVariant()};o.prototype.storeFavorite=function(t){if(t!==this.getFavorite()){this.setState(e.LifecycleState.DIRTY);this.setFavorite(t)}};o.prototype.storeVisible=function(t){if(t!==this.getVisible()){this.setState(e.LifecycleState.DIRTY);this.setVisible(t)}};o.prototype.getOwnerId=function(){return this.getSupportInformation().user||""};o.prototype.storeContent=function(t){this.setContent(t)};o.prototype.storeExecuteOnSelection=function(t){if(t!==this.getExecuteOnSelection()){this.setState(e.LifecycleState.DIRTY);this.setExecuteOnSelection(t)}};o.prototype.storeName=function(t){this.setName(t)};o.prototype.storeContexts=function(t){this.setContexts(t);this.setState(e.LifecycleState.DIRTY)};o.prototype.cloneFileContentWithNewId=function(...t){var e=r.prototype.cloneFileContentWithNewId.apply(this,t);e.variantId=e.fileName;return e};return o});
//# sourceMappingURL=CompVariant.js.map