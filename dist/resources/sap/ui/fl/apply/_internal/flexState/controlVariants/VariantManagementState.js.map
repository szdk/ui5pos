{"version":3,"file":"VariantManagementState.js","names":["sap","ui","define","_omit","_pick","ObjectPath","JsControlTreeModifier","VariantsApplyUtil","DataSelector","States","FlexState","LayerUtils","Utils","VariantManagementState","mCurrentVariantReferences","getInitialCurrentVariant","sReference","aCtrlVariantManagementChanges","aVariants","oComponentData","getComponentData","aVariantReferencesFromUrl","get","VARIANT_TECHNICAL_PARAMETER","aVariantKeys","filter","oVariant","visible","map","key","sDesiredSelectedVariantId","find","sVariantKey","includes","reverse","oVariantManagementChange","getContent","defaultVariant","sDesiredDefaultVariantKey","createVariantManagement","aFlexObjects","sVMReference","sCurrentVariantReference","currentVariant","variants","variantManagementChanges","oFlexObject","getFileType","getSelector","id","findVariantInFlexObjects","sId","getId","getAllReferencedVariantIds","oCurrentVariant","oFoundVariant","getVariantReference","push","createVariantEntry","oVariantInstance","instance","variantChanges","controlChanges","bCorrectFlexObjectType","isA","bOwnControlChange","aReferencedVariantIds","bControlChangeOfReferencedVariant","indexOf","bLowerLayerChange","compareAgainstCurrentLayer","getLayer","title","getName","layer","favorite","getFavorite","executeOnSelect","getExecuteOnSelection","getVisible","author","getSupportInformation","user","contexts","getContexts","isStandardVariant","getStandardVariant","applyVariantChange","oVariantEntry","oVariantChange","getChangeType","getText","Error","applyVariantManagementChange","oVariantManagementEntry","sDesiredDefaultVariant","forEach","createVariantsMap","getFlexObjectMetadata","reference","oVariantManagementsMap","getVariantManagementReference","findVariant","Object","keys","oVariantManagement","some","sCurrentVariant","set","sort","oVariant1","oVariant2","toLowerCase","aCurrentVariantChanges","modified","oChange","isPersisted","getSavedToVariant","oVariantsMap","values","oVariantsMapEntry","oVariantManagementMapDataSelector","parentDataSelector","getFlexObjectsDataSelector","executeFunction","oVariantManagementsDataSelector","parameterKey","oVariantsDataSelector","sVariantReference","oVariantDependentFlexObjectsDataSelector","bVariantRelatedChange","getVariantDependentFlexObjects","resetCurrentVariantReference","checkUpdate","getVariantManagementMap","addRuntimeSteadyObject","sComponentId","clearRuntimeSteadyObjects","getControlChangesForVariant","mPropertyBag","aResult","getVariant","includeDirtyChanges","getState","LifecycleState","PERSISTED","getVariantChangesForVariant","sVReference","vReference","variantManagementReference","vmReference","variantReference","getCurrentVariantReference","oVariantManagementSection","getVariantManagementReferences","getAllVariants","reduce","aPrev","sCurr","concat","getInitialChanges","aInitialChanges","mArguments","assign","setCurrentVariant","newVReference","waitForInitialVariantChanges","aControls","aCurrentControls","oSelector","oControl","bySelector","appComponent","indexOfObject","selector","length","flexController","waitForChangesToBeApplied","Promise","resolve"],"sources":["VariantManagementState-dbg.js"],"mappings":"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"}