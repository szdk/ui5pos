{"version":3,"file":"Applier.js","names":["sap","ui","define","Log","formatMessage","Element","JsControlTreeModifier","FlexCustomData","Utils","DependencyHandler","FlUtils","oLastPromise","FakePromise","Promise","resolve","formatAndLogMessage","sLogType","aMessageComponents","aValuesToInsert","sCallStack","sLogMessage","join","checkControlAndDependentSelectorControls","oChange","mPropertyBag","oSelector","getSelector","id","name","reject","Error","checkFailedSelectors","indexOfObject","failedSelectors","modifier","bySelectorTypeIndependent","appComponent","view","then","oControl","aDependentControlSelectorList","getDependentControlSelectorList","forEach","oDependentControlSelector","oDependentControl","bySelector","isXmlModifier","targets","checkAndAdjustChangeStatus","mChangesMap","oFlexController","oOriginalControl","getControlIfTemplateAffected","control","oModifier","bHasAppliedCustomData","getAppliedCustomDataValue","bIsCurrentlyAppliedOnControl","hasChangeApplyFinishedCustomData","bChangeStatusAppliedFinished","isApplyProcessFinished","oAppComponent","fnCheckFunction","checkIfDependencyIsStillValid","bind","_oChangePersistence","copyDependenciesFromInitialChangesMap","setInitialApplyState","setRevertData","getParsedRevertDataFromCustomData","markSuccessful","markFailed","checkPreconditions","sErrorMessage","getJsOnly","handleAfterApply","mControl","oInitializedControl","updateAggregation","originalControl","getContent","boundAggregation","undefined","addAppliedCustomData","oResult","success","handleAfterApplyError","oError","bXmlModifier","error","sChangeId","getId","bErrorOccurred","sCustomDataIdentifier","getCustomDataIdentifier","notApplicableChangesCustomDataKey","message","failedChangesCustomDataKeyXml","stack","failedChangesCustomDataKeyJs","addFailedCustomData","logApplyChangeError","sChangeType","getChangeType","sTargetControlId","fullQualifiedName","getNamespace","getFileType","sWarningMessage","warning","adjustOriginalSelector","oPropertyBag","oCurrentOriginalControl","originalSelectorToBeAdjusted","oActualOriginalControl","getBindingInfo","template","getParent","aStack","oTempControl","push","aggregation","sParentAggregationName","index","getAggregation","indexOf","reverse","oInfo","addDependentControl","registerOnAfterXMLChangeProcessingHandler","aOnAfterXMLChangeProcessingHandlers","oChangeHandler","iChangeHandlerIndex","findIndex","mHandler","handler","length","controls","includes","Applier","addPreConditionForInitialChangeApplying","oPromise","applyChangeOnControl","pHandlerPromise","changeHandler","getChangeHandler","hasApplyProcessStarted","addPromiseForApplyProcessing","startApplying","applyChange","catch","applyAllChangesForControl","fnGetChangesMap","sControlId","aChangesForControl","mChanges","getViewForControl","_ignoreOnce","setQueuedForApply","aPromiseStack","bControlWithDependencies","mControlsWithDependencies","removeControlsDependencies","resolveDependenciesForChange","mDependencies","fnCallback","addChangeApplyCallbackToDependency","execPromiseQueueSequentially","processDependentQueue","applyAllChangesForXMLView","aChanges","Array","isArray","reduce","oPreviousPromise","oReturnedControl","onAfterXMLChangeProcessing","oReturn","getDependentSelectorList"],"sources":["Applier-dbg.js"],"mappings":"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"}