{"version":3,"file":"Versions.js","names":["sap","ui","define","ChangePersistenceFactory","Utils","Version","Settings","Storage","JSONModel","BindingMode","_mInstances","MODEL_SIZE_LIMIT","BACKEND_REQUEST_LIMIT","createModel","bVersioningEnabled","aVersions","_prepareVersionsModel","then","oModel","setDefaultBindingMode","OneWay","setSizeLimit","setDirtyChanges","bDirtyChanges","setProperty","updateDraftVersion","updateBindings","getProperty","bBackendDraft","bDraftAvailable","Number","Draft","_doesDraftExistInVersions","splice","version","type","Type","filenames","isPublished","shift","bActivateEnabled","oVersionsModel","sPersistedBasisForDisplayedVersion","bPublishVersionEnabled","sActiveVersion","Original","aDraftFilenames","length","forEach","oVersion","Active","Inactive","getUShellService","oURLParsingService","sUrlVersionParameter","getParameter","UrlParameter","publishVersionEnabled","versioningEnabled","versions","backendDraft","dirtyChanges","draftAvailable","activateEnabled","activeVersion","persistedVersion","displayedVersion","draftFilenames","_removeDirtyChanges","mPropertyBag","oDirtyChangeInfo","aDirtyChanges","aChangePersistences","changePersistences","oChangePersistence","getDirtyChanges","concat","deleteChanges","_getDirtyChangesInfo","oDirtyChangesInfo","dirtyChangesExist","reference","oChangePersistenceForAppDescriptorChanges","getChangePersistenceForComponent","push","nonNormalizedReference","some","_updateVersionModelWhenDiscardOrActivate","iNewVersion","Versions","initialize","sReference","sLayer","layer","limit","getInstance","oSettings","bVersionsEnabled","isVersioningEnabled","aVersionsPromise","load","Promise","resolve","getVersionsModel","hasVersionsModel","Error","clearInstances","updateModelFromBackend","undefined","onAllChangesSaved","contextBasedAdaptation","activate","bDraftExists","reject","bDirtyChangesExists","oVersionEntry","discardDraft","bBackendDraftExists","oDiscardPromise","bDirtyChangesRemoved","backendChangesDiscarded","dirtyChangesDiscarded","publish","sMessage","bIsPublishedOrOlderVersion"],"sources":["Versions-dbg.js"],"mappings":"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"}