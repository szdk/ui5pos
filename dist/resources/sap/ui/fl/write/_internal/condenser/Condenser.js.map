{"version":3,"file":"Condenser.js","names":["sap","ui","define","each","isPlainObject","ObjectPath","Log","JsControlTreeModifier","Element","CondenserClassification","ChangesUtils","UIChange","States","LastOneWins","Reverse","Update","UIReconstruction","CondenserUtils","FlUtils","Measurement","_isEqual","Condenser","UNCLASSIFIED","NON_INDEX_RELEVANT","lastOneWins","reverse","update","PROPERTIES_WITH_SELECTORS","isCreateAfterMoveSubtype","mSubtypes","oCondenserInfo","aMoveSubType","Move","classification","Create","length","targetContainer","isMoveAfterDestroySubtype","Destroy","isCreateAfterDestroySubtype","mClassifications","addIndexRelatedChange","mUIReconstructions","oChange","sClassification","change","condenserState","updateChange","forEach","addChange","addNonIndexRelatedChange","mProperties","addToChangesMap","Promise","resolve","addClassifiedChange","mTypes","aIndexRelatedChanges","type","NOT_INDEX_RELEVANT","push","targetAggregation","addUnclassifiedChange","sKey","getCondenserInfoFromChangeHandler","oAppComponent","sControlId","getControlIdBySelector","getSelector","oControl","getElementById","mPropertyBag","modifier","appComponent","view","getViewForControl","mControl","getControlIfTemplateAffected","getChangeHandler","then","oChangeHandler","getCondenserInfo","undefined","bTemplateAffected","replaceTemplateSelector","catch","oOriginalSelector","getOriginalSelector","oTemplateSelector","sPropertyName","getTypesMap","mReducedChanges","sAffectedControlId","affectedControl","updateControl","sUpdateControlId","aPath","uniqueKey","oUpdateCondenserInfo","get","set","defineMaps","aChanges","reduce","oPromise","addChangeToMap","bind","this","changeSelectorsToIdsInCondenserInfo","addType","condenseUpdateChange","INDEX_RELEVANT","isPersisted","updateContent","setState","LifecycleState","DIRTY","getChanges","mObjects","vSubObjects","getChangesFromMap","Array","isArray","oObject","getAllReducedChanges","getCondenserInfos","aCondenserInfos","sortByInitialOrder","aReducedChanges","sort","a","b","indexOf","sortCondenserInfosByInitialOrder","addAllIndexRelatedChanges","aReducedChangeIds","map","getId","handleChangeUpdate","aReducedIndexRelatedChangesPerContainer","oUpdateChange","getContent","getState","NEW","oLastChange","oNewContent","setContent","setRevertData","getRevertData","aReducedIndexRelatedChanges","iIndex","condense","start","aAllIndexRelatedChanges","aNotCondensableChanges","aCondensableChanges","slice","DELETED","isSuccessfullyApplied","end","bUnclassifiedChanges","compareAndUpdate","concat","bSuccess","sortIndexRelatedChanges","oError","error","message","filter","swapChanges"],"sources":["Condenser-dbg.js"],"mappings":"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"}