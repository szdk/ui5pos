{"version":3,"file":"ObjectStorageConnector.js","names":["sap","ui","define","hash","_uniqBy","each","merge","BaseConnector","StorageUtils","ObjectStorageUtils","loadDataFromStorage","mPropertyBag","aFlexObjects","forEachObjectInStorage","mFlexObject","push","changeDefinition","then","shouldChangeBeDeleted","oChangeDefinition","bDelete","selectorIds","selector","indexOf","id","changeTypes","changeType","setFlexObjectCreation","oFlexObject","iCounter","creation","nCreationTimestamp","Date","now","toISOString","calculateCacheKey","reduce","sKey","getTime","forEveryMapInArrayInMap","mMap","fnCallback","sOuterKey","aArray","forEach","mInnerMap","sInnerKey","oContent","handleCondenseCreate","oCreateInfos","aCondensedChanges","aReturn","oFlexObjectFileContent","sChangeId","createFlexKey","find","oCurrentFlexObject","getId","fileName","getCreation","setCreation","key","value","handleCondenseUpdate","oUpdateInfos","aCondenserChanges","oUpdatedFlexObject","some","handleCondenseReorder","oReorderInfos","sFileType","aChangeIds","length","aFilteredFlexObjects","filter","getFileType","iIndex","oNextFlexObject","oCurrentDate","oNextDate","oNewDateTime","handleCondenseDelete","oDeleteInformation","aPromises","Object","values","this","storage","removeItem","bind","ObjectStorageConnector","undefined","layers","loadFlexData","reference","sortFlexObjects","mGroupedFlexObjects","getGroupedFlexObjects","aResponses","filterAndSortResponses","cacheKey","write","aUpdatedFlexObjects","flexObjects","createFlexObjectKey","vUpdatedFlexObject","_itemsStoredAsObjects","JSON","stringify","setItem","response","update","flexObject","vFlexObject","vSetResponse","Promise","resolve","reset","layer","aResponse","remove","vRemoveResponse","loadFeatures","isKeyUser","isVariantSharingEnabled","isProductiveSystem","isCondensingEnabled","isContextSharingEnabled","getFlexInfo","getAllFlexObjects","isResetEnabled","condense","oCondenseInformation","aObjectsToSet","concat","create","condensedChanges","reorder","call","delete","oItemToSet","oFileContent","convertToFileContent","all"],"sources":["ObjectStorageConnector-dbg.js"],"mappings":"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"}