{"version":3,"file":"ContextBasedAdaptationsAPI.js","names":["sap","ui","define","Lib","Adaptations","FeaturesAPI","FlexObjectFactory","ManifestUtils","ControlVariantApplyAPI","Layer","LayerUtils","FlexUtils","FlexInfoSession","FlexObjectState","CompVariantMerger","CompVariantState","VariantManagementState","Storage","Versions","JSONModel","_mInstances","_oResourceBundle","aMigrationLayers","VENDOR","PARTNER","CUSTOMER_BASE","CUSTOMER","ContextBasedAdaptationsAPI","getFlexReferenceForControl","oControl","sReference","Error","handleResponseForVersioning","oResponse","mPropertyBag","bDelete","updateModelFromBackend","reference","appId","layer","then","onAllChangesSaved","contextBasedAdaptation","Promise","resolve","initialize","getResourceBundleFor","reject","control","sLayer","bContextBasedAdaptationsEnabled","isContextBasedAdaptationAvailable","bContextBasedAdaptationsEnabledResponse","oAdaptationsPromise","load","adaptations","oAdaptations","oFlexInfoSession","get","oDisplayedAdaptation","adaptationId","find","oAdaptation","id","createModel","oModel","aAdaptations","Array","isArray","length","allAdaptations","count","displayedAdaptation","contextBasedAdaptationsEnabled","updateAdaptations","aContextBasedAdaptations","filter","iIndex","rank","type","Type","Default","setProperty","getProperty","oCorrespondingAdaptation","Object","assign","updateBindings","insertAdaptation","oNewAdaptation","splice","priority","deleteAdaptation","iModelCount","sToBeDisplayedAdaptationId","oDefaultAdaptation","pop","push","switchDisplayedAdaptation","sAdaptationId","getIndexByAdaptationId","oNewDisplayedAdaptation","updateAdaptationContent","oContextBasedAdaptation","oAdaptationForUpdate","title","contexts","aDisplayedAdaptation","iAdaptationIndex","findIndex","undefined","getAdaptationsModel","hasAdaptationsModel","getDisplayedAdaptationId","this","adaptationExists","clearInstances","refreshAdaptationModel","getNewVariantId","mFileNames","sOldVariantId","createContextBasedAdaptation","create","flexObject","parentVersion","getParentVersion","bind","writeChangesToBackend","aFlexObjects","write","flexObjects","transport","isLegacyVariant","getFinalState","aFlVariantsFinalState","oVariant","isA","aVariantChanges","oFlexObject","getChangeType","getSelector","variantId","getId","oClone","clone","forEach","applyChangeOnVariant","removeAllChanges","destroy","mProperties","oFlVariant","key","groupVariantsByContextEntry","aVariants","oFinalStates","mUniqueContexts","aUnrestrictedViews","oFinalState","visible","bUnrestricted","aContextKeys","keys","sKey","aContexts","from","sContext","variants","contextBasedAdaptationId","createDefaultFileName","uniqueContexts","unrestrictedViews","createChangeSetVisibleFalseToRestrictedVariant","sPersistencyKey","getPersistencyKey","updateVariant","persistencyKey","forceCreate","getChanges","reverse","convertToFileContent","oAppComponent","getAppComponentForControl","getModel","getVariantModelName","oChange","createVariantChange","getVariantManagementReference","changeType","variantReference","appComponent","getObjectsByLayerAndType","sChangesLayer","bVariants","getLayer","getVariantReference","sFileType","getFileType","isSetContextChange","filterChangesForAdaptation","aIgnoredVariantIds","aChanges","sVariantId","indexOf","copyVariantsAndChanges","sContextBasedAdaptationId","Map","aCopiedVariants","copyVariants","aCopiedChanges","copyChanges","concat","map","aCopiedFlexObjects","oCopiedVariant","createFromFileContent","cloneFileContentWithNewId","setAdaptationId","setContexts","set","oCopiedChange","oCopiedChangeContent","getContent","oCopiedChangeSelector","setSelector","defaultVariantName","setContent","setVariantReference","defaultVariant","getVersionsModel","prepareMigrationData","oMigrationData","contextBasedAdaptations","oGrouped","entries","aEntry","oUniqueContext","getText","role","aCustomerLayerVariants","oContextRelevantVariant","aUniqueContextVariantIds","aVariantIdsNotInUniqueContext","aChangesToCopy","bRestricted","migrate","sParentVersion","aFlexObjectsData","getAllVariants","getFlexObjects","selector","invalidateCache","includeCtrlVariants","includeDirtyChanges","all","flat","oPromise","canMigrate","oContextBasedAdaptationModel","aFilteredFlexObjects","some","call","currentLayer","aCustomerFlexObjects","filterChangeOrChangeDefinitionsByCurrentLayer","update","reorder","parameters","priorities","version","remove"],"sources":["ContextBasedAdaptationsAPI-dbg.js"],"mappings":"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"}