{"version":3,"file":"FlexController.js","names":["sap","ui","define","Utils","Layer","ChangePersistenceFactory","Versions","Applier","Reverter","URLHandler","States","ControlVariantApplyAPI","JsControlTreeModifier","Element","Log","revertChangesAndUpdateVariantModel","oComponent","bSkipUrlUpdate","aChanges","Promise","resolve","then","length","reverse","revertMultipleChanges","appComponent","modifier","flexController","this","undefined","bind","oModel","getModel","getVariantModelName","update","parameters","updateURL","updateHashEntry","model","FlexController","sComponentName","_oChangePersistence","_sComponentName","getChangePersistenceForComponent","prototype","setVariantSwitchPromise","oPromise","_oVariantSwitchPromise","waitForVariantSwitch","checkDependencies","oChange","mDependencies","mChanges","oAppComponent","aRelevantChanges","bResult","canChangePotentiallyBeApplied","push","sDependencyKey","getId","aDependentChanges","dependencies","i","n","oDependentChange","getChangeFromChangesMap","aSelectors","getDependentControlSelectorList","getSelector","some","oSelector","bySelector","waitForChangesToBeApplied","aPromises","map","mSelector","_waitForChangesToBeApplied","all","mPropertyBag","filterChanges","isCurrentProcessFinished","changeTypes","includes","getChangeType","oControl","selector","id","getElementById","mChangesMap","getChangesMapForComponent","Object","assign","aChangesForControl","aNotYetProcessedChanges","filter","getAppComponentForControl","forEach","indexOf","concat","addChangeProcessingPromises","_removeOtherLayerChanges","sLayer","bRemoveOtherLayerChanges","aLayersToReset","values","sLayerToCheck","removeDirtyChanges","saveAll","bSkipUpdateCache","bDraft","bCondenseAnyLayer","sParentVersion","aDraftFilenames","oVersionModel","getVersionsModel","reference","layer","CUSTOMER","getProperty","saveDirtyChanges","oResult","response","vChangeDefinition","Array","isArray","change","fileName","onAllChangesSaved","draftFilenames","resetChanges","sGenerator","aSelectorIds","aChangeTypes","vLayer","applyVariantChanges","reduce","oPreviousPromise","_addRunTimeCreatedChangeAndUpdateDependencies","applyChangeOnControl","error","FakePromise","saveSequenceOfDirtyChanges","aDirtyChanges","oResponse","oDirtyChange","setState","LifecycleState","PERSISTED"],"sources":["FlexController-dbg.js"],"mappings":"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"}