/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/Device","sap/ui/unified/Menu","sap/ui/unified/MenuItem","sap/ui/core/Popup"],function(e,t,n,l){"use strict";function o(e,t){var n=t.getRowBindingContext();var l=e.getFilterProperty();var o=n.getProperty(l);if(o!=null&&typeof o!=="string"){o=o.toString()}if(this.getEnableCustomFilter()){this.fireCustomFilter({column:e,value:o})}else{this.filter(e,o)}}var u={TableUtils:null,openContextMenu:function(e,t){var n=u.TableUtils.getCell(e,t.target);var l=n?n[0]:null;var o=u.TableUtils.getCellInfo(l);var r=o.columnIndex;var C=o.rowIndex;var i=true;if(o.isOfType(u.TableUtils.CELLTYPE.COLUMNHEADER)){e.getColumns()[r]._openHeaderMenu(l);return true}else if(o.isOfType(u.TableUtils.CELLTYPE.ANYCONTENTCELL)){var a=u.TableUtils.getRowColCell(e,C,r,r>=0);var s=a.row;var f;var x=e.getBindingInfo("rows");if(x){f=s.getBindingContext(x.model)}if(r>=0){i=e.fireCellContextmenu({rowIndex:s.getIndex(),columnIndex:r,columnId:a.column.getId(),cellControl:a.cell,rowBindingContext:f,cellDomRef:l})}if(!i){return true}var c=e.getContextMenu();if(c&&x){c.setBindingContext(f,x.model)}i=e.fireBeforeOpenContextMenu({rowIndex:s.getIndex(),columnIndex:a.column?r:null,contextMenu:c});if(i){return u._openContentCellContextMenu(e,l,t)}else{return true}}return false},_openContentCellContextMenu:function(e,t,n){var l=u.TableUtils.getCellInfo(t);if(l.rowIndex>=u.TableUtils.getNonEmptyRowCount(e)){return false}if(u.hasCustomContextMenu(e)){return u._openCustomContentCellContextMenu(e,t,n)}else{return u._openDefaultContentCellContextMenu(e,t,n)}},_openCustomContentCellContextMenu:function(e,t,n){var l=u.TableUtils.getCellInfo(t);var o=e.getRows()[l.rowIndex];if(o.isGroupHeader()||o.isSummary()){return false}e.getContextMenu().openAsContextMenu(n,t);return true},_openDefaultContentCellContextMenu:function(e,l,r){var C=u.TableUtils.getCellInfo(l);var i=C.rowIndex;var a=e.getRows()[i];var s=C.columnIndex;var f=e.getColumns();var x=f[s];if(!e._oCellContextMenu){e._oCellContextMenu=new t(e.getId()+"-cellcontextmenu")}var c=e._oCellContextMenu.getId()+"-cellfilter";var M=sap.ui.getCore().byId(c);if(e.getEnableCellFilter()&&x&&x.isFilterableByMenu()&&!a.isGroupHeader()){if(!M){M=new n({id:c,text:u.TableUtils.getResourceText("TBL_FILTER")});M._onSelect=o.bind(e,x,a);M.attachSelect(M._onSelect)}else{M.detachSelect(M._onSelect);M._onSelect=o.bind(e,x,a);M.attachSelect(M._onSelect)}e._oCellContextMenu.insertItem(M,0)}else{e._oCellContextMenu.removeItem(M)}u.TableUtils.Hook.call(e,u.TableUtils.Hook.Keys.Table.OpenMenu,C,e._oCellContextMenu);if(e._oCellContextMenu.getItems().length===0){return false}e._oCellContextMenu.openAsContextMenu(r,l);return true},closeContentCellContextMenu:function(e){u._closeCustomContentCellContextMenu(e);u._closeDefaultContentCellContextMenu(e)},_closeCustomContentCellContextMenu:function(e){e.getContextMenu()?.close?.()},_closeDefaultContentCellContextMenu:function(e){e._oCellContextMenu?.close()},cleanupDefaultContentCellContextMenu:function(e){if(!e||!e._oCellContextMenu){return}var t=e._oCellContextMenu.getId()+"-cellfilter";var n=sap.ui.getCore().byId(t);e._oCellContextMenu.removeAllItems();e._oCellContextMenu.destroy();e._oCellContextMenu=null;if(n){n.destroy()}},hasCustomContextMenu:function(e){return e!=null&&e.getContextMenu()!=null}};return u},true);
//# sourceMappingURL=_MenuUtils.js.map