/*!
 * SAPUI5
 * (c) Copyright 2009-2023 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/core/library","sap/ui/core/format/NumberFormat","sap/ui/export/ExportUtils","sap/m/library","sap/m/Dialog","sap/m/Button","sap/m/ProgressIndicator","sap/m/Text","sap/m/MessageBox"],function(e,t,n,s,i,a,r,o,u){"use strict";var l=e.ValueState;var T=s.DialogType;var g=s.ButtonType;function f(){return new Promise(function(e,t){var s;n.getResourceBundle().then(function(t){var n=new a({text:t.getText("CANCEL_BUTTON"),press:function(){if(s&&s.oncancel){s.oncancel()}s.finish()}});var u=new r({displayAnimation:false,displayValue:"0 / 0",showValue:true,height:"0.75rem",state:l.Information});u.addStyleClass("sapUiMediumMarginTop");var g=new o({text:t.getText("PROGRESS_FETCHING_MSG")});s=new i({title:t.getText("PROGRESS_TITLE"),type:T.Message,contentWidth:"500px",content:[g,u],endButton:n,ariaLabelledBy:[g]});s.updateStatus=function(e,s,i){var a;if(typeof e==="string"&&e){i=e;g.setText(i)}if(!isNaN(e)&!isNaN(s)){a=e/s*100}if(a>=100){u.setState(l.Success);n.setEnabled(false);g.setText(i||t.getText("PROGRESS_BUNDLE_MSG"))}u.setPercentValue(a);if(isNaN(s)||s<=0||s>=1048575){s="âˆž"}if(!isNaN(e)){u.setDisplayValue(""+e+" / "+s)}};s.finish=function(){s.close();s.destroy()};e(s)})})}function c(e){return new Promise(function(s,r){n.getResourceBundle().then(function(n){var u,f,c,p,N,_,R,x,E,m;u=[];f=false;N=t.getIntegerInstance({groupingEnabled:true});m=n.getText(e.fileType+"_FILETYPE");E=N.format(e.rowLimit);if(e.rows){_=N.format(e.rows);if(e.columns){R=N.format(e.rows*e.columns);u.push(n.getText("MSG_WARNING_CELL_COUNT",[_,e.columns,R]))}else{u.push(n.getText("MSG_WARNING_ROW_COUNT",[_]))}if(e.rows>e.rowLimit){u.push(n.getText("MSG_WARNING_ROW_LIMIT",[E,m]))}if(e.rows*e.columns>e.cellLimit){x=N.format(e.cellLimit);u.push(n.getText("MSG_WARNING_CELL_LIMIT",[x]))}}else{u.push(n.getText("MSG_WARNING_COUNT_UNKNOWN"));u.push(n.getText("MSG_WARNING_ROW_LIMIT",[E,m]));u.push(n.getText("MSG_WARNING_ADVICE"))}u.push(n.getText("MSG_WARNING_EXPORT_ANYWAY"));p=new o({text:u.join("\n\n")});c=new i({title:n.getText("WARNING_TITLE"),type:T.Message,state:l.Warning,content:p,contentWidth:"550px",ariaLabelledBy:p,endButton:new a({type:g.Transparent,text:n.getText("CANCEL_BUTTON"),press:function(){c.close()}}),beginButton:new a({type:g.Emphasized,text:n.getText("EXPORT_BUTTON"),press:function(){f=true;c.close()}}),afterClose:function(){c.destroy();f?s():r()}});c.open()})})}function p(e){if(!e){return}if(e instanceof Error){e=e.message}n.getResourceBundle().then(function(t){var n=e||t.getText("PROGRESS_ERROR_DEFAULT");if(e.toLowerCase().indexOf("invalid string length")>-1){n=t.getText("MSG_ERROR_OUT_OF_MEMORY")}u.error(n,{title:t.getText("PROGRESS_ERROR_TITLE")})})}return{getProgressDialog:f,showErrorMessage:p,showWarningDialog:c}},true);
//# sourceMappingURL=ExportDialog.js.map