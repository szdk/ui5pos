sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/m/Dialog","sap/m/Button","sap/m/Text","ui5pos/szdk/controller/util/InputCheck","sap/ui/model/Sorter"],function(t,e,o,s,i,n,r){"use strict";return t.extend("ui5pos.szdk.controller.BaseController",{inputCheck:n,onInit:function(){this.comp=this.getOwnerComponent();this.i18n=this.comp.getModel("lang").getResourceBundle();this.inputCheck.setResourceBundel(this.i18n)},goBack:function(t="home",o={}){let s=e.getInstance().getPreviousHash();if(s!==undefined)window.history.go(-1);else this.comp.getRouter().navTo(t,o,true)},getMaxValue:function(t,e){let o=()=>{},s=()=>{};let i=new Promise((t,e)=>{o=t;s=e});this.comp.getModel("service").read(t,{sorters:[new r(e,true)],urlParameters:{$select:e,$top:1},success:t=>{if(!t||!t.results||t.results.length==0)o(0);else o(t.results[0][e])},error:t=>{s(t)}});return i},showErrorDialog:function(t){this.showDialog(t,sap.ui.core.ValueState.Error)},showInfoDialog:function(t){this.showDialog(t,sap.ui.core.ValueState.Information)},showSuccessDialog:function(t){this.showDialog(t,sap.ui.core.ValueState.Success)},showWarningDialog:function(t){this.showDialog(t,sap.ui.core.ValueState.Warning)},showDialog:function(t,e=sap.ui.core.ValueState.Error){t=t||{};t.title=t.title||this.i18n.getText({[sap.ui.core.ValueState.Error]:"error",[sap.ui.core.ValueState.Information]:"information",[sap.ui.core.ValueState.Warning]:"warning",[sap.ui.core.ValueState.Success]:"success"}[e]);t.buttonClose=t.buttonClose||t.onConfirm?this.i18n.getText("cancel"):this.i18n.getText("close");t.buttonConfirm=t.buttonConfirm||this.i18n.getText("confirm");t.message=t.message||[this.i18n.getText("an_error_occurred")];t.onClose=t.onClose;t.onConfirm=t.onConfirm;if(typeof t.message=="string")t.message=[t.message];let n=[];for(let e of t.message){if(typeof e=="string")n.push(new i({text:e}))}let r=new s({type:t.onConfirm?sap.m.ButtonType.Transparent:sap.m.ButtonType.Emphasized,text:t.buttonClose,press:()=>{this._Dialog.close();this._Dialog.destroyBeginButton().destroyEndButton().destroyContent();if(t.onClose)t.onClose()}});let a=!t.onConfirm?undefined:new s({type:sap.m.ButtonType.Emphasized,text:t.buttonConfirm,press:()=>{this._Dialog.close();this._Dialog.destroyBeginButton().destroyEndButton().destroyContent();if(t.onConfirm)t.onConfirm()}});if(!this._Dialog){this._Dialog=new o({type:sap.m.DialogType.Message,state:e,title:t.title,content:n,beginButton:a,endButton:r})}else{this._Dialog.setTitle(t.title);if(a)this._Dialog.setBeginButton(a);this._Dialog.setEndButton(r);this._Dialog.setState(e);for(let t of n)this._Dialog.addContent(t)}this._Dialog.open()}})});
//# sourceMappingURL=BaseController.js.map