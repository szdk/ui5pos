<mvc:View
		controllerName="ui5pos.szdk.controller.product.View"
		xmlns:mvc="sap.ui.core.mvc"
		xmlns="sap.m"
		xmlns:f="sap.f"
		xmlns:layout="sap.ui.layout"
		xmlns:core="sap.ui.core"
		core:require="{formatMessage: 'sap/base/strings/formatMessage'}"

		height="100%">
		<f:DynamicPage id="product_view_page" headerExpanded="true">
			<f:title>
				<f:DynamicPageTitle>
					<f:heading>
						<Title text="{service>ProductName}"/>
					</f:heading>

					<f:expandedContent>
						<Label text="{parts : [{path: 'lang>supplied_by'}, {path: 'service>Supplier/CompanyName'}], formatter : 'formatMessage' }"/>
					</f:expandedContent>
					<f:snappedContent>
						<Label text="{parts : [{path: 'lang>supplied_by'}, {path: 'service>Supplier/CompanyName'}], formatter : 'formatMessage' }"/>
					</f:snappedContent>
					<f:snappedTitleOnMobile>
						<Title text="{parts : [{path: 'lang>supplied_by'}, {path: 'service>Supplier/CompanyName'}], formatter : 'formatMessage' }"/>
					</f:snappedTitleOnMobile>
					
					<f:content>
						<GenericTag
							text="{= 
								${service>Discontinued} ? ${lang>discontinued} : (
									${service>UnitsInStock} &lt;= 0 ? ${lang>out_of_stock} : (
										${service>UnitsInStock} &lt;= ${service>ReorderLevel} ?
											${lang>few_left} + ' ( ' + ${service>UnitsInStock} + ' / ' + ${service>ReorderLevel} + ' ) '
											: ${lang>in_stock} + ' ( ' + ${service>UnitsInStock} + ' / ' + ${service>ReorderLevel} + ' ) '
									)
								)
							}"
							status="{= 
								${service>Discontinued} || ${service>UnitsInStock} === 0 ?
									'Error'
									: (
										${service>UnitsInStock} &lt;= ${service>ReorderLevel} ? 'Warning' : 'Success'
									)
							}"
							press="onPressOpenPopover"
							design="StatusIconHidden">
						</GenericTag>
					</f:content>
					
					<f:actions>
						<Button
								text="{= ${model>/editting} ? ${lang>cancel} : ${lang>edit} }"
								type="{= ${model>/editting} ? 'Reject' : 'Transparent' }"
								icon="{= ${model>/editting} ? 'sap-icon://sys-cancel' : 'sap-icon://edit'}"
								
								press=".onToggleEdit"/>
					</f:actions>

				</f:DynamicPageTitle>
			</f:title>
			<!-- DynamicPage Header -->
			<f:header>
				<f:DynamicPageHeader pinnable="true">
					<!-- =========== VIEW MODE ============== -->
					<layout:HorizontalLayout visible="{= ${model>/editting} === false }" allowWrapping="true">
						<layout:VerticalLayout class="sapUiMediumMarginEnd">
							<ObjectAttribute title="{lang>product_id}" text="{service>ProductID}"/>
							<ObjectAttribute title="{lang>product_name}" text="{service>ProductName}"/>
							<ObjectAttribute title="{lang>category}" text="{service>Category/CategoryName}" press=".onPressCategory"/>
						</layout:VerticalLayout>

						<layout:VerticalLayout>
							<layout:HorizontalLayout allowWrapping="false">
								<ObjectAttribute title="{lang>product_unitPrice}"/>
								<ObjectNumber class="m-l-1" number="{
									parts:[
										{path:'service>UnitPrice'},
										{value: 'USD'}
									],
									type: 'sap.ui.model.type.Currency',
									formatOptions: {showMeasure:false}
								}" unit="USD" ></ObjectNumber>
							</layout:HorizontalLayout>
							
							<ObjectAttribute title="{lang>product_quantityPerUnit}" text="{service>QuantityPerUnit}"/>
							<ObjectAttribute title="{lang>product_instock}" text="{service>UnitsInStock}"/>
						</layout:VerticalLayout>
					</layout:HorizontalLayout>

					<!-- =========== VIEW MODE ============== -->
					<layout:HorizontalLayout>

					</layout:HorizontalLayout>


				</f:DynamicPageHeader>
			</f:header>
			<f:content>
				<Text text="TODO, show sales orders containing this product"></Text>
			</f:content>
			
		</f:DynamicPage>
</mvc:View>